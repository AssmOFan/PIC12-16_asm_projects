MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         include MicroMenu_Lib.h
                      00001 ; Микроменю на базе двухстрочного индикатора HD44780 и четырехпозиционного джойстика (крестовины кнопок)
                      00002 
Warning[205]: Found directive in column 1. (include)
                      00003 include hardware_profile.inc
                      00001         include p16f84.inc
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F84 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00206         LIST
                      00002         list p=16f84
Warning[205]: Found directive in column 1. (include)
                      00004 include Macro.h 
                      00001 #define USE_SHORT_MOD_PCL       1       ; Использовать "укороченную" версию макроса модификации PCL, поз
                            воляет экономить 1 слово памяти на каждом вызове макроса ценой 1 лишней ячейки ОЗУ
                      00002 
                      00003 push    macro
                      00004                 movwf   w_temp
                      00005                 swapf   STATUS,w
                      00006                 movwf   status_temp
                      00007                 endm
                      00008 
                      00009 pop             macro
                      00010                 swapf   status_temp,w
                      00011                 movwf   STATUS
                      00012                 swapf   w_temp,f
                      00013                 swapf   w_temp,w
                      00014                 endm
                      00015 
                      00016 mod_PCL macro   target                  ; Макрос, позволяет размещать таблицы на границах страниц
                      00017                 local   Table
                      00018                 movfw   target
                      00019                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
                      00020                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                      00021         if      USE_SHORT_MOD_PCL
                      00022                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
                      00023                 addlw   high Table              ; Загрузить 5 старших бит адреса
                      00024         else
                      00025                 movlw   high Table              ; Загрузить 5 старших бит адреса
                      00026                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                      00027                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                      00028         endif
                      00029                 movwf   PCLATH                  ; Установить старшую часть адреса
                      00030                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
                      00031                 movwf   PCL                             ; Установить младшую часть адреса
                      00032         Table
                      00033                 endm
                      00034 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00035 add_PCL macro   target,address  ; Макрос, позволяет удобно указывать страницу для следующего за ним кода
                      00036                                 movfw   target  
                      00037                                 clrf    PCLATH
                      00038                         if      (address==0x100)
                      00039                                 bsf             PCLATH,0
                      00040                         endif
                      00041                         if      (address==0x200)
                      00042                                 bsf             PCLATH,1
                      00043                         endif
                      00044                         if      (address==0x300)
                      00045                                 bsf             PCLATH,0                                
                      00046                                 bsf             PCLATH,1
                      00047                         endif
                      00048                         if      (address==0x400)
                      00049                                 bsf             PCLATH,2                                
                      00050                         endif
                      00051                                 addwf   PCL
                      00052                                 endm
                      00005 
                      00006 #define USE_CURSOR                              0                               ; Всегда рисовать курсор
                             в конце 1-й строки
                      00007 #define USE_MOVING_CURSOR               1                               ; Использовать перемещаемый курс
                            ор (повышает удобство использования меню и размер прошивки)
                      00008 #define USE_TOP_LAST_CURSOR             1                               ; Использовать отображение "перв
                            ый пункт всегда сверху" и "последний пункт всегда снизу" (повышает удобство использования меню и
                      00009 #define USE_RBIE                                1                               ; Использовать прерывани
                            е по изминению состояния PORTB для обработки кнопок (позволяет использовать сон)
                      00010 #define USE_MENU_ACTION                 1                               ; Использовать возможность запус
                            ка действий при входе в пункт меню
                      00011 
Warning[205]: Found directive in column 1. (if)
                      00012 if      USE_MENU_ACTION 
                      00013 #define actions_menu_flags              b'00000001'             ; Выставленный бит - есть действие при в
                            ходе в этот пункт меню (не забыть заполнить обработчик действия)
Warning[205]: Found directive in column 1. (endif)
                      00014 endif
                      00015 
                      00016 #define UP                                              PORTB,4
                      00017 #define DOWN                                    PORTB,5
                      00018 #define ENTER                                   PORTB,6
                      00019 #define EXIT                                    PORTB,7
                      00020 
                      00021 #define Press_UP                                flags,0
                      00022 #define Press_DOWN                              flags,1
                      00023 #define Press_EXIT                              flags,2
                      00024 #define Press_ENTER                             flags,3 
                      00025 
                      00026 #define EXIT_DELAY                              .20                             ; Количество опросов кно
                            пок, до выхода в предыдущий уровень (* 0,8 сек)
                      00027 
                      00028 #define ZASTAVKA_FIRST_STRING   "  MicroMenuLib"
                      00029 #define ZASTAVKA_SECOND_STRING  "  ver 1.0 beta"
                      00030 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00031 #define NUM_OF_MAIN_MENU_PUNKTS .5                              ; Количество пунктов меню, до 10 
                      00032 
                      00033 #define MENU_NAME_1                             "1.Menu_1"
                      00034 #define MENU_NAME_2                             "2.Menu_2"
                      00035 #define MENU_NAME_3                             "3.Menu_3"
                      00036 #define MENU_NAME_4                             "4.Menu_4"
                      00037 #define MENU_NAME_5                             "5.Menu_5"      
                      00038 
                      00039 #define NUM_OF_SUBMENU_PUNKTS_1 .3                              ; Количество подпунктов каждого пункта м
                            еню, до 10
                      00040 
                      00041 #define MENU_SUBMENU_NAME_1_1   "1.1.Garage"
                      00042 #define MENU_SUBMENU_NAME_1_2   "1.2.Doors"
                      00043 #define MENU_SUBMENU_NAME_1_3   "1.3.House"
                      00044 
                      00045 #define NUM_OF_SUBMENU_PUNKTS_2 .3
                      00046 
                      00047 #define MENU_SUBMENU_NAME_2_1   "2.1.Garage"
                      00048 #define MENU_SUBMENU_NAME_2_2   "2.2.Doors"
                      00049 #define MENU_SUBMENU_NAME_2_3   "2.3.House"
                      00050                                 
                      00051 #define NUM_OF_SUBMENU_PUNKTS_3 .3
                      00052 
                      00053 #define MENU_SUBMENU_NAME_3_1   "3.1.Review"
                      00054 #define MENU_SUBMENU_NAME_3_2   "3.2.Shut Off"
                      00055 #define MENU_SUBMENU_NAME_3_3   "3.3.FAQ"
                      00056 
                      00057 #define NUM_OF_SUBMENU_PUNKTS_4 .3
                      00058 
                      00059 #define MENU_SUBMENU_NAME_4_1   "4.1.Review"
                      00060 #define MENU_SUBMENU_NAME_4_2   "4.2.Shut Off"
                      00061 #define MENU_SUBMENU_NAME_4_3   "4.3.FAQ"
                      00062 
                      00063 #define NUM_OF_SUBMENU_PUNKTS_5 .3
                      00064 
                      00065 #define MENU_SUBMENU_NAME_5_1   "5.1.Config"
                      00066 #define MENU_SUBMENU_NAME_5_2   "5.2.Settings"
                      00067 #define MENU_SUBMENU_NAME_5_3   "5.3.About"
                      00068 
                      00069 ;=======================================================================================================
                            =========
                      00070 Create_Menu_Names       macro                           ; Макрос, создает имена всех пунктов меню
                      00071                         local   a=1
                      00072                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
                      00073                                 Menu_#v(a)
                      00074                                         mod_PCL symbol_pointer
                      00075                                         dt              MENU_NAME_#v(a),0
                      00076                                         a+=1
                      00077                                 endw
                      00078                         endm
                      00079 
                      00080 ;=======================================================================================================
                            =========
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00081 retlw_num_of_submenu_punkts     macro           ; Макрос, возвращает количество пунктов нужного подменю
                      00082                                 mod_PCL index_menu
                      00083                         local   a=1
                      00084                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
                      00085                                         retlw   NUM_OF_SUBMENU_PUNKTS_#v(a)
                      00086                                         a+=1
                      00087                                 endw
                      00088                         endm
                      00089 
                      00090 ;=======================================================================================================
                            =========
                      00091 goto_Punkt_Menu macro                                   ; Макрос, создает переходы на все пункты меню
                      00092                                 mod_PCL index_menu
                      00093                         local   a=1
                      00094                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
                      00095                                         goto    Menu_#v(a)
                      00096                                         a+=1
                      00097                                 endw
                      00098                         endm
                      00099 
                      00100 ;=======================================================================================================
                            =========
                      00101 goto_Punkt_Submenu      macro                           ; Макрос, создает переходы на все подпункты меню
                      00102                                         mod_PCL index_menu                              
                      00103                         local   c=1
                      00104                                 while   c<NUM_OF_MAIN_MENU_PUNKTS+1
                      00105                                         goto    Menu_#v(c)_Table
                      00106                                         c+=1
                      00107                                 endw
                      00108                         local   d=1
                      00109 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00110 ; Переходы на подпункты 1 пункта меню
                      00111 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00112                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00113                                 local   a=1     
                      00114                                 Menu_#v(d)_Table
                      00115                                         mod_PCL index_submenu
                      00116                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00117                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00118                                         a+=1
                      00119                                 endw
                      00120                                         d+=1
                      00121                                 endif
                      00122 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00123 ; Переходы на подпункты 2 пункта меню
                      00124 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00125                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00126                                 local   a=1     
                      00127                                 Menu_#v(d)_Table
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00128                                         mod_PCL index_submenu
                      00129                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00130                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00131                                         a+=1
                      00132                                 endw
                      00133                                         d+=1
                      00134                                 endif
                      00135 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00136 ; Переходы на подпункты 3 пункта меню
                      00137 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00138                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00139                                 local   a=1     
                      00140                                 Menu_#v(d)_Table
                      00141                                         mod_PCL index_submenu
                      00142                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00143                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00144                                         a+=1
                      00145                                 endw
                      00146                                         d+=1
                      00147                                 endif
                      00148 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00149 ; Переходы на подпункты 4 пункта меню
                      00150 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00151                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00152                                 local   a=1     
                      00153                                 Menu_#v(d)_Table
                      00154                                         mod_PCL index_submenu
                      00155                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00156                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00157                                         a+=1
                      00158                                 endw
                      00159                                         d+=1
                      00160                                 endif
                      00161 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00162 ; Переходы на подпункты 5 пункта меню
                      00163 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00164                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00165                                 local   a=1     
                      00166                                 Menu_#v(d)_Table
                      00167                                         mod_PCL index_submenu
                      00168                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00169                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00170                                         a+=1
                      00171                                 endw
                      00172                                         d+=1
                      00173                                 endif
                      00174 ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                      00175 ; Переходы на подпункты 6 пункта меню
                      00176 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00177                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00178                                 local   a=1     
                      00179                                 Menu_#v(d)_Table
                      00180                                         mod_PCL index_submenu
                      00181                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00182                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00183                                         a+=1
                      00184                                 endw
                      00185                                         d+=1
                      00186                                 endif
                      00187 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00188 ; Переходы на подпункты 7 пункта меню
                      00189 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00190                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00191                                 local   a=1     
                      00192                                 Menu_#v(d)_Table
                      00193                                         mod_PCL index_submenu
                      00194                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00195                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00196                                         a+=1
                      00197                                 endw
                      00198                                         d+=1
                      00199                                 endif
                      00200 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00201 ; Переходы на подпункты 8 пункта меню
                      00202 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00203                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00204                                 local   a=1     
                      00205                                 Menu_#v(d)_Table
                      00206                                         mod_PCL index_submenu
                      00207                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00208                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00209                                         a+=1
                      00210                                 endw
                      00211                                         d+=1
                      00212                                 endif
                      00213 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00214 ; Переходы на подпункты 9 пункта меню
                      00215 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00216                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00217                                 local   a=1     
                      00218                                 Menu_#v(d)_Table
                      00219                                         mod_PCL index_submenu
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00220                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00221                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00222                                         a+=1
                      00223                                 endw
                      00224                                         d+=1
                      00225                                 endif
                      00226 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00227 ; Переходы на подпункты 10 пункта меню
                      00228 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00229                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00230                                 local   a=1     
                      00231                                 Menu_#v(d)_Table
                      00232                                         mod_PCL index_submenu
                      00233                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00234                                         goto    Menu_#v(d)_Submenu_#v(a)
                      00235                                         a+=1
                      00236                                 endw
                      00237                                         d+=1
                      00238                                 endif           
                      00239 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00240                         endm
                      00241 
                      00242 ;=======================================================================================================
                            =========
                      00243 goto_Punkt_Submenu_action       macro           ; Макрос, создает переходы на действия всех подпунктов м
                            еню
                      00244                                         mod_PCL index_menu                              
                      00245                         local   c=1
                      00246                                 while   c<NUM_OF_MAIN_MENU_PUNKTS+1
                      00247                                         goto    Menu_#v(c)_Table_action
                      00248                                         c+=1
                      00249                                 endw
                      00250                         local   d=1
                      00251 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00252 ; Действия подпунктов 1 пункта меню
                      00253 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00254                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00255                                 local   a=1     
                      00256                                 Menu_#v(d)_Table_action
                      00257                                         mod_PCL index_submenu
                      00258                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00259                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00260                                         a+=1
                      00261                                 endw
                      00262                                         d+=1
                      00263                                 endif
                      00264 ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00265 ; Действия подпунктов 2 пункта меню
                      00266 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00267                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00268                                 local   a=1     
                      00269                                 Menu_#v(d)_Table_action
                      00270                                         mod_PCL index_submenu
                      00271                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00272                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00273                                         a+=1
                      00274                                 endw
                      00275                                         d+=1
                      00276                                 endif
                      00277 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00278 ; Действия подпунктов 3 пункта меню
                      00279 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00280                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00281                                 local   a=1     
                      00282                                 Menu_#v(d)_Table_action
                      00283                                         mod_PCL index_submenu
                      00284                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00285                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00286                                         a+=1
                      00287                                 endw
                      00288                                         d+=1
                      00289                                 endif
                      00290 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00291 ; Действия подпунктов 4 пункта меню
                      00292 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00293                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00294                                 local   a=1     
                      00295                                 Menu_#v(d)_Table_action
                      00296                                         mod_PCL index_submenu
                      00297                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00298                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00299                                         a+=1
                      00300                                 endw
                      00301                                         d+=1
                      00302                                 endif
                      00303 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00304 ; Действия подпунктов 5 пункта меню
                      00305 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00306                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00307                                 local   a=1     
                      00308                                 Menu_#v(d)_Table_action
                      00309                                         mod_PCL index_submenu
                      00310                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00311                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00312                                         a+=1
                      00313                                 endw
                      00314                                         d+=1
                      00315                                 endif
                      00316 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00317 ; Действия подпунктов 6 пункта меню
                      00318 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00319                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00320                                 local   a=1     
                      00321                                 Menu_#v(d)_Table_action
                      00322                                         mod_PCL index_submenu
                      00323                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00324                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00325                                         a+=1
                      00326                                 endw
                      00327                                         d+=1
                      00328                                 endif
                      00329 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00330 ; Действия подпунктов 7 пункта меню
                      00331 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00332                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00333                                 local   a=1     
                      00334                                 Menu_#v(d)_Table_action
                      00335                                         mod_PCL index_submenu
                      00336                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00337                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00338                                         a+=1
                      00339                                 endw
                      00340                                         d+=1
                      00341                                 endif
                      00342 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00343 ; Действия подпунктов 8 пункта меню
                      00344 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00345                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00346                                 local   a=1     
                      00347                                 Menu_#v(d)_Table_action
                      00348                                         mod_PCL index_submenu
                      00349                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00350                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00351                                         a+=1
                      00352                                 endw
                      00353                                         d+=1
                      00354                                 endif
                      00355 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00356 ; Действия подпунктов 9 пункта меню
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00357 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00358                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00359                                 local   a=1     
                      00360                                 Menu_#v(d)_Table_action
                      00361                                         mod_PCL index_submenu
                      00362                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00363                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00364                                         a+=1
                      00365                                 endw
                      00366                                         d+=1
                      00367                                 endif
                      00368 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00369 ; Действия подпунктов 10 пункта меню
                      00370 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00371                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00372                                 local   a=1     
                      00373                                 Menu_#v(d)_Table_action
                      00374                                         mod_PCL index_submenu
                      00375                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00376                                         goto    Menu_#v(d)_Submenu_#v(a)_action
                      00377                                         a+=1
                      00378                                 endw
                      00379                                         d+=1
                      00380                                 endif
                      00381 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00382                         endm
                      00383 
                      00384 ;===================================================================================================
                      00385 Create_Submenu_Names    macro                           ; Макрос, создает имена всех подпунктов меню
                      00386                                 local   d=1
                      00387 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00388 ; Подпункты 1 пункта меню
                      00389 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00390                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00391                                 local   a=1     
                      00392                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00393                                         Menu_#v(d)_Submenu_#v(a)
                      00394                                                 mod_PCL symbol_pointer
                      00395                                                 dt              MENU_SUBMENU_NAME_1_#v(a),0
                      00396                                         a+=1
                      00397                                 endw
                      00398                                         d+=1
                      00399                                 endif
                      00400 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00401 ; Подпункты 2 пункта меню
                      00402 ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                      00403                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00404                                 local   a=1     
                      00405                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00406                                         Menu_#v(d)_Submenu_#v(a)
                      00407                                                 mod_PCL symbol_pointer
                      00408                                                 dt              MENU_SUBMENU_NAME_2_#v(a),0
                      00409                                         a+=1
                      00410                                 endw
                      00411                                         d+=1
                      00412                                 endif
                      00413 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00414 ; Подпункты 3 пункта меню
                      00415 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00416                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00417                                 local   a=1     
                      00418                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00419                                         Menu_#v(d)_Submenu_#v(a)
                      00420                                                 mod_PCL symbol_pointer
                      00421                                                 dt              MENU_SUBMENU_NAME_3_#v(a),0
                      00422                                         a+=1
                      00423                                 endw
                      00424                                         d+=1
                      00425                                 endif
                      00426 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00427 ; Подпункты 4 пункта меню
                      00428 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00429                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00430                                 local   a=1     
                      00431                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00432                                         Menu_#v(d)_Submenu_#v(a)
                      00433                                                 mod_PCL symbol_pointer
                      00434                                                 dt              MENU_SUBMENU_NAME_4_#v(a),0
                      00435                                         a+=1
                      00436                                 endw
                      00437                                         d+=1
                      00438                                 endif
                      00439 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00440 ; Подпункты 5 пункта меню
                      00441 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00442                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00443                                 local   a=1     
                      00444                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00445                                         Menu_#v(d)_Submenu_#v(a)
                      00446                                                 mod_PCL symbol_pointer
                      00447                                                 dt              MENU_SUBMENU_NAME_5_#v(a),0
                      00448                                         a+=1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00449                                 endw
                      00450                                         d+=1
                      00451                                 endif
                      00452 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00453 ; Подпункты 6 пункта меню
                      00454 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00455                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00456                                 local   a=1     
                      00457                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00458                                         Menu_#v(d)_Submenu_#v(a)
                      00459                                                 mod_PCL symbol_pointer
                      00460                                                 dt              MENU_SUBMENU_NAME_6_#v(a),0
                      00461                                         a+=1
                      00462                                 endw
                      00463                                         d+=1
                      00464                                 endif
                      00465 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00466 ; Подпункты 7 пункта меню
                      00467 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00468                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00469                                 local   a=1     
                      00470                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00471                                         Menu_#v(d)_Submenu_#v(a)
                      00472                                                 mod_PCL symbol_pointer
                      00473                                                 dt              MENU_SUBMENU_NAME_7_#v(a),0
                      00474                                         a+=1
                      00475                                 endw
                      00476                                         d+=1
                      00477                                 endif
                      00478 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00479 ; Подпункты 8 пункта меню
                      00480 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00481                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00482                                 local   a=1     
                      00483                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00484                                         Menu_#v(d)_Submenu_#v(a)
                      00485                                                 mod_PCL symbol_pointer
                      00486                                                 dt              MENU_SUBMENU_NAME_8_#v(a),0
                      00487                                         a+=1
                      00488                                 endw
                      00489                                         d+=1
                      00490                                 endif
                      00491 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00492 ; Подпункты 9 пункта меню
                      00493 ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00494                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00495                                 local   a=1     
                      00496                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00497                                                 mod_PCL symbol_pointer
                      00498                                                 dt              MENU_SUBMENU_NAME_9_#v(a),0
                      00499                                         a+=1
                      00500                                 endw
                      00501                                         d+=1
                      00502                                 endif
                      00503 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00504 ; Подпункты 10 пункта меню
                      00505 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00506                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                      00507                                 local   a=1     
                      00508                                 while   a<NUM_OF_SUBMENU_PUNKTS_#v(d)+1
                      00509                                         Menu_#v(d)_Submenu_#v(a)
                      00510                                                 mod_PCL symbol_pointer
                      00511                                                 dt              MENU_SUBMENU_NAME_10_#v(a),0
                      00512                                         a+=1
                      00513                                 endw
                      00514                                         d+=1
                      00515                                 endif
                      00516 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00517                         endm
                      00518 
Warning[205]: Found directive in column 1. (if)
                      00519 if      USE_MENU_ACTION 
                      00520 
                      00521 goto_Menu_action        macro           ; Макрос, создает переходы на действия всех пунктов меню (если в
                            ключена соответствующая опция)
                      00522                                         mod_PCL index_menu                              
                      00523                                         local   a=1
                      00524                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
                      00525                                         goto    Menu_#v(a)_action
                      00526                                         a+=1
                      00527                                 endw
                      00528                                         endm
                      00529 
Warning[205]: Found directive in column 1. (endif)
                      00530 endif
                      00002         include HD44780_Lib.h
Warning[205]: Found directive in column 1. (include)
                      00001 include hardware_profile.inc
                      00003         include p16f84.inc
                      00207         LIST
                      00208 
                      00209 ;==========================================================================
                      00210 ;  MPASM PIC16F84 processor include
                      00211 ; 
                      00212 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00213 ;==========================================================================
                      00214 
Message[310]: Superseding current maximum RAM and RAM map.
                      00412         LIST
                      00004         list p=16f84
                      00002 
  00000001            00003 y                               equ             1                               ; YES
  00000000            00004 n                               equ             0                               ; NO
                      00005 
  00000001            00006 Use_4_bit_mode  equ             y                               ; YES/NO
  00000000            00007 Use_High_Nible  equ             n                               ; YES/NO
  00000000            00008 Use_One_Port    equ             n                               ; YES/NO
  00000001            00009 Only_Write              equ             y                               ; YES/NO
                      00010 
  00000006            00011 LCD_DATA                equ             PORTB                   ; Описываем порт линий данных
  00000086            00012 LCD_DATA_TRIS   equ             TRISB
                      00013 
                      00014         if      (Use_4_bit_mode && Use_One_Port); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00015 
                      00016 LCD_CNTL                equ             LCD_DATA                ; то так и опишем
                      00017 LCD_CNTL_TRIS   equ             LCD_DATA_TRIS
                      00018 
                      00019         else
                      00020 
  00000005            00021 LCD_CNTL                equ             PORTA                   ; Иначе зададим любой другой
  00000085            00022 LCD_CNTL_TRIS   equ             TRISA
                      00023         endif
                      00024         
                      00025         if      (Use_4_bit_mode && Use_One_Port && Use_High_Nible && Only_Write)
                      00026 E                               equ             2
                      00027 RS                              equ             3
                      00028 CNTL_TRIS_MASK  equ             b'11110011'             ; Маска настройки линий управлениЯ
                      00029         endif
                      00030 
                      00031         if      (Use_4_bit_mode && Use_One_Port && Use_High_Nible && !Only_Write)
                      00032 E                               equ             1
                      00033 RW                              equ             2
                      00034 RS                              equ             3
                      00035 CNTL_TRIS_MASK  equ             b'11110001'             ; Маска настройки линий управлениЯ
                      00036         endif   
                      00037 
                      00038         if      (Use_4_bit_mode && Use_One_Port && !Use_High_Nible && Only_Write)
                      00039 E                               equ             4
                      00040 RS                              equ             5
                      00041 CNTL_TRIS_MASK  equ             b'11001111'             ; Маска настройки линий управлениЯ
                      00042         endif   
                      00043 
                      00044         if      (Use_4_bit_mode && Use_One_Port && !Use_High_Nible && !Only_Write)
                      00045 E                               equ             4
                      00046 RW                              equ             5
                      00047 RS                              equ             6
                      00048 CNTL_TRIS_MASK  equ             b'10001111'             ; Маска настройки линий управлениЯ
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00049 
                      00050         else    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
                      00051         
  00000001            00052 E                               equ             1
  00000003            00053 RS                              equ             3
  000000F5            00054 CNTL_TRIS_MASK  equ             b'11110101'             ; Маска настройки линий управления
                      00055         endif
                      00056 
  0000000C            00057 DISP_ON                 EQU             b'00001100'             ; Display on
  0000000E            00058 DISP_ON_C               EQU             b'00001110'             ; Display on, Cursor on
  0000000F            00059 DISP_ON_B               EQU             b'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00060 DISP_OFF                EQU             b'00001000'             ; Display off
  00000001            00061 CLR_DISP                EQU             b'00000001'             ; Clear the Display
  00000006            00062 ENTRY_INC               EQU             b'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00063 ENTRY_INC_S             EQU             b'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00064 ENTRY_DEC               EQU             b'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00065 ENTRY_DEC_S             EQU             b'00000101'             ;
  00000080            00066 DD_RAM_ADDR             EQU             b'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00067 DD_RAM_UL               EQU             b'10000000'             ; Upper Left coner of the Display
  000000C0            00068 SECOND_LINE             EQU             b'11000000'             ; Move cursor to second line
                      00069                                         
                      00003 
                      00004 MicroMenu_Lib_udata     udata_shr
0000                  00005 index_menu              res     1
0001                  00006 index_submenu   res     1
0002                  00007 symbol_pointer  res     1
0003                  00008 menu_counter    res     1
0004                  00009 temp_1                  res     1
0005                  00010 temp_2                  res     1
0006                  00011 temp_3                  res     1
                      00012 
Warning[205]: Found directive in column 1. (extern)
  0000                00013 extern  flags,offset
                      00014 
                      00015         if      USE_SHORT_MOD_PCL
Warning[205]: Found directive in column 1. (extern)
  0000                00016 extern  known_zero
                      00017         endif
                      00018 
  0000                00019         global  Menu_heandler,Zastavka
  0000                00020         extern  Send_LCD_Symbol,Send_LCD_Command,Delay_4ms,Main
                      00021 ;===================================================================================================
                      00022 MicroMenu               code                                    ; Сегмент кода библиотеки меню
                      00023 ;===================================================================================================
0000                  00024 Table_Action_Complete 
                      00025         mod_PCL symbol_pointer
  0000                    M                 local   Table
0000   08??               M                 movfw   symbol_pointer
0001   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0002   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0003   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0004   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0005   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0006   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0007   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0008                      M         Table
0008   3441 3463 3474 00026         dt              "Action Complete!",0
       3469 346F 346E 
       3420 3443 346F 
       346D 3470 346C 
       3465 3474 3465 
       3421 3400 
                      00027 
0019                  00028 Table_Zastavka_First_String
                      00029         mod_PCL symbol_pointer
  0000                    M                 local   Table
0019   08??               M                 movfw   symbol_pointer
001A   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
001B   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
001C   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
001D   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
001E   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
001F   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0020   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0021                      M         Table
0021   3420 3420 344D 00030         dt              ZASTAVKA_FIRST_STRING,0
       3469 3463 3472 
       346F 344D 3465 
       346E 3475 344C 
       3469 3462 3400 
                      00031 
0030                  00032 Table_Zastavka_Second_String 
                      00033         mod_PCL symbol_pointer
  0000                    M                 local   Table
0030   08??               M                 movfw   symbol_pointer
0031   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0032   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0033   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0034   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0035   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0036   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0037   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0038                      M         Table
0038   3420 3420 3476 00034         dt              ZASTAVKA_SECOND_STRING,0
       3465 3472 3420 
       3431 342E 3430 
       3420 3462 3465 
       3474 3461 3400 
                      00035 ;===================================================================================================
0047                  00036 Num_of_Submenu_Table                                    
                      00037         retlw_num_of_submenu_punkts                     ; Макрос, возвращает количество подпунктов текущ
                            его пункта меню
                          M                                 mod_PCL index_menu
  0000                    M                 local   Table
0047   08??               M                 movfw   index_menu
0048   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0049   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
004A   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
004B   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
004C   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
004D   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
004E   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
004F                      M         Table
  0001                    M                         local   a=1
                          M                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
004F   3403               M                                         retlw   NUM_OF_SUBMENU_PUNKTS_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
0050   3403               M                                         retlw   NUM_OF_SUBMENU_PUNKTS_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
0051   3403               M                                         retlw   NUM_OF_SUBMENU_PUNKTS_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
0052   3403               M                                         retlw   NUM_OF_SUBMENU_PUNKTS_4
Warning[207]: Found label after column 1. (a)
  00000005                M                                         a+=1
0053   3403               M                                         retlw   NUM_OF_SUBMENU_PUNKTS_5
Warning[207]: Found label after column 1. (a)
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000006                M                                         a+=1
                          M                                 endw
                      00038 ;===================================================================================================
0054                  00039 Switch_Menu_Table                                               ; Переходим на нужный пункт меню
                      00040         goto_Punkt_Menu                                         ; Макрос, создает переходы на все пункты
                             меню. Первое GOTO должно находится по адресу 0x100                                             
                          M                                 mod_PCL index_menu
  0000                    M                 local   Table
0054   08??               M                 movfw   index_menu
0055   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0056   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0057   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0058   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0059   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
005A   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
005B   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
005C                      M         Table
  0001                    M                         local   a=1
                          M                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
005C   2???               M                                         goto    Menu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
005D   2???               M                                         goto    Menu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
005E   2???               M                                         goto    Menu_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
005F   2???               M                                         goto    Menu_4
Warning[207]: Found label after column 1. (a)
  00000005                M                                         a+=1
0060   2???               M                                         goto    Menu_5
Warning[207]: Found label after column 1. (a)
  00000006                M                                         a+=1
                          M                                 endw
                      00041 ;---------------------------------------------------------------------------------------------------
0061                  00042 Switch_Submenu_Table                                    ; Переходим на нужный подпункт меню
                      00043         goto_Punkt_Submenu                                      ; Макрос, создает переходы на все подпун
                            кты меню
                          M                                         mod_PCL index_menu                              
  0000                    M                 local   Table
0061   08??               M                 movfw   index_menu
0062   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0063   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0064   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0065   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0066   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0067   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0068   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0069                      M         Table
  0001                    M                         local   c=1
                          M                                 while   c<NUM_OF_MAIN_MENU_PUNKTS+1
0069   2???               M                                         goto    Menu_1_Table
Warning[207]: Found label after column 1. (c)
  00000002                M                                         c+=1
006A   2???               M                                         goto    Menu_2_Table
Warning[207]: Found label after column 1. (c)
  00000003                M                                         c+=1
006B   2???               M                                         goto    Menu_3_Table
Warning[207]: Found label after column 1. (c)
  00000004                M                                         c+=1
006C   2???               M                                         goto    Menu_4_Table
Warning[207]: Found label after column 1. (c)
  00000005                M                                         c+=1
006D   2???               M                                         goto    Menu_5_Table
Warning[207]: Found label after column 1. (c)
  00000006                M                                         c+=1
                          M                                 endw
  0001                    M                         local   d=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_1_Table)
006E                      M                                 Menu_1_Table
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
006E   08??               M                 movfw   index_submenu
006F   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0070   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0071   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0072   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0073   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0074   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0075   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0076                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_1+1
0076   2???               M                                         goto    Menu_1_Submenu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
0077   2???               M                                         goto    Menu_1_Submenu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
0078   2???               M                                         goto    Menu_1_Submenu_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000002                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_2_Table)
0079                      M                                 Menu_2_Table
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
0079   08??               M                 movfw   index_submenu
007A   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
007B   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
007C   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
007D   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
007E   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
007F   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0080   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0081                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_2+1
0081   2???               M                                         goto    Menu_2_Submenu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
0082   2???               M                                         goto    Menu_2_Submenu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
0083   2???               M                                         goto    Menu_2_Submenu_3
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000003                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_3_Table)
0084                      M                                 Menu_3_Table
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
0084   08??               M                 movfw   index_submenu
0085   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0086   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0087   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0088   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0089   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
008A   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
008B   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
008C                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_3+1
008C   2???               M                                         goto    Menu_3_Submenu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
008D   2???               M                                         goto    Menu_3_Submenu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
008E   2???               M                                         goto    Menu_3_Submenu_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000004                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_4_Table)
008F                      M                                 Menu_4_Table
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
008F   08??               M                 movfw   index_submenu
0090   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0091   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0092   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0093   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0094   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0095   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0096   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0097                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_4+1
0097   2???               M                                         goto    Menu_4_Submenu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
0098   2???               M                                         goto    Menu_4_Submenu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
0099   2???               M                                         goto    Menu_4_Submenu_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000005                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_5_Table)
009A                      M                                 Menu_5_Table
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
009A   08??               M                 movfw   index_submenu
009B   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
009C   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
009D   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
009E   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
009F   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00A0   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00A1   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00A2                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_5+1
00A2   2???               M                                         goto    Menu_5_Submenu_1
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00A3   2???               M                                         goto    Menu_5_Submenu_2
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00A4   2???               M                                         goto    Menu_5_Submenu_3
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000006                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 9 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Переходы на подпункты 10 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif           
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00044 ;---------------------------------------------------------------------------------------------------
00A5                  00045 Switch_Action                                                   ; Выполним действие, на котором находитс
                            я курсор 
                      00046         goto_Punkt_Submenu_action                       ; Макрос, создает переходы на действия всех подп
                            унктов меню
                          M                                         mod_PCL index_menu                              
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                    M                 local   Table
00A5   08??               M                 movfw   index_menu
00A6   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00A7   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00A8   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00A9   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00AA   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00AB   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00AC   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00AD                      M         Table
  0001                    M                         local   c=1
                          M                                 while   c<NUM_OF_MAIN_MENU_PUNKTS+1
00AD   2???               M                                         goto    Menu_1_Table_action
Warning[207]: Found label after column 1. (c)
  00000002                M                                         c+=1
00AE   2???               M                                         goto    Menu_2_Table_action
Warning[207]: Found label after column 1. (c)
  00000003                M                                         c+=1
00AF   2???               M                                         goto    Menu_3_Table_action
Warning[207]: Found label after column 1. (c)
  00000004                M                                         c+=1
00B0   2???               M                                         goto    Menu_4_Table_action
Warning[207]: Found label after column 1. (c)
  00000005                M                                         c+=1
00B1   2???               M                                         goto    Menu_5_Table_action
Warning[207]: Found label after column 1. (c)
  00000006                M                                         c+=1
                          M                                 endw
  0001                    M                         local   d=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_1_Table_action)
00B2                      M                                 Menu_1_Table_action
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
00B2   08??               M                 movfw   index_submenu
00B3   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00B4   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00B5   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00B6   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00B7   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00B8   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00B9   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00BA                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_1+1
00BA   2???               M                                         goto    Menu_1_Submenu_1_action
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00BB   2???               M                                         goto    Menu_1_Submenu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00BC   2???               M                                         goto    Menu_1_Submenu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000002                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_2_Table_action)
00BD                      M                                 Menu_2_Table_action
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
00BD   08??               M                 movfw   index_submenu
00BE   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00BF   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00C0   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00C1   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00C2   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00C3   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00C4   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00C5                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_2+1
00C5   2???               M                                         goto    Menu_2_Submenu_1_action
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00C6   2???               M                                         goto    Menu_2_Submenu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00C7   2???               M                                         goto    Menu_2_Submenu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000003                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_3_Table_action)
00C8                      M                                 Menu_3_Table_action
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
00C8   08??               M                 movfw   index_submenu
00C9   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00CA   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00CB   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00CC   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00CD   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00CE   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00CF   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00D0                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_3+1
00D0   2???               M                                         goto    Menu_3_Submenu_1_action
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00D1   2???               M                                         goto    Menu_3_Submenu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00D2   2???               M                                         goto    Menu_3_Submenu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000004                M                                         d+=1
                          M                                 endif
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_4_Table_action)
00D3                      M                                 Menu_4_Table_action
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
00D3   08??               M                 movfw   index_submenu
00D4   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00D5   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00D6   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00D7   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00D8   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00D9   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00DA   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00DB                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_4+1
00DB   2???               M                                         goto    Menu_4_Submenu_1_action
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00DC   2???               M                                         goto    Menu_4_Submenu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00DD   2???               M                                         goto    Menu_4_Submenu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000005                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
Warning[207]: Found label after column 1. (Menu_5_Table_action)
00DE                      M                                 Menu_5_Table_action
                          M                                         mod_PCL index_submenu
  0000                    M                 local   Table
00DE   08??               M                 movfw   index_submenu
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DF   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00E0   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00E1   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00E2   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00E3   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00E4   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00E5   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00E6                      M         Table
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_5+1
00E6   2???               M                                         goto    Menu_5_Submenu_1_action
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
00E7   2???               M                                         goto    Menu_5_Submenu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
00E8   2???               M                                         goto    Menu_5_Submenu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000006                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table_action
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4_action
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table_action
                          M                                         mod_PCL index_submenu
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4_action
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table_action
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4_action
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 9 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table_action
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4_action
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Действия подпунктов 10 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 Menu_6_Table_action
                          M                                         mod_PCL index_submenu
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         goto    Menu_6_Submenu_4_action
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00047 ;===================================================================================================
                      00048         Create_Menu_Names                                       ; Макрос, создает имена всех пунктов мен
                            ю
  0001                    M                         local   a=1
                          M                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (Menu_1)
00E9                      M                                 Menu_1
                          M                                         mod_PCL symbol_pointer
  0000                    M                 local   Table
00E9   08??               M                 movfw   symbol_pointer
00EA   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00EB   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00EC   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00ED   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00EE   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
00EF   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
00F0   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
00F1                      M         Table
00F1   3431 342E 344D     M                                         dt              MENU_NAME_1,0
       3465 346E 3475 
       345F 3431 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_2)
00FA                      M                                 Menu_2
                          M                                         mod_PCL symbol_pointer
  0000                    M                 local   Table
00FA   08??               M                 movfw   symbol_pointer
00FB   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
00FC   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
00FD   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
00FE   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
00FF   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0100   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0101   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0102                      M         Table
0102   3432 342E 344D     M                                         dt              MENU_NAME_2,0
       3465 346E 3475 
       345F 3432 3400 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_3)
010B                      M                                 Menu_3
                          M                                         mod_PCL symbol_pointer
  0000                    M                 local   Table
010B   08??               M                 movfw   symbol_pointer
010C   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
010D   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
010E   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
010F   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0110   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0111   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0112   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0113                      M         Table
0113   3433 342E 344D     M                                         dt              MENU_NAME_3,0
       3465 346E 3475 
       345F 3433 3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_4)
011C                      M                                 Menu_4
                          M                                         mod_PCL symbol_pointer
  0000                    M                 local   Table
011C   08??               M                 movfw   symbol_pointer
011D   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
011E   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
011F   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0120   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0121   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0122   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0123   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0124                      M         Table
0124   3434 342E 344D     M                                         dt              MENU_NAME_4,0
       3465 346E 3475 
       345F 3434 3400 
Warning[207]: Found label after column 1. (a)
  00000005                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_5)
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012D                      M                                 Menu_5
                          M                                         mod_PCL symbol_pointer
  0000                    M                 local   Table
012D   08??               M                 movfw   symbol_pointer
012E   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
012F   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0130   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0131   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0132   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0133   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0134   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0135                      M         Table
0135   3435 342E 344D     M                                         dt              MENU_NAME_5,0
       3465 346E 3475 
       345F 3435 3400 
Warning[207]: Found label after column 1. (a)
  00000006                M                                         a+=1
                          M                                 endw
                      00049 ;===================================================================================================
                      00050         Create_Submenu_Names                            ; Макрос, создает имена всех подпунктов меню
  0001                    M                                 local   d=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_1+1
Warning[207]: Found label after column 1. (Menu_1_Submenu_1)
013E                      M                                         Menu_1_Submenu_1
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
013E   08??               M                 movfw   symbol_pointer
013F   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0140   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0141   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0142   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0143   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0144   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0145   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0146                      M         Table
0146   3431 342E 3431     M                                                 dt              MENU_SUBMENU_NAME_1_1,0
       342E 3447 3461 
       3472 3461 3467 
       3465 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_1_Submenu_2)
0151                      M                                         Menu_1_Submenu_2
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
0151   08??               M                 movfw   symbol_pointer
0152   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0153   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0154   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0155   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0156   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0157   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0158   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0159                      M         Table
0159   3431 342E 3432     M                                                 dt              MENU_SUBMENU_NAME_1_2,0
       342E 3444 346F 
       346F 3472 3473 
       3400 
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_1_Submenu_3)
0163                      M                                         Menu_1_Submenu_3
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
0163   08??               M                 movfw   symbol_pointer
0164   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0165   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0166   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0167   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0168   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0169   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
016A   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (Table)
016B                      M         Table
016B   3431 342E 3433     M                                                 dt              MENU_SUBMENU_NAME_1_3,0
       342E 3448 346F 
       3475 3473 3465 
       3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000002                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_2+1
Warning[207]: Found label after column 1. (Menu_2_Submenu_1)
0175                      M                                         Menu_2_Submenu_1
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
0175   08??               M                 movfw   symbol_pointer
0176   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0177   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0178   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0179   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
017A   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
017B   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
017C   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
017D                      M         Table
017D   3432 342E 3431     M                                                 dt              MENU_SUBMENU_NAME_2_1,0
       342E 3447 3461 
       3472 3461 3467 
       3465 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_2_Submenu_2)
0188                      M                                         Menu_2_Submenu_2
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
0188   08??               M                 movfw   symbol_pointer
0189   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
018A   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         if      USE_SHORT_MOD_PCL
018B   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
018C   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
018D   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
018E   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
018F   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0190                      M         Table
0190   3432 342E 3432     M                                                 dt              MENU_SUBMENU_NAME_2_2,0
       342E 3444 346F 
       346F 3472 3473 
       3400 
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_2_Submenu_3)
019A                      M                                         Menu_2_Submenu_3
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
019A   08??               M                 movfw   symbol_pointer
019B   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
019C   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
019D   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
019E   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
019F   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01A0   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01A1   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01A2                      M         Table
01A2   3432 342E 3433     M                                                 dt              MENU_SUBMENU_NAME_2_3,0
       342E 3448 346F 
       3475 3473 3465 
       3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000003                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_3+1
Warning[207]: Found label after column 1. (Menu_3_Submenu_1)
01AC                      M                                         Menu_3_Submenu_1
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
01AC   08??               M                 movfw   symbol_pointer
01AD   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
01AE   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
01AF   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
01B0   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
01B1   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01B2   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01B3   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01B4                      M         Table
01B4   3433 342E 3431     M                                                 dt              MENU_SUBMENU_NAME_3_1,0
       342E 3452 3465 
       3476 3469 3465 
       3477 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_3_Submenu_2)
01BF                      M                                         Menu_3_Submenu_2
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
01BF   08??               M                 movfw   symbol_pointer
01C0   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
01C1   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
01C2   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
01C3   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
01C4   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01C5   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01C6   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01C7                      M         Table
01C7   3433 342E 3432     M                                                 dt              MENU_SUBMENU_NAME_3_2,0
       342E 3453 3468 
       3475 3474 3420 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       344F 3466 3466 
       3400 
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_3_Submenu_3)
01D4                      M                                         Menu_3_Submenu_3
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
01D4   08??               M                 movfw   symbol_pointer
01D5   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
01D6   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
01D7   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
01D8   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
01D9   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01DA   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01DB   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01DC                      M         Table
01DC   3433 342E 3433     M                                                 dt              MENU_SUBMENU_NAME_3_3,0
       342E 3446 3441 
       3451 3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000004                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_4+1
Warning[207]: Found label after column 1. (Menu_4_Submenu_1)
01E4                      M                                         Menu_4_Submenu_1
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
01E4   08??               M                 movfw   symbol_pointer
01E5   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
01E6   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
01E7   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
01E8   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
01E9   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01EA   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01EB   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01EC                      M         Table
01EC   3434 342E 3431     M                                                 dt              MENU_SUBMENU_NAME_4_1,0
       342E 3452 3465 
       3476 3469 3465 
       3477 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_4_Submenu_2)
01F7                      M                                         Menu_4_Submenu_2
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
01F7   08??               M                 movfw   symbol_pointer
01F8   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
01F9   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
01FA   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
01FB   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
01FC   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
01FD   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
01FE   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
01FF                      M         Table
01FF   3434 342E 3432     M                                                 dt              MENU_SUBMENU_NAME_4_2,0
       342E 3453 3468 
       3475 3474 3420 
       344F 3466 3466 
       3400 
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_4_Submenu_3)
020C                      M                                         Menu_4_Submenu_3
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
020C   08??               M                 movfw   symbol_pointer
020D   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
020E   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
020F   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0210   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0211   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0212   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0213   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0214                      M         Table
0214   3434 342E 3433     M                                                 dt              MENU_SUBMENU_NAME_4_3,0
       342E 3446 3441 
       3451 3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
  00000005                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_5+1
Warning[207]: Found label after column 1. (Menu_5_Submenu_1)
021C                      M                                         Menu_5_Submenu_1
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
021C   08??               M                 movfw   symbol_pointer
021D   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
021E   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
021F   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0220   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0221   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0222   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0223   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0224                      M         Table
0224   3435 342E 3431     M                                                 dt              MENU_SUBMENU_NAME_5_1,0
       342E 3443 346F 
       346E 3466 3469 
       3467 3400 
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_5_Submenu_2)
022F                      M                                         Menu_5_Submenu_2
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
022F   08??               M                 movfw   symbol_pointer
0230   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0231   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0232   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0233   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0234   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
0235   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
0236   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
0237                      M         Table
0237   3435 342E 3432     M                                                 dt              MENU_SUBMENU_NAME_5_2,0
       342E 3453 3465 
       3474 3474 3469 
       346E 3467 3473 
       3400 
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
Warning[207]: Found label after column 1. (Menu_5_Submenu_3)
0244                      M                                         Menu_5_Submenu_3
                          M                                                 mod_PCL symbol_pointer
  0000                    M                 local   Table
0244   08??               M                 movfw   symbol_pointer
0245   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0246   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0247   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
0248   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
0249   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
024A   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
024B   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
024C                      M         Table
024C   3435 342E 3433     M                                                 dt              MENU_SUBMENU_NAME_5_3,0
       342E 3441 3462 
       346F 3475 3474 
       3400 
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
                          M                                 endw
Warning[207]: Found label after column 1. (d)
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000006                M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         Menu_6_Submenu_4
                          M                                                 mod_PCL symbol_pointer
                          M                                                 dt              MENU_SUBMENU_NAME_6_4,0
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         Menu_6_Submenu_4
                          M                                                 mod_PCL symbol_pointer
                          M                                                 dt              MENU_SUBMENU_NAME_7_4,0
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         Menu_6_Submenu_4
                          M                                                 mod_PCL symbol_pointer
                          M                                                 dt              MENU_SUBMENU_NAME_8_4,0
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 9 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                                 mod_PCL symbol_pointer
                          M                                                 dt              MENU_SUBMENU_NAME_9_4,0
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 10 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 if              d<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 local   a=1     
                          M                                 while   a<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         Menu_6_Submenu_4
                          M                                                 mod_PCL symbol_pointer
                          M                                                 dt              MENU_SUBMENU_NAME_10_4,0
                          M                                         a+=1
                          M                                 endw
                          M                                         d+=1
                          M                                 endif
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00051 ;===================================================================================================
Warning[205]: Found directive in column 1. (if)
                      00052 if      USE_MENU_ACTION
0256                  00053 Menu_Action
                      00054         goto_Menu_action
                          M                                         mod_PCL index_menu                              
  0000                    M                 local   Table
0256   08??               M                 movfw   index_menu
0257   3E??               M                 addlw   low Table               ; Добавить 8 младших бит адреса таблицы к смещению
0258   00??               M                 movwf   offset                  ; Сохранить младшие 8 бит требуемого адреса
                          M         if      USE_SHORT_MOD_PCL
0259   0D??               M                 rlf             known_zero,w    ; так сохраняют бит переполнения от сложения 
025A   3E??               M                 addlw   high Table              ; Загрузить 5 старших бит адреса
                          M         else
                          M                 movlw   high Table              ; Загрузить 5 старших бит адреса
                          M                 btfsc   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 addlw   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         endif
025B   008A               M                 movwf   PCLATH                  ; Установить старшую часть адреса
025C   08??               M                 movfw   offset                  ; Загрузить рассчитанное значание младшей части адреса
025D   0082               M                 movwf   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (Table)
025E                      M         Table
  0001                    M                                         local   a=1
                          M                                 while   a<NUM_OF_MAIN_MENU_PUNKTS+1
025E   2???               M                                         goto    Menu_1_action
Warning[207]: Found label after column 1. (a)
  00000002                M                                         a+=1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

025F   2???               M                                         goto    Menu_2_action
Warning[207]: Found label after column 1. (a)
  00000003                M                                         a+=1
0260   2???               M                                         goto    Menu_3_action
Warning[207]: Found label after column 1. (a)
  00000004                M                                         a+=1
0261   2???               M                                         goto    Menu_4_action
Warning[207]: Found label after column 1. (a)
  00000005                M                                         a+=1
0262   2???               M                                         goto    Menu_5_action
Warning[207]: Found label after column 1. (a)
  00000006                M                                         a+=1
                          M                                 endw
                      00055 ;===================================================================================================
0263                  00056 Menu_1_action                                                   ; Выполняем действие 1 пункта меню
                      00057 ;       nop
0263   2???           00058         goto    End_Menu_Action
0264                  00059 Menu_2_action                                                   ; Выполняем действие 2 пункта меню
                      00060 ;       nop
0264   2???           00061         goto    End_Menu_Action
0265                  00062 Menu_3_action                                                   ; Выполняем действие 3 пункта меню
                      00063 ;       nop
0265   2???           00064         goto    End_Menu_Action
0266                  00065 Menu_4_action                                                   ; Выполняем действие 4 пункта меню
                      00066 ;       nop
0266   2???           00067         goto    End_Menu_Action
0267                  00068 Menu_5_action                                                   ; Выполняем действие 5 пункта меню
                      00069 ;       nop
0267   2???           00070         goto    End_Menu_Action
Warning[205]: Found directive in column 1. (endif)
                      00071 endif
                      00072 ;===================================================================================================
0268                  00073 Menu_1_Submenu_1_action                                 ; Выполняем действие 1 подпункта 1 пункта
                      00074 ;       nop
0268   2???           00075         goto    End_Action
0269                  00076 Menu_1_Submenu_2_action                                 ; Выполняем действие 2 подпункта 1 пункта
                      00077 ;       nop
0269   2???           00078         goto    End_Action
026A                  00079 Menu_1_Submenu_3_action                                 ; Выполняем действие 3 подпункта 1 пункта
                      00080 ;       nop
026A   2???           00081         goto    End_Action
                      00082 ;---------------------------------------------------------------------------------------------------
026B                  00083 Menu_2_Submenu_1_action                                 ; Выполняем действие 1 подпункта 2 пункта
                      00084 ;       nop
026B   2???           00085         goto    End_Action
026C                  00086 Menu_2_Submenu_2_action                                 ; Выполняем действие 2 подпункта 2 пункта
                      00087 ;       nop
026C   2???           00088         goto    End_Action
026D                  00089 Menu_2_Submenu_3_action                                 ; Выполняем действие 3 подпункта 2 пункта
                      00090 ;       nop
026D   2???           00091         goto    End_Action
                      00092 ;---------------------------------------------------------------------------------------------------
026E                  00093 Menu_3_Submenu_1_action                                 ; Выполняем действие 1 подпункта 3 пункта
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00094 ;       nop
026E   2???           00095         goto    End_Action
026F                  00096 Menu_3_Submenu_2_action                                 ; Выполняем действие 2 подпункта 3 пункта
                      00097 ;       nop
026F   2???           00098         goto    End_Action
0270                  00099 Menu_3_Submenu_3_action                                 ; Выполняем действие 3 подпункта 3 пункта
                      00100 ;       nop
0270   2???           00101         goto    End_Action
                      00102 ;---------------------------------------------------------------------------------------------------
0271                  00103 Menu_4_Submenu_1_action                                 ; Выполняем действие 1 подпункта 4 пункта
                      00104 ;       nop
0271   2???           00105         goto    End_Action
0272                  00106 Menu_4_Submenu_2_action                                 ; Выполняем действие 2 подпункта 4 пункта
                      00107 ;       nop
0272   2???           00108         goto    End_Action
0273                  00109 Menu_4_Submenu_3_action                                 ; Выполняем действие 3 подпункта 4 пункта
                      00110 ;       nop
0273   2???           00111         goto    End_Action                                                              
                      00112 ;---------------------------------------------------------------------------------------------------
0274                  00113 Menu_5_Submenu_1_action                                 ; Выполняем действие 1 подпункта 5 пункта
                      00114 ;       nop
0274   2???           00115         goto    End_Action
0275                  00116 Menu_5_Submenu_2_action                                 ; Выполняем действие 2 подпункта 5 пункта
                      00117 ;       nop
0275   2???           00118         goto    End_Action
0276                  00119 Menu_5_Submenu_3_action                                 ; Выполняем действие 3 подпункта 5 пункта
                      00120 ;       nop
0276   2???           00121         goto    End_Action                      
                      00122 ;===================================================================================================
0277                  00123 CLR_Display_routine                                             ; Подпрограмма очистки дисплея
0277   3001           00124         movlw   CLR_DISP
0278   2???           00125         call    Send_LCD_Command
0279   2???           00126         call    Delay_4ms                                       ; Обязательная задержка после очистки ди
                            сплея !!!
027A   0008           00127         return
                      00128 ;===================================================================================================
027B                  00129 Second_String_routine                                   ; Подпрограмма перевода указателя на 2-ю строку 
Warning[205]: Found directive in column 1. (if)
                      00130 if      USE_CURSOR
                      00131         movlw   b'10001111'                                     ; Установим курсор на последний символ 1
                            -й строки
                      00132         call    Send_LCD_Command
                      00133         movlw   '<'                                                     ; И нарисуем там указатель текущ
                            его пункта меню
                      00134         call    Send_LCD_Symbol
                      00135 endif
027B   30C0           00136         movlw   SECOND_LINE                                     ; Переводим указатель на 2-ю строку     
027C   2???           00137         call    Send_LCD_Command
027D   0008           00138         return                                                          ; И приступаем к отрисовке следу
                            ющего пункта меню
                      00139 ;===================================================================================================
027E                  00140 Switch_Menu_routine                                             ; Подпрограмма вывода названия пункта ме
                            ню на дисплей
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

027E   01??           00141         clrf    symbol_pointer
027F                  00142 String_Menu
027F   2???           00143         call    Switch_Menu_Table
0280   39FF           00144         andlw   0FFh
0281   1903           00145         btfsc   STATUS,Z
0282   0008           00146         return 
0283   2???           00147         call    Send_LCD_Symbol
Message[305]: Using default destination of 1 (file).
0284   0A??           00148         incf    symbol_pointer  
0285   2???           00149         goto    String_Menu
                      00150 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
0286                  00151 Switch_Submenu_routine                                  ; Подпрограмма вывода названия подпункта меню на
                             дисплей
0286   01??           00152         clrf    symbol_pointer
0287                  00153 String_Submenu
0287   2???           00154         call    Switch_Submenu_Table
0288   39FF           00155         andlw   0FFh
0289   1903           00156         btfsc   STATUS,Z
028A   0008           00157         return 
028B   2???           00158         call    Send_LCD_Symbol
Message[305]: Using default destination of 1 (file).
028C   0A??           00159         incf    symbol_pointer  
028D   2???           00160         goto    String_Submenu
                      00161 ;===================================================================================================
028E                  00162 Menu_heandler                                                   ; Обработчик меню
028E   01??           00163         clrf    index_menu                                      ; Была нажатая какая-то кнопка, очистим 
                            индекс пункта меню                                      
                      00164 
Warning[205]: Found directive in column 1. (if)
                      00165 if      USE_MOVING_CURSOR       &       !USE_TOP_LAST_CURSOR
                      00166         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00167         andwf   flags                                           
                      00168         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00169 endif
                      00170 
028F                  00171 Switch_Menu                                                             ; Поместим курсор на нужный пунк
                            т меню                                                  
                      00172 
Warning[205]: Found directive in column 1. (if)
                      00173 if      USE_MOVING_CURSOR       &       USE_TOP_LAST_CURSOR
028F   08??           00174         movfw   index_menu
0290   1D03           00175         btfss   STATUS,Z
0291   2???           00176         goto    Check_1         
0292   30F0           00177         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0293   05??           00178         andwf   flags   
0294   1400           00179         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
0295   2???           00180         goto    Skip_Check_1
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0296                  00181 Check_1
0296   3C04           00182         sublw   NUM_OF_MAIN_MENU_PUNKTS-1       ; Сравниваем с количеством пунктов меню
0297   1D03           00183         btfss   STATUS,Z        
0298   2???           00184         goto    Skip_Check_1    
0299   30F0           00185         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
029A   05??           00186         andwf   flags
029B   1480           00187         bsf             Press_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
029C                  00188 Skip_Check_1
Warning[205]: Found directive in column 1. (endif)
                      00189 endif
                      00190 
029C   2???           00191         call    CLR_Display_routine                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
                      00192 
Warning[205]: Found directive in column 1. (if)
                      00193 if      USE_MOVING_CURSOR
029D   1C00           00194         btfss   Press_UP
029E   2???           00195         goto    Pressing_DOWN                   
029F   2???           00196         call    Switch_Menu_routine                     ; Рисуем текущий пункт меню     
02A0   308F           00197         movlw   b'10001111'                                     ; Установим курсор на последний символ 1
                            -й строки       
02A1   2???           00198         call    Send_LCD_Command
02A2   303C           00199         movlw   '<'                                                     ; И нарисуем там указатель текущ
                            его пункта меню
02A3   2???           00200         call    Send_LCD_Symbol
02A4   2???           00201         call    Second_String_routine           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
02A5   0A??           00202         incf    index_menu                                      ; Берем следующий пункт
02A6   08??           00203         movfw   index_menu      
02A7   3C05           00204         sublw   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
02A8   1903           00205         btfsc   STATUS,Z
02A9   2???           00206         goto    Correct_index_menu                      
02AA   2???           00207         call    Switch_Menu_routine                     ; Рисуем пункт меню под текущим 
Message[305]: Using default destination of 1 (file).
02AB   03??           00208         decf    index_menu                                      ; Не забудем вернуть назад текущий пункт
                             меню   
02AC   2???           00209         goto    Skip_Correct_index_menu_3
02AD                  00210 Correct_index_menu                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
02AD   01??           00211         clrf    index_menu
02AE   2???           00212         call    Switch_Menu_routine
02AF   3004           00213         movlw   NUM_OF_MAIN_MENU_PUNKTS-1
02B0   00??           00214         movwf   index_menu      
02B1   2???           00215         goto    Skip_Correct_index_menu_3
                      00216 
02B2                  00217 Pressing_DOWN
Message[305]: Using default destination of 1 (file).
02B2   03??           00218         decf    index_menu                                      ; Берем предыдущий пункт меню
02B3   1B80           00219         btfsc   index_menu,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02B4   2???           00220         goto    Correct_index_menu_2
02B5   2???           00221         call    Switch_Menu_routine                     ; Рисуем предыдущий пункт меню
02B6   2???           00222         call    Second_String_routine           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
02B7   0A??           00223         incf    index_menu                                      ; Вернем текущий пункт                  
                                            
02B8   08??           00224         movfw   index_menu      
02B9   2???           00225         goto    Skip_Correct_index_menu_2
02BA                  00226 Correct_index_menu_2
02BA   3004           00227         movlw   NUM_OF_MAIN_MENU_PUNKTS-1
02BB   00??           00228         movwf   index_menu
02BC   2???           00229         call    Switch_Menu_routine                     ; Рисуем предыдущий пункт меню
02BD   2???           00230         call    Second_String_routine           ; Указатель на 2 строку
02BE   01??           00231         clrf    index_menu
02BF                  00232 Skip_Correct_index_menu_2
02BF   2???           00233         call    Switch_Menu_routine                     ; Рисуем текущий пункт меню под предыдущим 
02C0   30CF           00234         movlw   b'11001111'                                     ; Установим курсор на последний символ 2
                            -й строки
02C1   2???           00235         call    Send_LCD_Command
02C2   303C           00236         movlw   '<'                                                     ; И нарисуем там указатель текущ
                            его пункта меню
02C3   2???           00237         call    Send_LCD_Symbol
02C4                  00238 Skip_Correct_index_menu_3
                      00239 
Warning[205]: Found directive in column 1. (else)
                      00240 else
                      00241         call    Switch_Menu_routine                     ; Рисуем текущий пункт меню
                      00242         call    Second_String_routine           ; Указатель на 2 строку
                      00243         incf    index_menu                                      ; Берем следующий пункт
                      00244         movfw   index_menu      
                      00245         sublw   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
                      00246         btfsc   STATUS,Z
                      00247         goto    Correct_index_menu                      
                      00248         call    Switch_Menu_routine                     ; Рисуем пункт меню под текущим 
                      00249         decf    index_menu                                      ; Не забудем вернуть назад текущий пункт
                             меню   
                      00250         goto    Skip_Correct_index_menu
                      00251 Correct_index_menu                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
                      00252         clrf    index_menu
                      00253         call    Switch_Menu_routine
                      00254         movlw   NUM_OF_MAIN_MENU_PUNKTS-1
                      00255         movwf   index_menu      
                      00256 Skip_Correct_index_menu
                      00257 endif
                      00258 
02C4   2???           00259         call    Debounce_Delay                          ; Процедура антидребезга, вызывается при первом 
                            входе в меню, при нажатии кнопок "Вверх", "Вниз", выходе из подпункта меню
                      00260 
Warning[205]: Found directive in column 1. (if)
                      00261 if      USE_RBIE
02C5   30F0           00262         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
02C6   05??           00263         andwf   flags   
02C7   100B           00264         bcf             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания от кнопок
02C8   158B           00265         bsf             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
Warning[205]: Found directive in column 1. (endif)
                      00266 endif
                      00267 
02C9   3014           00268         movlw   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
02CA   00??           00269         movwf   menu_counter
02CB   01??           00270         clrf    temp_1
02CC   01??           00271         clrf    temp_2
02CD                  00272 Loop_Menu                                                               ; Вычисляем нажатую клавишу
                      00273 
Warning[205]: Found directive in column 1. (if)
                      00274 if      USE_RBIE
02CD   1800           00275         btfsc   Press_UP
02CE   2???           00276         goto    Cursor_UP_menu                          
02CF   1880           00277         btfsc   Press_DOWN
02D0   2???           00278         goto    Cursor_DOWN_menu
02D1   1980           00279         btfsc   Press_ENTER
02D2   2???           00280         goto    ENTER_menu
02D3   1900           00281         btfsc   Press_EXIT
02D4   2???           00282         goto    EXIT_menu
Warning[205]: Found directive in column 1. (else)
                      00283 else
                      00284         btfss   UP
                      00285         goto    Cursor_UP_menu                          
                      00286         btfss   DOWN
                      00287         goto    Cursor_DOWN_menu
                      00288         btfss   ENTER
                      00289         goto    ENTER_menu
                      00290         btfss   EXIT
                      00291         goto    EXIT_menu
                      00292 endif
                      00293 ;-----------------------------------------------------------------                                      
                                                                    
Message[305]: Using default destination of 1 (file).
02D5   0B??           00294         decfsz  temp_1                                          ; Ни одна клавиша не нажата             
                                                            
02D6   2???           00295         goto    Loop_Menu                                       ; Цикл ожидания нажатия в главном меню  
Message[305]: Using default destination of 1 (file).
02D7   0B??           00296         decfsz  temp_2  
02D8   2???           00297         goto    Loop_Menu
Message[305]: Using default destination of 1 (file).
02D9   0B??           00298         decfsz  menu_counter                            ; Декремент счетчика проходов опроса клавиш     
02DA   2???           00299         goto    Loop_Menu
02DB   2???           00300         goto    Zastavka                                        ; Вышел таймаут нахождения в меню, выход
                            им в заставку   
                      00301 ;-----------------------------------------------------------------
02DC                  00302 Cursor_UP_menu                                                  ; Была нажата клавиша "Вверх"
                      00303 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (if)
                      00304 if      USE_MOVING_CURSOR       &       !USE_RBIE
                      00305         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00306         andwf   flags                                           
                      00307         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00308 endif
                      00309 
Message[305]: Using default destination of 1 (file).
02DC   03??           00310         decf    index_menu                                      ; Берем предыдущий пункт меню
02DD   1F80           00311         btfss   index_menu,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
02DE   2???           00312         goto    Switch_Menu
02DF   3004           00313         movlw   NUM_OF_MAIN_MENU_PUNKTS-1       ; Стало "<0", сделаем текущим последний пункт меню. Учит
                            ываем, что индекс пункта меню на 1 меньше его порядкового номера
02E0   00??           00314         movwf   index_menu
02E1   2???           00315         goto    Switch_Menu                                     ; Отрисовываем новый текущий пункт меню
                      00316 ;-----------------------------------------------------------------
02E2                  00317 Cursor_DOWN_menu                                                ; Была нажата клавиша "Вниз"
                      00318 
Warning[205]: Found directive in column 1. (if)
                      00319 if      USE_MOVING_CURSOR       &       !USE_RBIE
                      00320         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00321         andwf   flags                                           
                      00322         bsf             Press_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00323 endif
                      00324 
Message[305]: Using default destination of 1 (file).
02E2   0A??           00325         incf    index_menu                                      ; Берем следущий пункт меню
02E3   08??           00326         movfw   index_menu
02E4   3C05           00327         sublw   NUM_OF_MAIN_MENU_PUNKTS         ; Достигли последнего ?
02E5   1903           00328         btfsc   STATUS,Z
02E6   01??           00329         clrf    index_menu                                      ; Если да, делаем текущим первый пункт м
                            еню     
02E7   2???           00330         goto    Switch_Menu                                     ; Отрисовываем новый текущий пункт меню
                      00331 ;-----------------------------------------------------------------
02E8                  00332 EXIT_menu                                                               ; Была нажата клавиша "Выход"
                      00333 
Warning[205]: Found directive in column 1. (if)
                      00334 if      USE_RBIE
02E8   30F0           00335         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
02E9   05??           00336         andwf   flags   
02EA   100B           00337         bcf             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
02EB   158B           00338         bsf             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
Warning[205]: Found directive in column 1. (else)
                      00339 else
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00340         call    Debounce_Delay  
                      00341 endif
02EC   2???           00342         goto    Zastavka                                        ; Выходим в заставку
                      00343 ;-----------------------------------------------------------------
02ED                  00344 ENTER_menu                                                              ; Была нажата клавиша "Вход"
                      00345 
Warning[205]: Found directive in column 1. (if)
                      00346 if      USE_MENU_ACTION         
02ED   08??           00347         movfw   index_menu                                      ; Берем текущий пункт меню
02EE   00??           00348         movwf   temp_1                                          ; Заносим в счетчик
Message[305]: Using default destination of 1 (file).
02EF   0A??           00349         incf    temp_1                                          ; Учитываем, что нумерация начинается с 
                            0
02F0   3001           00350         movlw   actions_menu_flags                      ; Берем флаги действий пунктов меню
02F1   00??           00351         movwf   temp_2                                          ; И заносим в переменную
02F2                  00352 Loop_1
Message[305]: Using default destination of 1 (file).
02F2   0B??           00353         decfsz  temp_1
02F3   2???           00354         goto    Rotate_action_menu_flags
02F4   1803           00355         btfsc   STATUS,C                                        ; Флаг действия текущего пункта меню выд
                            авлен в бит переноса, анализируем его
02F5   2???           00356         goto    Menu_Action                                     ; У текущего пункта меню есть действие, 
                            выполняем его
02F6   2???           00357         goto    End_Menu_Action
02F7                  00358 Rotate_action_menu_flags
Message[305]: Using default destination of 1 (file).
02F7   0C??           00359         rrf             temp_2                                          ; Перебор флагов действий всех п
                            унктов меню
02F8   2???           00360         goto    Loop_1  
02F9                  00361 End_Menu_Action
Warning[205]: Found directive in column 1. (endif)
                      00362 endif
                      00363 
02F9   01??           00364         clrf    index_submenu                           ; Очистим индекс пункта подменю 
                      00365 
Warning[205]: Found directive in column 1. (if)
                      00366 if      USE_MOVING_CURSOR       &       !USE_TOP_LAST_CURSOR
                      00367         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00368         andwf   flags                                           
                      00369         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00370 endif
                      00371 
02FA                  00372 Switch_Submenu                                                  ; Поместим курсор на нужный подпункт нуж
                            ного пункта
                      00373 
Warning[205]: Found directive in column 1. (if)
                      00374 if      USE_MOVING_CURSOR       &       USE_TOP_LAST_CURSOR
02FA   08??           00375         movfw   index_submenu
02FB   1D03           00376         btfss   STATUS,Z
02FC   2???           00377         goto    Check_2         
02FD   30F0           00378         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            к                                       
Message[305]: Using default destination of 1 (file).
02FE   05??           00379         andwf   flags   
02FF   1400           00380         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
0300   2???           00381         goto    Skip_Check_2
0301                  00382 Check_2
0301   2???           00383         call    Num_of_Submenu_Table                    
0302   00??           00384         movwf   temp_1  
0303   03??           00385         decf    temp_1, w                                       ; Учитываем, что индекс подпункта начина
                            ется с 0
0304   02??           00386         subwf   index_submenu,w                         ; Сравниваем с количеством подпунктов меню
0305   1D03           00387         btfss   STATUS,Z        
0306   2???           00388         goto    Skip_Check_2    
0307   30F0           00389         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0308   05??           00390         andwf   flags
0309   1480           00391         bsf             Press_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
030A                  00392 Skip_Check_2
Warning[205]: Found directive in column 1. (endif)
                      00393 endif
                      00394 
030A   2???           00395         call    CLR_Display_routine                     ; Очистим дисплей перед самой перерисовкой подпу
                            нктов меню, чтобы уменьшить моргание
                      00396 
Warning[205]: Found directive in column 1. (if)
                      00397 if      USE_MOVING_CURSOR
030B   1C00           00398         btfss   Press_UP
030C   2???           00399         goto    Pressing_DOWN_2                 
030D   2???           00400         call    Switch_Submenu_routine          ; Рисуем текущий подпункт меню  
030E   308F           00401         movlw   b'10001111'                                     ; Установим курсор на последний символ 1
                            -й строки       
030F   2???           00402         call    Send_LCD_Command
0310   303C           00403         movlw   '<'                                                     ; И нарисуем там указатель текущ
                            его пункта меню
0311   2???           00404         call    Send_LCD_Symbol
0312   2???           00405         call    Second_String_routine           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0313   0A??           00406         incf    index_submenu                           ; Берем следующий пункт
0314   2???           00407         call    Num_of_Submenu_Table                    
0315   02??           00408         subwf   index_submenu,w                         ; Сравниваем с количеством подпунктов меню
0316   1903           00409         btfsc   STATUS,Z
0317   2???           00410         goto    Correct_index_submenu                   
0318   2???           00411         call    Switch_Submenu_routine          ; Рисуем подпункт меню под текущим 
Message[305]: Using default destination of 1 (file).
0319   03??           00412         decf    index_submenu                           ; Не забудем вернуть назад текущий пункт меню   
031A   2???           00413         goto    Skip_Correct_index_submenu_3
031B                  00414 Correct_index_submenu                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
031B   01??           00415         clrf    index_submenu
031C   2???           00416         call    Switch_Submenu_routine
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

031D   2???           00417         call    Num_of_Submenu_Table
031E   00??           00418         movwf   index_submenu
Message[305]: Using default destination of 1 (file).
031F   03??           00419         decf    index_submenu                           ; Учитываем, что индекс подпункта начинается с 0
                                    
0320   2???           00420         goto    Skip_Correct_index_submenu_3
                      00421 
0321                  00422 Pressing_DOWN_2
Message[305]: Using default destination of 1 (file).
0321   03??           00423         decf    index_submenu                           ; Берем предыдущий пункт меню
0322   1B80           00424         btfsc   index_submenu,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
0323   2???           00425         goto    Correct_index_submenu_2
0324   2???           00426         call    Switch_Submenu_routine          ; Рисуем предыдущий пункт меню
0325   2???           00427         call    Second_String_routine           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0326   0A??           00428         incf    index_submenu                           ; Вернем текущий пункт                          
                                    
0327   08??           00429         movfw   index_submenu   
0328   2???           00430         goto    Skip_Correct_index_submenu_2
0329                  00431 Correct_index_submenu_2
0329   2???           00432         call    Num_of_Submenu_Table            ; Стало "<0", возвращаем количество пунктов в даном подм
                            еню     
032A   00??           00433         movwf   index_submenu                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
032B   03??           00434         decf    index_submenu                           ; Учитываем, что индекс пункта подменю на 1 мень
                            ше его порядкового номера
032C   2???           00435         call    Switch_Submenu_routine          ; Рисуем предыдущий пункт меню
032D   2???           00436         call    Second_String_routine           ; Указатель на 2 строку
032E   01??           00437         clrf    index_submenu
032F                  00438 Skip_Correct_index_submenu_2
032F   2???           00439         call    Switch_Submenu_routine          ; Рисуем текущий пункт меню под предыдущим 
0330   30CF           00440         movlw   b'11001111'                                     ; Установим курсор на последний символ 2
                            -й строки
0331   2???           00441         call    Send_LCD_Command
0332   303C           00442         movlw   '<'                                                     ; И нарисуем там указатель текущ
                            его пункта меню
0333   2???           00443         call    Send_LCD_Symbol
0334                  00444 Skip_Correct_index_submenu_3
                      00445 
Warning[205]: Found directive in column 1. (else)
                      00446 else
                      00447         call    Switch_Submenu_routine          ; Рисуем текущий подпункт меню  
                      00448         call    Second_String_routine           ; Указатель на 2 строку
                      00449         incf    index_submenu
                      00450         call    Num_of_Submenu_Table                    
                      00451         subwf   index_submenu,w                         ; Сравниваем с количеством подпунктов меню
                      00452         btfsc   STATUS,Z
                      00453         goto    Correct_index_submenu
                      00454         call    Switch_Submenu_routine          ; Рисуем подпункт меню под текущим 
                      00455         decf    index_submenu                           ; Не забудем вернуть назад текущий подпункт меню
                      00456         goto    Skip_Correct_index_submenu      
                      00457 Correct_index_submenu                                   ; Достигли последнего подпункта меню, следующим 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            отображаем 1 подпункт
                      00458         clrf    index_submenu   
                      00459         call    Switch_Submenu_routine
                      00460         call    Num_of_Submenu_Table
                      00461         movwf   index_submenu   
                      00462         decf    index_submenu                           ; Учитываем, что индекс подпункта начинается с 0
                      00463 Skip_Correct_index_submenu
                      00464 endif
                      00465 
0334   2???           00466         call    Debounce_Delay                          ; Процедура антидребезга, вызывается при первом 
                            входе в подпункт меню, при нажатии кнопок "Вверх", "Вниз", выходе из действия подпункта меню
                      00467 
Warning[205]: Found directive in column 1. (if)
                      00468 if      USE_RBIE
0335   30F0           00469         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0336   05??           00470         andwf   flags   
0337   100B           00471         bcf             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
0338   158B           00472         bsf             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
Warning[205]: Found directive in column 1. (endif)
                      00473 endif
                      00474 
0339   3014           00475         movlw   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
033A   00??           00476         movwf   menu_counter
033B   01??           00477         clrf    temp_1
033C   01??           00478         clrf    temp_2
033D                  00479 Loop_Submenu                                                    ; Мы зашли в пункт меню, ждем нажатия сл
                            едующей кнопки
                      00480 
Warning[205]: Found directive in column 1. (if)
                      00481 if      USE_RBIE
033D   1800           00482         btfsc   Press_UP
033E   2???           00483         goto    Cursor_UP_submenu                               
033F   1880           00484         btfsc   Press_DOWN
0340   2???           00485         goto    Cursor_DOWN_submenu
0341   1980           00486         btfsc   Press_ENTER
0342   2???           00487         goto    ENTER_submenu
0343   1900           00488         btfsc   Press_EXIT
0344   2???           00489         goto    EXIT_submenu
Warning[205]: Found directive in column 1. (else)
                      00490 else
                      00491         btfss   UP
                      00492         goto    Cursor_UP_submenu                               
                      00493         btfss   DOWN
                      00494         goto    Cursor_DOWN_submenu
                      00495         btfss   ENTER
                      00496         goto    ENTER_submenu
                      00497         btfss   EXIT
                      00498         goto    EXIT_submenu
                      00499 endif
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00500 ;-----------------------------------------------------------------
Message[305]: Using default destination of 1 (file).
0345   0B??           00501         decfsz  temp_1                                          ; Ни одна клавиша не нажата     
0346   2???           00502         goto    Loop_Submenu                            ; Цикл ожидания нажатия в пункте меню
Message[305]: Using default destination of 1 (file).
0347   0B??           00503         decfsz  temp_2  
0348   2???           00504         goto    Loop_Submenu
Message[305]: Using default destination of 1 (file).
0349   0B??           00505         decfsz  menu_counter                            ; Декремент счетчика проходов опроса клавиш     
                                    
034A   2???           00506         goto    Loop_Submenu
034B   2???           00507         goto    Switch_Menu                                     ; Вышел таймаут нахождения в подменю, вы
                            ходим в предыдущий пункт меню
                      00508 ;-----------------------------------------------------------------
034C                  00509 Cursor_UP_submenu                                               ; Была нажата клавиша "Вверх"
                      00510 
Warning[205]: Found directive in column 1. (if)
                      00511 if      USE_MOVING_CURSOR       &       !USE_RBIE
                      00512         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00513         andwf   flags                                           
                      00514         bsf             Press_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00515 endif
                      00516 
Message[305]: Using default destination of 1 (file).
034C   03??           00517         decf    index_submenu                           ; Берем предыдущий пункт подменю
034D   1F80           00518         btfss   index_submenu,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов подменю ограничено 64
034E   2???           00519         goto    Switch_Submenu  
034F   2???           00520         call    Num_of_Submenu_Table            ; Стало "<0", возвращаем количество пунктов в даном подм
                            еню     
0350   00??           00521         movwf   index_submenu                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
0351   03??           00522         decf    index_submenu                           ; Учитываем, что индекс пункта подменю на 1 мень
                            ше его порядкового номера
0352   2???           00523         goto    Switch_Submenu                          ; Отрисовываем новый текущий подпункт меню      
                      00524 ;-----------------------------------------------------------------
0353                  00525 Cursor_DOWN_submenu                                             ; Была нажата клавиша "Вниз"
                      00526 
Warning[205]: Found directive in column 1. (if)
                      00527 if      USE_MOVING_CURSOR       &       !USE_RBIE
                      00528         movlw   b'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00529         andwf   flags                                           
                      00530         bsf             Press_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00531 endif
                      00532 
Message[305]: Using default destination of 1 (file).
0353   0A??           00533         incf    index_submenu                           ; Берем следущий пункт подменю
0354   2???           00534         call    Num_of_Submenu_Table            ; Возвращаем количество пунктов в даном подменю 
0355   02??           00535         subwf   index_submenu,w                         ; Достигли последнего ? 
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0356   1903           00536         btfsc   STATUS,Z
0357   01??           00537         clrf    index_submenu                           ; Если да, делаем текущим первый подпункт меню  
                                    
0358   2???           00538         goto    Switch_Submenu                          ; Отрисовываем новый текущий подпункт меню
                      00539 ;-----------------------------------------------------------------      
0359                  00540 EXIT_submenu                                                    ; Была нажата клавиша "Выход"
0359   01??           00541         clrf    index_submenu                           ; Обнуляем индекс пункта подменю, чтобы при след
                            ующем заходе в любой пункт меню курсор находился на 1 пункте подменю                    
035A   2???           00542         goto    Switch_Menu                                     ; Выходим в меню
                      00543 ;-----------------------------------------------------------------
035B                  00544 ENTER_submenu                                                   ; Была нажата клавиша "Вход"
035B   2???           00545         call    CLR_Display_routine                     ; Очистим дисплей
035C   2???           00546         goto    Switch_Action                           ; Делаем действие текущего подпункта меню
035D                  00547 End_Action
                      00548 ;-----------------------------------------------------------------
035D   01??           00549         clrf    symbol_pointer                          ; Рисуем подтверждение действия
035E                  00550 String_Action_Complete
035E   2???           00551         call    Table_Action_Complete   
035F   39FF           00552         andlw   0FFh
0360   1903           00553         btfsc   STATUS,Z
0361   2???           00554         goto    Out_Action_Complete
0362   2???           00555         call    Send_LCD_Symbol
Message[305]: Using default destination of 1 (file).
0363   0A??           00556         incf    symbol_pointer  
0364   2???           00557         goto    String_Action_Complete
0365                  00558 Out_Action_Complete
0365   01??           00559         clrf    temp_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
0366   2???           00560         call    Debounce_Delay
Message[305]: Using default destination of 1 (file).
0367   0B??           00561         decfsz  temp_3
0368   2???           00562         goto    $-2
                      00563 ;-----------------------------------------------------------------
0369   2???           00564         goto    Switch_Submenu                          ; И идем отрисовывать подпункт меню, курсор на т
                            ом же подпункте, что и был
                      00565 ;===================================================================================================
036A                  00566 Zastavka
036A   2???           00567         call    CLR_Display_routine                     ; Очистим дисплей
036B   01??           00568         clrf    symbol_pointer
036C                  00569 First_String
036C   2???           00570         call    Table_Zastavka_First_String     
036D   39FF           00571         andlw   0FFh
036E   1903           00572         btfsc   STATUS,Z
036F   2???           00573         goto    Out_First_String
0370   2???           00574         call    Send_LCD_Symbol
Message[305]: Using default destination of 1 (file).
0371   0A??           00575         incf    symbol_pointer  
0372   2???           00576         goto    First_String
0373                  00577 Out_First_String
0373   30C0           00578         movlw   SECOND_LINE     
0374   2???           00579         call    Send_LCD_Command
0375   01??           00580         clrf    symbol_pointer
0376                  00581 Next_String
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0376   2???           00582         call    Table_Zastavka_Second_String
0377   39FF           00583         andlw   0FFh
0378   1903           00584         btfsc   STATUS,Z
0379   2???           00585         goto    Out_Next_String
037A   2???           00586         call    Send_LCD_Symbol
Message[305]: Using default destination of 1 (file).
037B   0A??           00587         incf    symbol_pointer  
037C   2???           00588         goto    Next_String
037D                  00589 Out_Next_String
037D   2???           00590         goto    Main    
                      00591 ;===================================================================================================
037E                  00592 Debounce_Delay                                                  ; Подпрограмма антидребезговой задержки
037E   3003           00593         movlw   .3                                                      ; Количество проходов подбираетс
                            я экспериментальным путем
037F   00??           00594         movwf   temp_2
0380   01??           00595         clrf    temp_1
0381                  00596 Loop_Delay
0381   0806           00597         movfw   PORTB                                           
0382   380F           00598         iorlw   b'00001111'                                     ; Установим незначущие разряды
0383   3E01           00599         addlw   .1
0384   1D03           00600         btfss   STATUS,Z
0385   2???           00601         goto    Loop_Delay                                      ; Если хоть одна кнопка нажата, просто з
                            ациклимся
Message[305]: Using default destination of 1 (file).
0386   0B??           00602         decfsz  temp_1  
0387   2???           00603         goto    $-1
Message[305]: Using default destination of 1 (file).
0388   0B??           00604         decfsz  temp_2  
0389   2???           00605         goto    Loop_Delay
038A   0008           00606         return
                      00607 ;===================================================================================================
                      00608         end
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 58


SYMBOL TABLE
  LABEL                             VALUE 

C                                 00000000
CLR_DISP                          00000001
CLR_Display_routine               00000277
CNTL_TRIS_MASK                    000000F5
Check_1                           00000296
Check_2                           00000301
Correct_index_menu                000002AD
Correct_index_menu_2              000002BA
Correct_index_submenu             0000031B
Correct_index_submenu_2           00000329
Create_Menu_Names                 
Create_Submenu_Names              
Cursor_DOWN_menu                  000002E2
Cursor_DOWN_submenu               00000353
Cursor_UP_menu                    000002DC
Cursor_UP_submenu                 0000034C
DC                                00000001
DD_RAM_ADDR                       00000080
DD_RAM_UL                         00000080
DISP_OFF                          00000008
DISP_ON                           0000000C
DISP_ON_B                         0000000F
DISP_ON_C                         0000000E
DOWN                              PORTB,5
Debounce_Delay                    0000037E
Delay_4ms                         00000000
E                                 00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
ENTER                             PORTB,6
ENTER_menu                        000002ED
ENTER_submenu                     0000035B
ENTRY_DEC                         00000004
ENTRY_DEC_S                       00000005
ENTRY_INC                         00000006
ENTRY_INC_S                       00000007
EXIT                              PORTB,7
EXIT_DELAY                        .20
EXIT_menu                         000002E8
EXIT_submenu                      00000359
End_Action                        0000035D
End_Menu_Action                   000002F9
F                                 00000001
FSR                               00000004
First_String                      0000036C
GIE                               00000007
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 59


SYMBOL TABLE
  LABEL                             VALUE 

INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LCD_CNTL                          00000005
LCD_CNTL_TRIS                     00000085
LCD_DATA                          00000006
LCD_DATA_TRIS                     00000086
Loop_1                            000002F2
Loop_Delay                        00000381
Loop_Menu                         000002CD
Loop_Submenu                      0000033D
MENU_NAME_1                       "1.Menu_1"
MENU_NAME_2                       "2.Menu_2"
MENU_NAME_3                       "3.Menu_3"
MENU_NAME_4                       "4.Menu_4"
MENU_NAME_5                       "5.Menu_5"
MENU_SUBMENU_NAME_1_1             "1.1.Garage"
MENU_SUBMENU_NAME_1_2             "1.2.Doors"
MENU_SUBMENU_NAME_1_3             "1.3.House"
MENU_SUBMENU_NAME_2_1             "2.1.Garage"
MENU_SUBMENU_NAME_2_2             "2.2.Doors"
MENU_SUBMENU_NAME_2_3             "2.3.House"
MENU_SUBMENU_NAME_3_1             "3.1.Review"
MENU_SUBMENU_NAME_3_2             "3.2.Shut Off"
MENU_SUBMENU_NAME_3_3             "3.3.FAQ"
MENU_SUBMENU_NAME_4_1             "4.1.Review"
MENU_SUBMENU_NAME_4_2             "4.2.Shut Off"
MENU_SUBMENU_NAME_4_3             "4.3.FAQ"
MENU_SUBMENU_NAME_5_1             "5.1.Config"
MENU_SUBMENU_NAME_5_2             "5.2.Settings"
MENU_SUBMENU_NAME_5_3             "5.3.About"
Main                              00000000
Menu_1                            000000E9
Menu_1_Submenu_1                  0000013E
Menu_1_Submenu_1_action           00000268
Menu_1_Submenu_2                  00000151
Menu_1_Submenu_2_action           00000269
Menu_1_Submenu_3                  00000163
Menu_1_Submenu_3_action           0000026A
Menu_1_Table                      0000006E
Menu_1_Table_action               000000B2
Menu_1_action                     00000263
Menu_2                            000000FA
Menu_2_Submenu_1                  00000175
Menu_2_Submenu_1_action           0000026B
Menu_2_Submenu_2                  00000188
Menu_2_Submenu_2_action           0000026C
Menu_2_Submenu_3                  0000019A
Menu_2_Submenu_3_action           0000026D
Menu_2_Table                      00000079
Menu_2_Table_action               000000BD
Menu_2_action                     00000264
Menu_3                            0000010B
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 60


SYMBOL TABLE
  LABEL                             VALUE 

Menu_3_Submenu_1                  000001AC
Menu_3_Submenu_1_action           0000026E
Menu_3_Submenu_2                  000001BF
Menu_3_Submenu_2_action           0000026F
Menu_3_Submenu_3                  000001D4
Menu_3_Submenu_3_action           00000270
Menu_3_Table                      00000084
Menu_3_Table_action               000000C8
Menu_3_action                     00000265
Menu_4                            0000011C
Menu_4_Submenu_1                  000001E4
Menu_4_Submenu_1_action           00000271
Menu_4_Submenu_2                  000001F7
Menu_4_Submenu_2_action           00000272
Menu_4_Submenu_3                  0000020C
Menu_4_Submenu_3_action           00000273
Menu_4_Table                      0000008F
Menu_4_Table_action               000000D3
Menu_4_action                     00000266
Menu_5                            0000012D
Menu_5_Submenu_1                  0000021C
Menu_5_Submenu_1_action           00000274
Menu_5_Submenu_2                  0000022F
Menu_5_Submenu_2_action           00000275
Menu_5_Submenu_3                  00000244
Menu_5_Submenu_3_action           00000276
Menu_5_Table                      0000009A
Menu_5_Table_action               000000DE
Menu_5_action                     00000267
Menu_Action                       00000256
Menu_heandler                     0000028E
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
NUM_OF_MAIN_MENU_PUNKTS           .5
NUM_OF_SUBMENU_PUNKTS_1           .3
NUM_OF_SUBMENU_PUNKTS_2           .3
NUM_OF_SUBMENU_PUNKTS_3           .3
NUM_OF_SUBMENU_PUNKTS_4           .3
NUM_OF_SUBMENU_PUNKTS_5           .3
Next_String                       00000376
Num_of_Submenu_Table              00000047
OPTION_REG                        00000081
Only_Write                        00000001
Out_Action_Complete               00000365
Out_First_String                  00000373
Out_Next_String                   0000037D
PCL                               00000002
PCLATH                            0000000A
PORTA                             00000005
PORTB                             00000006
PS0                               00000000
PS1                               00000001
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 61


SYMBOL TABLE
  LABEL                             VALUE 

PS2                               00000002
PSA                               00000003
Press_DOWN                        flags,1
Press_ENTER                       flags,3
Press_EXIT                        flags,2
Press_UP                          flags,0
Pressing_DOWN                     000002B2
Pressing_DOWN_2                   00000321
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RP0                               00000005
RP1                               00000006
RS                                00000003
Rotate_action_menu_flags          000002F7
SECOND_LINE                       000000C0
STATUS                            00000003
Second_String_routine             0000027B
Send_LCD_Command                  00000000
Send_LCD_Symbol                   00000000
Skip_Check_1                      0000029C
Skip_Check_2                      0000030A
Skip_Correct_index_menu_2         000002BF
Skip_Correct_index_menu_3         000002C4
Skip_Correct_index_submenu_2      0000032F
Skip_Correct_index_submenu_3      00000334
String_Action_Complete            0000035E
String_Menu                       0000027F
String_Submenu                    00000287
Switch_Action                     000000A5
Switch_Menu                       0000028F
Switch_Menu_Table                 00000054
Switch_Menu_routine               0000027E
Switch_Submenu                    000002FA
Switch_Submenu_Table              00000061
Switch_Submenu_routine            00000286
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 62


SYMBOL TABLE
  LABEL                             VALUE 

TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
Table_Action_Complete             00000000
Table_Zastavka_First_String       00000019
Table_Zastavka_Second_String      00000030
UP                                PORTB,4
USE_CURSOR                        0
USE_MENU_ACTION                   1
USE_MOVING_CURSOR                 1
USE_RBIE                          1
USE_SHORT_MOD_PCL                 1
USE_TOP_LAST_CURSOR               1
Use_4_bit_mode                    00000001
Use_High_Nible                    00000000
Use_One_Port                      00000000
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
ZASTAVKA_FIRST_STRING             "  MicroMenuLib"
ZASTAVKA_SECOND_STRING            "  ver 1.0 beta"
Zastavka                          0000036A
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_MicroMenu_0368                   00000368
MPASM  5.51                 MICROMENU_LIB.ASM   5-31-2017  20:28:29         PAGE 63


SYMBOL TABLE
  LABEL                             VALUE 

_MicroMenu_0387                   00000387
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001
actions_menu_flags                b'00000001'
add_PCL                           
flags                             00000000
goto_Menu_action                  
goto_Punkt_Menu                   
goto_Punkt_Submenu                
goto_Punkt_Submenu_action         
index_menu                        00000000
index_submenu                     00000001
known_zero                        00000000
menu_counter                      00000003
mod_PCL                           
n                                 00000000
offset                            00000000
pop                               
push                              
retlw_num_of_submenu_punkts       
symbol_pointer                    00000002
temp_1                            00000004
temp_2                            00000005
temp_3                            00000006
y                                 00000001

Errors   :     0
Warnings :   196 reported,     0 suppressed
Messages :    40 reported,     0 suppressed

