MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         INCLUDE MICROMENU_LIB.H
                      00001 ; Микроменю на базе двухстрочного индикатора HD44780 и четырехпозиционного джойстика (крестовины кнопок)
                      00002 
Warning[205]: Found directive in column 1. (INCLUDE)
                      00003 INCLUDE HARDWARE_PROFILE.INC
                      00001         #INCLUDE P16F84.INC
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F84 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00206         LIST
                      00002 ;       list p=16f84
Warning[205]: Found directive in column 1. (INCLUDE)
                      00004 INCLUDE MACRO.H 
                      00001 #DEFINE USE_SHORT_MOD_PCL       1       ; Использовать "укороченную" версию макроса модификации PCL, поз
                            воляет экономить 1 слово памяти на каждом вызове макроса ценой 1 лишней ячейки ОЗУ
                      00002 
                      00003 PUSH    MACRO
                      00004                 MOVWF   W_TEMP
                      00005                 SWAPF   STATUS,W
                      00006                 MOVWF   STATUS_TEMP
                      00007                 ENDM
                      00008 
                      00009 POP             MACRO
                      00010                 SWAPF   STATUS_TEMP,W
                      00011                 MOVWF   STATUS
                      00012                 SWAPF   W_TEMP,F
                      00013                 SWAPF   W_TEMP,W
                      00014                 ENDM
                      00015 
                      00016 CLR_RAM_MACRO   MACRO
                      00017                                 MOVLW   4FH             ; end of RAM
                      00018                                 MOVWF   FSR
                      00019                         CLR_RAM 
                      00020                                 CLRF    INDF
                      00021                                 DECF    FSR
                      00022                                 MOVFW   FSR
                      00023                                 SUBLW   0CH-1   ; start RAM
                      00024                                 BNZ             CLR_RAM
                      00025                                 ENDM
                      00026 
                      00027 MOD_PCL MACRO   TARGET                  ; Макрос, позволяет размещать таблицы на границах страниц
                      00028                 LOCAL   TABLE
                      00029                 MOVFW   TARGET
                      00030                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
                      00031                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                      00032         IF      USE_SHORT_MOD_PCL
                      00033                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
                      00034                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00035         ELSE
                      00036                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                      00037                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                      00038                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                      00039         ENDIF
                      00040                 MOVWF   PCLATH                  ; Установить старшую часть адреса
                      00041                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
                      00042                 MOVWF   PCL                             ; Установить младшую часть адреса
                      00043         TABLE
                      00044                 ENDM
                      00045 
                      00046 ADD_PCL MACRO   TARGET,ADDRESS  ; Макрос, позволяет удобно указывать страницу для следующего за ним кода
                      00047                                 MOVFW   TARGET  
                      00048                                 CLRF    PCLATH
                      00049                         IF      (ADDRESS==0X100)
                      00050                                 BSF             PCLATH,0
                      00051                         ENDIF
                      00052                         IF      (ADDRESS==0X200)
                      00053                                 BSF             PCLATH,1
                      00054                         ENDIF
                      00055                         IF      (ADDRESS==0X300)
                      00056                                 BSF             PCLATH,0                                
                      00057                                 BSF             PCLATH,1
                      00058                         ENDIF
                      00059                         IF      (ADDRESS==0X400)
                      00060                                 BSF             PCLATH,2                                
                      00061                         ENDIF
                      00062                                 ADDWF   PCL
                      00063                                 ENDM
                      00005 
                      00006 #DEFINE USE_STATIC_CURSOR               0                               ; Всегда рисовать курсор в конце
                             1-й строки
                      00007 #DEFINE USE_MOVING_CURSOR               1                               ; Использовать перемещаемый курс
                            ор (повышает удобство использования меню и размер прошивки)
                      00008 #DEFINE USE_TOP_LAST_CURSOR             1                               ; Использовать отображение "перв
                            ый пункт всегда сверху" и "последний пункт всегда снизу" (повышает удобство использования меню и
                      00009 #DEFINE SAVE_CURSOR_POSITION    1                               ; Сохранять позицию курсора при входе в 
                            подменю, и восстанавливать ее при выходе в главное меню
                      00010 #DEFINE USE_MENU_ACTION                 1                               ; Использовать возможность запус
                            ка действий при входе в пункт меню
                      00011 #DEFINE USE_RBIE                                1                               ; Использовать прерывани
                            е по изминению состояния PORTB для обработки кнопок (позволяет использовать сон)
                      00012 
Warning[205]: Found directive in column 1. (IF)
                      00013 IF      USE_MENU_ACTION 
                      00014 #DEFINE ACTIONS_MENU_FLAGS              B'00000001'             ; Выставленный бит - есть действие при в
                            ходе в этот пункт меню (не забыть заполнить обработчик действия)
Warning[205]: Found directive in column 1. (ENDIF)
                      00015 ENDIF
                      00016 
                      00017 #DEFINE UP                                              PORTB,4
                      00018 #DEFINE DOWN                                    PORTB,5
                      00019 #DEFINE ENTER                                   PORTB,6
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00020 #DEFINE EXIT                                    PORTB,7
                      00021 
                      00022 #DEFINE PRESS_UP                                BUTTONS,0
                      00023 #DEFINE PRESS_DOWN                              BUTTONS,1
                      00024 #DEFINE PRESS_EXIT                              BUTTONS,2
                      00025 #DEFINE PRESS_ENTER                             BUTTONS,3       
                      00026 
                      00027 ;#define        ZUMER                                   PORTA,0
                      00028 
                      00029 #DEFINE EXIT_DELAY                              .20                             ; Количество опросов кно
                            пок, до выхода в предыдущий уровень (* 0,8 сек)
                      00030 
                      00031 #DEFINE ZASTAVKA_FIRST_STRING   "  MicroMenuLib"
                      00032 #DEFINE ZASTAVKA_SECOND_STRING  "  ver 1.0 beta"
                      00033 
                      00034 #DEFINE NUM_OF_MAIN_MENU_PUNKTS .5                              ; Количество пунктов меню, до 10 
                      00035 
                      00036 #DEFINE MENU_NAME_1                             "1.Menu_1"
                      00037 #DEFINE MENU_NAME_2                             "2.Menu_2"
                      00038 #DEFINE MENU_NAME_3                             "3.Menu_3"
                      00039 #DEFINE MENU_NAME_4                             "4.Menu_4"
                      00040 #DEFINE MENU_NAME_5                             "5.Menu_5"
                      00041 #DEFINE MENU_NAME_6                             "6.Menu_6"      
                      00042 
                      00043 #DEFINE NUM_OF_SUBMENU_PUNKTS_1 .0                              ; Количество подпунктов каждого пункта м
                            еню, до 8
                      00044 
                      00045 #DEFINE MENU_SUBMENU_NAME_1_1   "1.1.Subm"
                      00046 #DEFINE MENU_SUBMENU_NAME_1_2   "1.2.Subm"
                      00047 #DEFINE MENU_SUBMENU_NAME_1_3   "1.3.Subm"
                      00048 #DEFINE MENU_SUBMENU_NAME_1_4   "1.4.Subm"
                      00049 
                      00050 #DEFINE NUM_OF_SUBMENU_PUNKTS_2 .1
                      00051 
                      00052 #DEFINE MENU_SUBMENU_NAME_2_1   "2.1.Subm"
                      00053 #DEFINE MENU_SUBMENU_NAME_2_2   "2.2.Subm"
                      00054 #DEFINE MENU_SUBMENU_NAME_2_3   "2.3.Subm"
                      00055 #DEFINE MENU_SUBMENU_NAME_2_4   "2.4.Subm"
                      00056                                 
                      00057 #DEFINE NUM_OF_SUBMENU_PUNKTS_3 .2
                      00058 
                      00059 #DEFINE MENU_SUBMENU_NAME_3_1   "3.1.Subm"
                      00060 #DEFINE MENU_SUBMENU_NAME_3_2   "3.2.Subm"
                      00061 #DEFINE MENU_SUBMENU_NAME_3_3   "3.3.Subm"
                      00062 #DEFINE MENU_SUBMENU_NAME_3_4   "3.4.Subm"
                      00063 
                      00064 #DEFINE NUM_OF_SUBMENU_PUNKTS_4 .3
                      00065 
                      00066 #DEFINE MENU_SUBMENU_NAME_4_1   "4.1.Subm"
                      00067 #DEFINE MENU_SUBMENU_NAME_4_2   "4.2.Subm"
                      00068 #DEFINE MENU_SUBMENU_NAME_4_3   "4.3.Subm"
                      00069 #DEFINE MENU_SUBMENU_NAME_4_4   "4.4.Subm"
                      00070 
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00071 #DEFINE NUM_OF_SUBMENU_PUNKTS_5 .4
                      00072 
                      00073 #DEFINE MENU_SUBMENU_NAME_5_1   "5.1.Subm"
                      00074 #DEFINE MENU_SUBMENU_NAME_5_2   "5.2.Subm"
                      00075 #DEFINE MENU_SUBMENU_NAME_5_3   "5.3.Subm"
                      00076 #DEFINE MENU_SUBMENU_NAME_5_4   "5.4.Subm"
                      00077 ;=======================================================================================================
                            =========
                      00078 CREATE_MENU_NAMES       MACRO                           ; Макрос, создает имена всех пунктов меню
                      00079                         LOCAL   A=1
                      00080                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00081                                 MENU_#V(A)
                      00082                                         MOD_PCL SYMBOL_POINTER
                      00083                                         DT              MENU_NAME_#V(A),0
                      00084                                         A+=1
                      00085                                 ENDW
                      00086                         ENDM
                      00087 ;=======================================================================================================
                            =========
                      00088 RETLW_NUM_OF_SUBMENU_PUNKTS     MACRO           ; Макрос, возвращает количество пунктов нужного подменю
                      00089                                 MOD_PCL INDEX_MENU
                      00090                         LOCAL   A=1
                      00091                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00092                                         RETLW   NUM_OF_SUBMENU_PUNKTS_#V(A)
                      00093                                         A+=1
                      00094                                 ENDW
                      00095                         ENDM
                      00096 ;=======================================================================================================
                            =========
                      00097 GOTO_PUNKT_MENU MACRO                                   ; Макрос, создает переходы на все пункты меню
                      00098                                 MOD_PCL INDEX_MENU
                      00099                         LOCAL   A=1
                      00100                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00101                                         GOTO    MENU_#V(A)
                      00102                                         A+=1
                      00103                                 ENDW
                      00104                         ENDM
                      00105 ;=======================================================================================================
                            =========
                      00106 GOTO_PUNKT_SUBMENU      MACRO                           ; Макрос, создает переходы на имена всех подпунк
                            тов меню
                      00107                                         MOD_PCL INDEX_MENU                              
                      00108                                         LOCAL   C=1
                      00109                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00110                                                 GOTO    MENU_#V(C)_TABLE
                      00111                                                 C+=1
                      00112                                         ENDW
                      00113                                         LOCAL   D=1
                      00114                                         LOCAL   A
                      00115                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00116                                                 A=1     
                      00117                                                 MENU_#V(D)_TABLE
                      00118                                                 MOD_PCL INDEX_SUBMENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00119                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00120                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                      00121                                                         A+=1
                      00122                                                 ENDW
                      00123                                                 D+=1
                      00124                                         ENDW    
                      00125                                         ENDM
                      00126 ;=======================================================================================================
                            =========
                      00127 GOTO_PUNKT_SUBMENU_ACTION       MACRO           ; Макрос, создает переходы на действия всех подпунктов м
                            еню
                      00128                                                         MOD_PCL INDEX_MENU                              
                      00129                                                         LOCAL   C=1
                      00130                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00131                                                                 GOTO    MENU_#V(C)_TABLE_ACTION
                      00132                                                                 C+=1
                      00133                                                         ENDW
                      00134                                                         LOCAL   D=1
                      00135                                                         LOCAL   A
                      00136                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00137                                                                 A=1     
                      00138                                                                 MENU_#V(D)_TABLE_ACTION
                      00139                                                                 MOD_PCL INDEX_SUBMENU
                      00140                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00141                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                      00142                                                                         A+=1
                      00143                                                                 ENDW
                      00144                                                                 D+=1
                      00145                                                         ENDW
                      00146                                                         ENDM
                      00147 ;=======================================================================================================
                            =========
                      00148 CREATE_SUBMENU_NAMES_   MACRO                           ; Не работающий макрос создания имен всех подпун
                            ктов меню :(
                      00149                                                 LOCAL   D=1
                      00150                                                 LOCAL   A       
                      00151                                                 WHILE   D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00152                                                         A=1
                      00153                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1         
                                                                    
                      00154                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00155                                                                 MOD_PCL SYMBOL_POINTER
                      00156                                                                 DT      MENU_SUBMENU_NAME_#V(D)_#V(A),0
                      00157                                                                 A+=1
                      00158                                                         ENDW
                      00159                                                         D+=1
                      00160                                                 ENDW
                      00161                                                 ENDM
                      00162 ;=======================================================================================================
                            =========
                      00163 CREATE_SUBMENU_NAMES    MACRO                           ; Макрос, создает имена всех подпунктов меню
                      00164                                 LOCAL   D=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00165 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00166 ; Подпункты 1 пункта меню
                      00167 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00168                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00169                                 LOCAL   A=1     
                      00170                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00171                                         MENU_#V(D)_SUBMENU_#V(A)
                      00172                                                 MOD_PCL SYMBOL_POINTER
                      00173                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                      00174                                         A+=1
                      00175                                 ENDW
                      00176                                         D+=1
                      00177                                 ENDIF
                      00178 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00179 ; Подпункты 2 пункта меню
                      00180 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00181                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00182                                 LOCAL   A=1     
                      00183                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00184                                         MENU_#V(D)_SUBMENU_#V(A)
                      00185                                                 MOD_PCL SYMBOL_POINTER
                      00186                                                 DT              MENU_SUBMENU_NAME_2_#V(A),0
                      00187                                         A+=1
                      00188                                 ENDW
                      00189                                         D+=1
                      00190                                 ENDIF
                      00191 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00192 ; Подпункты 3 пункта меню
                      00193 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00194                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00195                                 LOCAL   A=1     
                      00196                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00197                                         MENU_#V(D)_SUBMENU_#V(A)
                      00198                                                 MOD_PCL SYMBOL_POINTER
                      00199                                                 DT              MENU_SUBMENU_NAME_3_#V(A),0
                      00200                                         A+=1
                      00201                                 ENDW
                      00202                                         D+=1
                      00203                                 ENDIF
                      00204 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00205 ; Подпункты 4 пункта меню
                      00206 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00207                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00208                                 LOCAL   A=1     
                      00209                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00210                                         MENU_#V(D)_SUBMENU_#V(A)
                      00211                                                 MOD_PCL SYMBOL_POINTER
                      00212                                                 DT              MENU_SUBMENU_NAME_4_#V(A),0
                      00213                                         A+=1
                      00214                                 ENDW
                      00215                                         D+=1
                      00216                                 ENDIF
                      00217 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00218 ; Подпункты 5 пункта меню
                      00219 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00220                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00221                                 LOCAL   A=1     
                      00222                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00223                                         MENU_#V(D)_SUBMENU_#V(A)
                      00224                                                 MOD_PCL SYMBOL_POINTER
                      00225                                                 DT              MENU_SUBMENU_NAME_5_#V(A),0
                      00226                                         A+=1
                      00227                                 ENDW
                      00228                                         D+=1
                      00229                                 ENDIF
                      00230 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00231 ; Подпункты 6 пункта меню
                      00232 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00233                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00234                                 LOCAL   A=1     
                      00235                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00236                                         MENU_#V(D)_SUBMENU_#V(A)
                      00237                                                 MOD_PCL SYMBOL_POINTER
                      00238                                                 DT              MENU_SUBMENU_NAME_6_#V(A),0
                      00239                                         A+=1
                      00240                                 ENDW
                      00241                                         D+=1
                      00242                                 ENDIF
                      00243 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00244 ; Подпункты 7 пункта меню
                      00245 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00246                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00247                                 LOCAL   A=1     
                      00248                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00249                                         MENU_#V(D)_SUBMENU_#V(A)
                      00250                                                 MOD_PCL SYMBOL_POINTER
                      00251                                                 DT              MENU_SUBMENU_NAME_7_#V(A),0
                      00252                                         A+=1
                      00253                                 ENDW
                      00254                                         D+=1
                      00255                                 ENDIF
                      00256 ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                      00257 ; Подпункты 8 пункта меню
                      00258 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00259                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00260                                 LOCAL   A=1     
                      00261                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00262                                         MENU_#V(D)_SUBMENU_#V(A)
                      00263                                                 MOD_PCL SYMBOL_POINTER
                      00264                                                 DT              MENU_SUBMENU_NAME_8_#V(A),0
                      00265                                         A+=1
                      00266                                 ENDW
                      00267                                         D+=1
                      00268                                 ENDIF
                      00269 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00270                         ENDM
                      00271 ;=======================================================================================================
                            =========
Warning[205]: Found directive in column 1. (IF)
                      00272 IF      USE_MENU_ACTION 
                      00273 GOTO_MENU_ACTION        MACRO           ; Макрос, создает переходы на действия всех пунктов меню (если в
                            ключена соответствующая опция)
                      00274                                         MOD_PCL INDEX_MENU                      
                      00275                                         LOCAL   A=1
                      00276                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00277                                         GOTO    MENU_#V(A)_ACTION
                      00278                                         A+=1
                      00279                                 ENDW
                      00280                                         ENDM
Warning[205]: Found directive in column 1. (ENDIF)
                      00281 ENDIF
                      00282 ;=======================================================================================================
                            =========
                      00283 MICROMENU_INIT  MACRO
                      00284                                 CALL    LCD_INIT                                        ; Инициалзация с
                            амого дисплея   
                      00285                                 CLRF    BUTTONS                                         ; Очистим флаги 
                            нажатых кнопок
                      00286                                 IF      USE_RBIE
                      00287                                 BCF             INTCON,RBIF                     
                      00288                                 MOVLW   1<<RBIE|1<<GIE
                      00289                                 IORWF   INTCON
                      00290                                 ENDIF
                      00291                                 ENDM
                      00292 ;=======================================================================================================
                            =========
Warning[205]: Found directive in column 1. (IF)
                      00293 IF      USE_RBIE
                      00294 BUTTON_HEANDLER MACRO                                                           ; Обработчик нажатия кно
                            пок
                      00295                                 BCF             INTCON,RBIF                                     ; Сброси
                            м флаг вызваного прерывания
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00296                                 MOVFW   PORTB                                           
                      00297                                 IORLW   B'00001111'                                     ; Установим незн
                            ачущие разряды
                      00298                                 ADDLW   .1
                      00299                                 BZ              END_INTERRUPT_HEANDLER          ; Если ни одна кнопка не
                             нажата, пропустим обработку нажатия
                      00300                                 BTFSS   UP
                      00301                                 BSF             PRESS_UP                
                      00302                                 BTFSS   DOWN
                      00303                                 BSF             PRESS_DOWN
                      00304                                 BTFSS   ENTER
                      00305                                 BSF             PRESS_ENTER
                      00306                                 BTFSS   EXIT
                      00307                                 BSF             PRESS_EXIT
                      00308                                 BCF             INTCON,RBIE                                     ; Запрет
                            им все дальнейшие прерывания от кнопок, до обработки этого нажатия
                      00309                                 ENDM
Warning[205]: Found directive in column 1. (ENDIF)
                      00310 ENDIF
                      00311 ;=======================================================================================================
                            =========
                      00312 CHECK_BUTTONS_MACRO     MACRO
                      00313                                         IF      USE_RBIE
                      00314                                         SLEEP
                      00315                                         NOP
                      00316                                         MOVFW   BUTTONS                                         
                      00317                                         ANDLW   B'00001111'                                     ; Занули
                            м незначущие разряды
                      00318                                         BNZ             MENU_HEANDLER                           ; Если х
                            оть одна кнопка нажата, входим в обработчик меню
                      00319                                 
                      00320                                         ELSE
                      00321                                         MOVFW   PORTB                                           
                      00322                                         IORLW   B'00001111'                                     ; Устано
                            вим незначущие разряды
                      00323                                         ADDLW   .1
                      00324                                         BNZ             MENU_HEANDLER                           ; Если х
                            оть одна кнопка нажата, входим в обработчик меню
                      00325                                         ENDIF
                      00326                                         ENDM
                      00327 ;=======================================================================================================
                            =========
                      00002         INCLUDE HD44780_LIB.H
Warning[205]: Found directive in column 1. (INCLUDE)
                      00001 INCLUDE HARDWARE_PROFILE.INC
                      00003         #INCLUDE P16F84.INC
                      00207         LIST
                      00208 
                      00209 ;==========================================================================
                      00210 ;  MPASM PIC16F84 processor include
                      00211 ; 
                      00212 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00213 ;==========================================================================
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00214 
Message[310]: Superseding current maximum RAM and RAM map.
                      00412         LIST
                      00004 ;       list p=16f84
                      00002 
  00000001            00003 Y                               EQU             1                               ; YES
  00000000            00004 N                               EQU             0                               ; NO
                      00005 
  00000001            00006 USE_4_BIT_MODE  EQU             Y                               ; YES/NO
  00000000            00007 USE_HIGH_NIBLE  EQU             N                               ; YES/NO
  00000000            00008 USE_ONE_PORT    EQU             N                               ; YES/NO
  00000001            00009 ONLY_WRITE              EQU             Y                               ; YES/NO
                      00010 
  00000006            00011 LCD_DATA                EQU             PORTB                   ; Описываем порт линий данных
  00000086            00012 LCD_DATA_TRIS   EQU             TRISB
                      00013 
                      00014         IF      (USE_4_BIT_MODE && USE_ONE_PORT); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00015 
                      00016 LCD_CNTL                EQU             LCD_DATA                ; то так и опишем
                      00017 LCD_CNTL_TRIS   EQU             LCD_DATA_TRIS
                      00018 
                      00019         ELSE
                      00020 
  00000005            00021 LCD_CNTL                EQU             PORTA                   ; Иначе зададим любой другой
  00000085            00022 LCD_CNTL_TRIS   EQU             TRISA
                      00023         ENDIF
                      00024         
                      00025         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && ONLY_WRITE)
                      00026 E                               EQU             2
                      00027 RS                              EQU             3
                      00028 CNTL_TRIS_MASK  EQU             B'11110011'             ; Маска настройки линий управлениЯ
                      00029         ENDIF
                      00030 
                      00031         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && !ONLY_WRITE)
                      00032 E                               EQU             1
                      00033 RW                              EQU             2
                      00034 RS                              EQU             3
                      00035 CNTL_TRIS_MASK  EQU             B'11110001'             ; Маска настройки линий управлениЯ
                      00036         ENDIF   
                      00037 
                      00038         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && ONLY_WRITE)
                      00039 E                               EQU             4
                      00040 RS                              EQU             5
                      00041 CNTL_TRIS_MASK  EQU             B'11001111'             ; Маска настройки линий управлениЯ
                      00042         ENDIF   
                      00043 
                      00044         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && !ONLY_WRITE)
                      00045 E                               EQU             4
                      00046 RW                              EQU             5
                      00047 RS                              EQU             6
                      00048 CNTL_TRIS_MASK  EQU             B'10001111'             ; Маска настройки линий управлениЯ
                      00049 
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00050         ELSE    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
                      00051         
  00000001            00052 E                               EQU             1
  00000003            00053 RS                              EQU             3
  000000F5            00054 CNTL_TRIS_MASK  EQU             B'11110101'             ; Маска настройки линий управления
                      00055         ENDIF
                      00056 
  0000000C            00057 DISP_ON                 EQU             B'00001100'             ; Display on
  0000000E            00058 DISP_ON_C               EQU             B'00001110'             ; Display on, Cursor on
  0000000F            00059 DISP_ON_B               EQU             B'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00060 DISP_OFF                EQU             B'00001000'             ; Display off
  00000001            00061 CLR_DISP                EQU             B'00000001'             ; Clear the Display
  00000006            00062 ENTRY_INC               EQU             B'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00063 ENTRY_INC_S             EQU             B'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00064 ENTRY_DEC               EQU             B'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00065 ENTRY_DEC_S             EQU             B'00000101'             ;
  00000080            00066 DD_RAM_ADDR             EQU             B'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00067 DD_RAM_UL               EQU             B'10000000'             ; Upper Left coner of the Display
  00000080            00068 FIRST_LINE              EQU             B'10000000'             ; Move cursor to first line
  000000C0            00069 SECOND_LINE             EQU             B'11000000'             ; Move cursor to second line
  0000008F            00070 LAST_SYMBOL_FIRST_LINE  EQU     B'10001111'     ; Установим курсор на последний символ 1-й строки
  000000CF            00071 LAST_SYMBOL_SECOND_LINE EQU     B'11001111'     ; Установим курсор на последний символ 2-й строки
                      00072 
                      00073 PRINT_LCD_STRING_MACRO  MACRO   LABEL
                      00074                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
                      00075                                                 CLRF    SYMBOL_POINTER
                      00076                                         PRINT_LCD_STRING
                      00077                                                 CALL    LABEL
                      00078                                                 ANDLW   0FFH
                      00079                                                 BTFSC   STATUS,Z
                      00080                                                 GOTO    END_LCD_STRING          
                      00081                                                 CALL    SEND_LCD_SYMBOL
                      00082                                                 INCF    SYMBOL_POINTER  
                      00083                                                 GOTO    PRINT_LCD_STRING
                      00084                                         END_LCD_STRING  
                      00085                                                 ENDM
                      00086 ;=======================================================================================================
                            =========
                      00087 DRAW_CURSOR     MACRO   SYMBOL
                      00088                         MOVLW   SYMBOL
                      00089                         CALL    DRAW_CURSOR_ROUTINE
                      00090                         ENDM
                      00091 ;=======================================================================================================
                            =========
                      00092 SECOND_LINE_MACRO       MACRO
                      00093                                         MOVLW   SECOND_LINE     
                      00094                                         CALL    SEND_LCD_COMMAND
                      00095                                         ENDM
                      00096 ;=======================================================================================================
                            =========
                      00097 FIRST_LINE_MACRO        MACRO
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00098                                         MOVLW   FIRST_LINE      
                      00099                                         CALL    SEND_LCD_COMMAND
                      00100                                         ENDM
                      00101 ;=======================================================================================================
                            =========
                      00003 
                      00004 MICROMENU_LIB_UDATA     UDATA_SHR
0000                  00005 INDEX_MENU              RES     1
0001                  00006 INDEX_SUBMENU   RES     1
0002                  00007 NUM_OF_SUBMENU  RES     1                                       ; Количество пунктов в текущем меню
0003                  00008 SYMBOL_POINTER  RES     1
0004                  00009 MENU_COUNTER    RES     1
0005                  00010 BUTTONS                 RES     1
0006                  00011 TEMP_1                  RES     1
0007                  00012 TEMP_2                  RES     1
0008                  00013 TEMP_3                  RES     1
                      00014 
                      00015         IF SAVE_CURSOR_POSITION
0009                  00016 SAVE_POSITION   RES     1
                      00017         ENDIF
                      00018 
                      00019         IF      USE_SHORT_MOD_PCL
  0000                00020         EXTERN  KNOWN_ZERO
                      00021         ENDIF
                      00022 
  0000                00023         GLOBAL  BUTTONS
  0000                00024         EXTERN  OFFSET
  0000                00025         GLOBAL  MENU_HEANDLER,ZASTAVKA,ENTER_MENU
  0000                00026         EXTERN  SEND_LCD_SYMBOL,SEND_LCD_COMMAND,DELAY_4MS,CLR_DISPLAY_ROUTINE,MAIN
                      00027 ;===================================================================================================
                      00028 MICROMENU               CODE                                    ; Сегмент кода библиотеки меню
                      00029 ;===================================================================================================
0000                  00030 TABLE_ACTION_COMPLETE 
                      00031         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0000   08??               M                 MOVFW   SYMBOL_POINTER
0001   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0002   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0003   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0004   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0005   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0006   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0007   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0008                      M         TABLE
0008   3441 3463 3474 00032         DT              "Action Complete!",0
       3469 346F 346E 
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3420 3443 346F 
       346D 3470 346C 
       3465 3474 3465 
       3421 3400 
                      00033 ;===================================================================================================
0019                  00034 MENU_HEANDLER                                                   ; Обработчик меню
                      00035 ;===================================================================================================
0019   01??           00036         CLRF    INDEX_MENU                                      ; Была нажатая какая-то кнопка, очистим 
                            индекс пункта меню                                      
                      00037 
                      00038         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00039         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00040         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00041         ENDIF
                      00042 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
001A                  00043 DRAW_MENU                                                               ; Отрисовка пунктов меню        
                                                                            
                      00044         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
001A   08??           00045         MOVFW   INDEX_MENU
001B   1D03 2???      00046         BNZ             CHECK_1                                         ; Если первый пункт меню        
                                    
001D   01??           00047         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
001E   1400           00048         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
001F   2???           00049         GOTO    SKIP_CHECK_1
0020                  00050 CHECK_1
0020   3C04           00051         SUBLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Сравниваем с количеством пунктов меню
0021   1D03 2???      00052         BNZ             SKIP_CHECK_1                            ; Если последний пункт меню     
0023   01??           00053         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
0024   1480           00054         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
0025                  00055 SKIP_CHECK_1
                      00056         ENDIF
                      00057 
0025   2???           00058         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
                      00059 
                      00060         IF      USE_MOVING_CURSOR
0026   1C00           00061         BTFSS   PRESS_UP                                        ; Если была нажата кнопка вверх
0027   2???           00062         GOTO    PRESSING_DOWN                   
0028   2???           00063         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню
                      00064         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
0029   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
002A   2???               M                         CALL    DRAW_CURSOR_ROUTINE
002B   2???           00065         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
002C   0A??           00066         INCF    INDEX_MENU                                      ; Берем следующий пункт меню
002D   08??           00067         MOVFW   INDEX_MENU
002E   3C05           00068         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
002F   1903 2???      00069         BZ              CORRECT_INDEX_MENU                              
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0031   2???           00070         CALL    DRAW_MENU_ROUTINE                       ; Рисуем СЛЕДУЮЩИЙ пункт меню под текущим
Message[305]: Using default destination of 1 (file).
0032   03??           00071         DECF    INDEX_MENU                                      ; Вернем текущий индекс меню
0033   2???           00072         GOTO    SKIP_CORRECT_INDEX_MENU_3
0034                  00073 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
0034   01??           00074         CLRF    INDEX_MENU
0035   2???           00075         CALL    DRAW_MENU_ROUTINE
0036   3004           00076         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
0037   00??           00077         MOVWF   INDEX_MENU
0038   2???           00078         GOTO    SKIP_CORRECT_INDEX_MENU_3
0039                  00079 PRESSING_DOWN                                                   ; Если была нажата кнопка вниз          
                                                                    
Message[305]: Using default destination of 1 (file).
0039   03??           00080         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
003A   1B80           00081         BTFSC   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
003B   2???           00082         GOTO    CORRECT_INDEX_MENU_2
003C   2???           00083         CALL    DRAW_MENU_ROUTINE                       ; Рисуем предыдущий пункт меню
003D   2???           00084         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
003E   0A??           00085         INCF    INDEX_MENU                                      ; Вернем текущий индекс меню            
                                            
003F   2???           00086         GOTO    SKIP_CORRECT_INDEX_MENU_2
0040                  00087 CORRECT_INDEX_MENU_2
0040   3004           00088         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
0041   00??           00089         MOVWF   INDEX_MENU
0042   2???           00090         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ПРЕДЫДУЩИЙ пункт меню над текущим
0043   2???           00091         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
0044   01??           00092         CLRF    INDEX_MENU
0045                  00093 SKIP_CORRECT_INDEX_MENU_2
0045   2???           00094         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню под предыдущим
                      00095         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE
0046   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
0047   2???               M                         CALL    DRAW_CURSOR_ROUTINE
0048                  00096 SKIP_CORRECT_INDEX_MENU_3
                      00097 
                      00098         ELSE
                      00099         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню
                      00100         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00101         INCF    INDEX_MENU                                      ; Берем следующий пункт меню
                      00102         MOVFW   INDEX_MENU
                      00103         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
                      00104         BZ              CORRECT_INDEX_MENU              
                      00105         CALL    DRAW_MENU_ROUTINE                       ; Рисуем СЛЕДУЮЩИЙ пункт меню под текущим 
                      00106         DECF    INDEX_MENU                                      ; Вернем текущий индекс меню    
                      00107         GOTO    SKIP_CORRECT_INDEX_MENU
                      00108 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
                      00109         CLRF    INDEX_MENU
                      00110         CALL    DRAW_MENU_ROUTINE
                      00111         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
                      00112         MOVWF   INDEX_MENU                                      ; Вернем текущий индекс меню    
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00113 SKIP_CORRECT_INDEX_MENU
                      00114         ENDIF
                      00115 
0048   2???           00116         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в меню, при нажатии кнопок "Вверх", "Вниз", выходе из подпункта меню
0049   3014           00117         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
004A   00??           00118         MOVWF   MENU_COUNTER
004B   01??           00119         CLRF    TEMP_1
004C   01??           00120         CLRF    TEMP_2
004D                  00121 LOOP_MENU                                                               ; Вычисляем нажатую клавишу
                      00122         IF      USE_RBIE
004D   1800           00123         BTFSC   PRESS_UP
004E   2???           00124         GOTO    CURSOR_UP_MENU                          
004F   1880           00125         BTFSC   PRESS_DOWN
0050   2???           00126         GOTO    CURSOR_DOWN_MENU
0051   1980           00127         BTFSC   PRESS_ENTER
0052   2???           00128         GOTO    ENTER_MENU
0053   1900           00129         BTFSC   PRESS_EXIT
0054   2???           00130         GOTO    EXIT_MENU
                      00131 
                      00132         ELSE
                      00133         BTFSS   UP
                      00134         GOTO    CURSOR_UP_MENU                          
                      00135         BTFSS   DOWN
                      00136         GOTO    CURSOR_DOWN_MENU
                      00137         BTFSS   ENTER
                      00138         GOTO    ENTER_MENU
                      00139         BTFSS   EXIT
                      00140         GOTO    EXIT_MENU
                      00141         ENDIF
                      00142 ;-----------------------------------------------------------------                                      
                                                                    
Message[305]: Using default destination of 1 (file).
0055   0B??           00143         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата             
                                                            
0056   2???           00144         GOTO    LOOP_MENU                                       ; Цикл ожидания нажатия в главном меню  
Message[305]: Using default destination of 1 (file).
0057   0B??           00145         DECFSZ  TEMP_2  
0058   2???           00146         GOTO    LOOP_MENU
Message[305]: Using default destination of 1 (file).
0059   0B??           00147         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
005A   2???           00148         GOTO    LOOP_MENU
005B   2???           00149         GOTO    ZASTAVKA                                        ; Вышел таймаут нахождения в меню, выход
                            им в заставку   
                      00150 ;-----------------------------------------------------------------
005C                  00151 CURSOR_UP_MENU                                                  ; Была нажата клавиша "Вверх"
                      00152         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании RBIE этот флаг и так выставляется в 
                            обработчике
                      00153         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00154         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00155         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00156 
                      00157         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & USE_RBIE
005C   08??           00158         MOVFW   BUTTONS                                         ; При использовании RBIE
005D   00??           00159         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора тут, иначе она будет 
                            потеряна при нажатии кнопки входа в меню
                      00160         ENDIF
                      00161 
Message[305]: Using default destination of 1 (file).
005E   03??           00162         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
005F   1F80           00163         BTFSS   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
0060   2???           00164         GOTO    DRAW_MENU
0061   3004           00165         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Стало "<0", сделаем текущим последний пункт меню. Учит
                            ываем, что индекс пункта меню на 1 меньше его порядкового номера
0062   00??           00166         MOVWF   INDEX_MENU
0063   2???           00167         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00168 ;-----------------------------------------------------------------
0064                  00169 CURSOR_DOWN_MENU                                                ; Была нажата клавиша "Вниз"
                      00170         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании RBIE этот флаг и так выставляется в 
                            обработчике
                      00171         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00172         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00173         ENDIF
                      00174 
                      00175         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & USE_RBIE
0064   08??           00176         MOVFW   BUTTONS                                         ; При использовании RBIE
0065   00??           00177         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора тут, иначе она будет 
                            потеряна при нажатии кнопки входа в меню
                      00178         ENDIF
                      00179 
Message[305]: Using default destination of 1 (file).
0066   0A??           00180         INCF    INDEX_MENU                                      ; Берем следущий пункт меню
0067   08??           00181         MOVFW   INDEX_MENU
0068   3C05           00182         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Достигли последнего ?
0069   1903           00183         BTFSC   STATUS,Z
006A   01??           00184         CLRF    INDEX_MENU                                      ; Если да, делаем текущим первый пункт м
                            еню     
006B   2???           00185         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00186 ;-----------------------------------------------------------------
006C                  00187 EXIT_MENU                                                               ; Была нажата клавиша "Выход"
006C   2???           00188         CALL    DEBOUNCE_DELAY  
006D   2???           00189         GOTO    ZASTAVKA                                        ; Выходим в заставку
                      00190 ;===================================================================================================
006E                  00191 ENTER_MENU                                                              ; Была нажата клавиша "Вход", ос
                            уществлям вход в меню и отрисовку подпунктов
                      00192 ;===================================================================================================
                      00193         IF      USE_MENU_ACTION         
006E   0A??           00194         INCF    INDEX_MENU,W                            ; Берем текущий пункт меню (учитываем, что нумер
                            ация начинается с 0)
006F   00??           00195         MOVWF   TEMP_1                                          ; Заносим в счетчик
0070   3001           00196         MOVLW   ACTIONS_MENU_FLAGS                      ; Берем флаги действий пунктов меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0071   00??           00197         MOVWF   TEMP_2                                          ; И заносим в переменную
0072                  00198 LOOP_1
Message[305]: Using default destination of 1 (file).
0072   0B??           00199         DECFSZ  TEMP_1
0073   2???           00200         GOTO    ROTATE_ACTION_MENU_FLAGS
0074   1803 2???      00201         BC              MENU_ACTION                                     ; Флаг действия текущего пункта 
                            меню выдавлен в бит переноса, анализируем его
0076   2???           00202         GOTO    END_MENU_ACTION
0077                  00203 ROTATE_ACTION_MENU_FLAGS
Message[305]: Using default destination of 1 (file).
0077   0C??           00204         RRF             TEMP_2                                          ; Перебор флагов действий всех п
                            унктов меню
0078   2???           00205         GOTO    LOOP_1  
0079                  00206 END_MENU_ACTION
                      00207         ENDIF
                      00208 
0079   2???           00209         CALL    NUM_OF_SUBMENU_TABLE            ; Получаем количество подпунктов в этом пункте меню
007A   00??           00210         MOVWF   NUM_OF_SUBMENU                          ; 1 раз занесем в перемунную, чтобы каждый раз н
                            е вызывать эту процедуру        
007B   3C00           00211         SUBLW   .0                                                      ; Сравним с 0
                      00212 ;       movf    num_of_submenu,f                        ; А можно сравнить с 0 и так: копируем переменну
                            ю саму в себя, и если она = 0, установится флаг Z
007C   1903 2???      00213         BZ              DRAW_MENU                                       ; Если 0, сразу на выход без про
                            рисовки подпунктов
007E   01??           00214         CLRF    INDEX_SUBMENU                           ; Очистим индекс пункта подменю 
                      00215 
                      00216         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & !USE_RBIE
                      00217         MOVFW   BUTTONS                                         ; Если не используем RBIE
                      00218         MOVWF   SAVE_POSITION                           ; Можно сохранить позицию курсора 1 раз, уже нах
                            одясь в пункте меню
                      00219         ENDIF
                      00220 
                      00221         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00222         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00223         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00224         ENDIF
                      00225 ;===================================================================================================
007F                  00226 DRAW_SUBMENU                                                    ; Рисуем подпункты меню
                      00227 ;===================================================================================================
                      00228         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
007F   08??           00229         MOVFW   INDEX_SUBMENU
0080   1D03 2???      00230         BNZ             CHECK_2         
0082   01??           00231         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
0083   1400           00232         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
0084   2???           00233         GOTO    SKIP_CHECK_2
0085                  00234 CHECK_2
0085   03??           00235         DECF    NUM_OF_SUBMENU,W                        ; Получаем количество подпунктов в этом меню, уч
                            итываем, что индекс подпункта начинается с 0
0086   02??           00236         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
0087   1D03 2???      00237         BNZ             SKIP_CHECK_2
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0089   01??           00238         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
008A   1480           00239         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
008B                  00240 SKIP_CHECK_2
                      00241         ENDIF
                      00242 
008B   2???           00243         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой подпу
                            нктов меню, чтобы уменьшить моргание
                      00244 
                      00245         IF      USE_MOVING_CURSOR
008C   1C00           00246         BTFSS   PRESS_UP
008D   2???           00247         GOTO    PRESSING_DOWN_2                 
008E   2???           00248         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий подпункт меню  
008F   08??           00249         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
0090   3C01           00250         SUBLW   .1                                                      ; Сравним с 1
0091   1903 2???      00251         BZ              SKIP_CORRECT_INDEX_SUBMENU_3; Если 1, пропускаем прорисовку 2-й строки
                      00252         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
0093   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
0094   2???               M                         CALL    DRAW_CURSOR_ROUTINE
0095   2???           00253         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0096   0A??           00254         INCF    INDEX_SUBMENU                           ; Берем следующий пункт
0097   08??           00255         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
0098   02??           00256         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
0099   1903 2???      00257         BZ              CORRECT_INDEX_SUBMENU
009B   2???           00258         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
Message[305]: Using default destination of 1 (file).
009C   03??           00259         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий пункт меню   
009D   2???           00260         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
009E                  00261 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
009E   01??           00262         CLRF    INDEX_SUBMENU
009F   2???           00263         CALL    DRAW_SUBMENU_ROUTINE
00A0   03??           00264         DECF    NUM_OF_SUBMENU,W
00A1   00??           00265         MOVWF   INDEX_SUBMENU
00A2   2???           00266         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
00A3                  00267 PRESSING_DOWN_2
Message[305]: Using default destination of 1 (file).
00A3   03??           00268         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт меню
00A4   1B80           00269         BTFSC   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
00A5   2???           00270         GOTO    CORRECT_INDEX_SUBMENU_2
00A6   2???           00271         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
00A7   2???           00272         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
00A8   0A??           00273         INCF    INDEX_SUBMENU                           ; Вернем текущий пункт                          
                                    
00A9   2???           00274         GOTO    SKIP_CORRECT_INDEX_SUBMENU_2
00AA                  00275 CORRECT_INDEX_SUBMENU_2
00AA   03??           00276         DECF    NUM_OF_SUBMENU,W
00AB   00??           00277         MOVWF   INDEX_SUBMENU
00AC   2???           00278         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
00AD   2???           00279         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00AE   01??           00280         CLRF    INDEX_SUBMENU
00AF                  00281 SKIP_CORRECT_INDEX_SUBMENU_2
00AF   2???           00282         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий пункт меню под предыдущим 
                      00283         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE ; Нарисум курсор в конце 2-й строчки
00B0   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
00B1   2???               M                         CALL    DRAW_CURSOR_ROUTINE
00B2                  00284 SKIP_CORRECT_INDEX_SUBMENU_3
                      00285 
                      00286         ELSE
                      00287         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем ТЕКУЩИЙ подпункт меню  
                      00288         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
                      00289         SUBLW   .1
                      00290         BZ              SKIP_CORRECT_INDEX_SUBMENU      ; Если 1, пропускаем прорисовку 2-й строки
                      00291         CALL    SECOND_STRING_ROUTINE           ; Иначе указатель на 2 строку
                      00292         INCF    INDEX_SUBMENU                           ; Индекс СЛЕДУЮЩЕГО пункта
                      00293         MOVFW   NUM_OF_SUBMENU                  
                      00294         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
                      00295         BZ              CORRECT_INDEX_SUBMENU
                      00296         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
                      00297         DECF    INDEX_SUBMENU                           ; Вернем назад индекс подпункта
                      00298         GOTO    SKIP_CORRECT_INDEX_SUBMENU      
                      00299 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
                      00300         CLRF    INDEX_SUBMENU   
                      00301         CALL    DRAW_SUBMENU_ROUTINE
                      00302         DECF    NUM_OF_SUBMENU,W                        ; Если меньше <0
                      00303         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
                      00304 SKIP_CORRECT_INDEX_SUBMENU
                      00305         ENDIF
                      00306 
00B2   2???           00307         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в подпункт меню, при нажатии кнопок "Вверх", "Вниз", выходе из действия подпункта меню
00B3   3014           00308         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
00B4   00??           00309         MOVWF   MENU_COUNTER
00B5   01??           00310         CLRF    TEMP_1
00B6   01??           00311         CLRF    TEMP_2
00B7                  00312 LOOP_SUBMENU                                                    ; Мы зашли в пункт меню, ждем нажатия сл
                            едующей кнопки
                      00313         IF      USE_RBIE
00B7   1800           00314         BTFSC   PRESS_UP
00B8   2???           00315         GOTO    CURSOR_UP_SUBMENU                               
00B9   1880           00316         BTFSC   PRESS_DOWN
00BA   2???           00317         GOTO    CURSOR_DOWN_SUBMENU
00BB   1980           00318         BTFSC   PRESS_ENTER
00BC   2???           00319         GOTO    ENTER_SUBMENU
00BD   1900           00320         BTFSC   PRESS_EXIT
00BE   2???           00321         GOTO    EXIT_SUBMENU
                      00322 
                      00323         ELSE
                      00324         BTFSS   UP
                      00325         GOTO    CURSOR_UP_SUBMENU                               
                      00326         BTFSS   DOWN
                      00327         GOTO    CURSOR_DOWN_SUBMENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00328         BTFSS   ENTER
                      00329         GOTO    ENTER_SUBMENU
                      00330         BTFSS   EXIT
                      00331         GOTO    EXIT_SUBMENU
                      00332         ENDIF
                      00333 ;-----------------------------------------------------------------
Message[305]: Using default destination of 1 (file).
00BF   0B??           00334         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата     
00C0   2???           00335         GOTO    LOOP_SUBMENU                            ; Цикл ожидания нажатия в пункте меню
Message[305]: Using default destination of 1 (file).
00C1   0B??           00336         DECFSZ  TEMP_2  
00C2   2???           00337         GOTO    LOOP_SUBMENU
Message[305]: Using default destination of 1 (file).
00C3   0B??           00338         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
                                    
00C4   2???           00339         GOTO    LOOP_SUBMENU
00C5   2???           00340         GOTO    DRAW_MENU                                       ; Вышел таймаут нахождения в подменю, вы
                            ходим в меню
                      00341 ;-----------------------------------------------------------------
00C6                  00342 CURSOR_UP_SUBMENU                                               ; Была нажата клавиша "Вверх"
                      00343         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00344         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00345         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00346         ENDIF
                      00347 
                      00348         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & USE_RBIE
00C6   08??           00349         MOVFW   BUTTONS                                         ; При использовании RBIE
00C7   00??           00350         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора тут, иначе она будет 
                            потеряна при нажатии кнопки входа в подменю
                      00351         ENDIF
                      00352 
Message[305]: Using default destination of 1 (file).
00C8   03??           00353         DECF    INDEX_SUBMENU                           ; Уменьшаем индекс подменю
00C9   1F80           00354         BTFSS   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов подменю ограничено 64
00CA   2???           00355         GOTO    DRAW_SUBMENU            
00CB   03??           00356         DECF    NUM_OF_SUBMENU,W                        ; Если меньше <0
00CC   00??           00357         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
00CD   2???           00358         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню      
                      00359 ;-----------------------------------------------------------------
00CE                  00360 CURSOR_DOWN_SUBMENU                                             ; Была нажата клавиша "Вниз"
                      00361         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00362         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00363         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00364         ENDIF
                      00365 
                      00366         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & USE_RBIE
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CE   08??           00367         MOVFW   BUTTONS                                         ; При использовании RBIE
00CF   00??           00368         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора тут, иначе она будет 
                            потеряна при нажатии кнопки входа в подменю
                      00369         ENDIF
                      00370 
Message[305]: Using default destination of 1 (file).
00D0   0A??           00371         INCF    INDEX_SUBMENU                           ; Увеличиваем индекс подменю
00D1   08??           00372         MOVFW   NUM_OF_SUBMENU                          ; Берем количество пунктов в даном подменю      
00D2   02??           00373         SUBWF   INDEX_SUBMENU,W                         ; Достигли последнего ? 
00D3   1903           00374         BTFSC   STATUS,Z
00D4   01??           00375         CLRF    INDEX_SUBMENU                           ; Если да, делаем текущим первый подпункт меню  
                                    
00D5   2???           00376         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню
                      00377 ;-----------------------------------------------------------------      
00D6                  00378 EXIT_SUBMENU                                                    ; Была нажата клавиша "Выход"
                      00379         IF USE_MOVING_CURSOR & SAVE_CURSOR_POSITION
00D6   08??           00380         MOVFW   SAVE_POSITION
00D7   00??           00381         MOVWF   BUTTONS                                         ; Восстановим позицию курсора
                      00382         ENDIF
                      00383 
00D8   01??           00384         CLRF    INDEX_SUBMENU                           ; Обнуляем индекс пункта подменю, чтобы при след
                            ующем заходе в любой пункт меню курсор находился на 1 пункте подменю
00D9   2???           00385         GOTO    DRAW_MENU                                       ; Выходим в меню
                      00386 ;===================================================================================================
00DA                  00387 ENTER_SUBMENU                                                   ; Была нажата клавиша "Вход", осуществля
                            м вход в подпункт меню и выполняем его действие
                      00388 ;===================================================================================================
00DA   2???           00389         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
00DB   2???           00390         GOTO    SWITCH_ACTION                           ; Делаем действие текущего подпункта меню
00DC                  00391 END_ACTION
                      00392 ;-----------------------------------------------------------------
                      00393         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE   ; Рисуем подтверждение действия
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
00DC   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
00DD                      M                                         PRINT_LCD_STRING
00DD   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
00DE   39FF               M                                                 ANDLW   0FFH
00DF   1903               M                                                 BTFSC   STATUS,Z
00E0   2???               M                                                 GOTO    END_LCD_STRING          
00E1   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00E2   0A??               M                                                 INCF    SYMBOL_POINTER  
00E3   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
00E4                      M                                         END_LCD_STRING  
00E4   01??           00394         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
00E5   2???           00395         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
00E6   0B??           00396         DECFSZ  TEMP_3
00E7   2???           00397         GOTO    $-2
                      00398 ;-----------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00399         IF USE_MOVING_CURSOR & SAVE_CURSOR_POSITION & USE_RBIE
00E8   08??           00400         MOVFW   SAVE_POSITION                           ; При использовании RBIE
00E9   00??           00401         MOVWF   BUTTONS                                         ; Восстановим позицию курсора, так флаги
                             в buttons были изменены при входе в подменю
                      00402         ENDIF
                      00403 
00EA   2???           00404         GOTO    DRAW_SUBMENU                            ; И идем отрисовывать подпункт меню, курсор на т
                            ом же подпункте, что и был
                      00405 ;===================================================================================================
00EB                  00406 DEBOUNCE_DELAY                                                  ; Подпрограмма антидребезговой задержки
00EB   3003           00407         MOVLW   .3                                                      ; Количество проходов подбираетс
                            я экспериментальным путем
00EC   00??           00408         MOVWF   TEMP_2
00ED   01??           00409         CLRF    TEMP_1
00EE                  00410 LOOP_DELAY
00EE   0806           00411         MOVFW   PORTB                                           
00EF   380F           00412         IORLW   B'00001111'                                     ; Установим незначущие разряды
00F0   3E01           00413         ADDLW   .1
00F1   1D03 2???      00414         BNZ             DEBOUNCE_DELAY                          ; Если хоть одна кнопка нажата, начинаем
                             отсчет антидребезговой задержки заново
Message[305]: Using default destination of 1 (file).
00F3   0B??           00415         DECFSZ  TEMP_1  
00F4   2???           00416         GOTO    $-1
Message[305]: Using default destination of 1 (file).
00F5   0B??           00417         DECFSZ  TEMP_2  
00F6   2???           00418         GOTO    LOOP_DELAY
                      00419 
                      00420         IF      USE_RBIE
00F7   01??           00421         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
00F8   100B           00422         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания от кнопок
00F9   158B           00423         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00424         ENDIF
                      00425 
00FA   0008           00426         RETURN
                      00427 ;===================================================================================================
00FB                  00428 DRAW_MENU_ROUTINE                                               ; Подпрограмма отрисовки одного пункта м
                            еню
00FB   01??           00429         CLRF    SYMBOL_POINTER
00FC                  00430 LOOP_DRAW_MENU
00FC   2???           00431         CALL    MENU_TABLE
00FD   39FF           00432         ANDLW   0FFH
00FE   1903           00433         BTFSC   STATUS,Z
00FF   0008           00434         RETURN 
0100   2???           00435         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0101   0A??           00436         INCF    SYMBOL_POINTER  
0102   2???           00437         GOTO    LOOP_DRAW_MENU
                      00438 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
0103                  00439 DRAW_SUBMENU_ROUTINE                                    ; Подпрограмма отрисовки одного подпункта меню
0103   01??           00440         CLRF    SYMBOL_POINTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0104                  00441 LOOP_DRAW_SUBMENU
0104   2???           00442         CALL    SUBMENU_TABLE
0105   39FF           00443         ANDLW   0FFH
0106   1903           00444         BTFSC   STATUS,Z
0107   0008           00445         RETURN 
0108   2???           00446         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0109   0A??           00447         INCF    SYMBOL_POINTER  
010A   2???           00448         GOTO    LOOP_DRAW_SUBMENU
                      00449 ;===================================================================================================
010B                  00450 ZASTAVKA
010B   2???           00451         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00452         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_FIRST_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
010C   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
010D                      M                                         PRINT_LCD_STRING
010D   2???               M                                                 CALL    TABLE_ZASTAVKA_FIRST_STRING
010E   39FF               M                                                 ANDLW   0FFH
010F   1903               M                                                 BTFSC   STATUS,Z
0110   2???               M                                                 GOTO    END_LCD_STRING          
0111   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0112   0A??               M                                                 INCF    SYMBOL_POINTER  
0113   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
0114                      M                                         END_LCD_STRING  
                      00453         SECOND_LINE_MACRO
0114   30C0               M                                         MOVLW   SECOND_LINE     
0115   2???               M                                         CALL    SEND_LCD_COMMAND
                      00454         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_SECOND_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
0116   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
0117                      M                                         PRINT_LCD_STRING
0117   2???               M                                                 CALL    TABLE_ZASTAVKA_SECOND_STRING
0118   39FF               M                                                 ANDLW   0FFH
0119   1903               M                                                 BTFSC   STATUS,Z
011A   2???               M                                                 GOTO    END_LCD_STRING          
011B   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
011C   0A??               M                                                 INCF    SYMBOL_POINTER  
011D   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
011E                      M                                         END_LCD_STRING  
011E   2???           00455         GOTO    MAIN
                      00456 ;===================================================================================================
011F                  00457 SECOND_STRING_ROUTINE                                   ; Подпрограмма перевода указателя на 2-ю строку 
                      00458         IF      USE_STATIC_CURSOR
                      00459         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисуем курсор на последнем символе 1-й строки
                      00460         ENDIF
                      00461         SECOND_LINE_MACRO                                       ; Переводим указатель на 2-ю строку     
011F   30C0               M                                         MOVLW   SECOND_LINE     
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0120   2???               M                                         CALL    SEND_LCD_COMMAND
0121   0008           00462         RETURN                                                          ; И приступаем к отрисовке следу
                            ющего пункта меню
                      00463 ;===================================================================================================
0122                  00464 DRAW_CURSOR_ROUTINE                                             ; Процедура рисования курсора. В w лежит
                             адрес
0122   2???           00465         CALL    SEND_LCD_COMMAND
0123   303C           00466         MOVLW   '<'                                                     ; Нарисуем там курсор
0124   2???           00467         CALL    SEND_LCD_SYMBOL
0125   0008           00468         RETURN
                      00469 ;===================================================================================================
0126                  00470 TABLE_ZASTAVKA_FIRST_STRING
                      00471         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0126   08??               M                 MOVFW   SYMBOL_POINTER
0127   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0128   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0129   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
012A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
012B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
012C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
012D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
012E                      M         TABLE
012E   3420 3420 344D 00472         DT              ZASTAVKA_FIRST_STRING,0
       3469 3463 3472 
       346F 344D 3465 
       346E 3475 344C 
       3469 3462 3400 
013D                  00473 TABLE_ZASTAVKA_SECOND_STRING 
                      00474         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
013D   08??               M                 MOVFW   SYMBOL_POINTER
013E   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
013F   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0140   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0141   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0142   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0143   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0144   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0145                      M         TABLE
0145   3420 3420 3476 00475         DT              ZASTAVKA_SECOND_STRING,0
       3465 3472 3420 
       3431 342E 3430 
       3420 3462 3465 
       3474 3461 3400 
                      00476 ;===================================================================================================
0154                  00477 NUM_OF_SUBMENU_TABLE                                    
                      00478         RETLW_NUM_OF_SUBMENU_PUNKTS                     ; Макрос, возвращает количество подпунктов текущ
                            его пункта меню
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0154   08??               M                 MOVFW   INDEX_MENU
0155   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0156   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0157   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0158   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0159   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
015A   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
015B   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
015C                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
015C   3400               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
015D   3401               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
015E   3402               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
015F   3403               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
0160   3404               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00479 ;===================================================================================================
0161                  00480 MENU_TABLE
                      00481         GOTO_PUNKT_MENU                                         ; Макрос, создает переходы на все пункты
                             меню                                                   
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0161   08??               M                 MOVFW   INDEX_MENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0162   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0163   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0164   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0165   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0166   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0167   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0168   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0169                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
0169   2???               M                                         GOTO    MENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
016A   2???               M                                         GOTO    MENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
016B   2???               M                                         GOTO    MENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
016C   2???               M                                         GOTO    MENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
016D   2???               M                                         GOTO    MENU_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00482 ;---------------------------------------------------------------------------------------------------
016E                  00483 SUBMENU_TABLE
                      00484         GOTO_PUNKT_SUBMENU                                      ; Макрос, создает переходы на все подпун
                            кты меню
                          M                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
016E   08??               M                 MOVFW   INDEX_MENU
016F   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0170   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0171   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0172   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0173   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0174   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0175   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (TABLE)
0176                      M         TABLE
  0001                    M                                         LOCAL   C=1
                          M                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
0176   2???               M                                                 GOTO    MENU_1_TABLE
Warning[207]: Found label after column 1. (C)
  00000002                M                                                 C+=1
0177   2???               M                                                 GOTO    MENU_2_TABLE
Warning[207]: Found label after column 1. (C)
  00000003                M                                                 C+=1
0178   2???               M                                                 GOTO    MENU_3_TABLE
Warning[207]: Found label after column 1. (C)
  00000004                M                                                 C+=1
0179   2???               M                                                 GOTO    MENU_4_TABLE
Warning[207]: Found label after column 1. (C)
  00000005                M                                                 C+=1
017A   2???               M                                                 GOTO    MENU_5_TABLE
Warning[207]: Found label after column 1. (C)
  00000006                M                                                 C+=1
                          M                                         ENDW
  0001                    M                                         LOCAL   D=1
  0000                    M                                         LOCAL   A
                          M                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE)
017B                      M                                                 MENU_1_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
017B   08??               M                 MOVFW   INDEX_SUBMENU
017C   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
017D   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
017E   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
017F   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0180   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0181   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0182   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0183                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                          M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (MENU_2_TABLE)
0183                      M                                                 MENU_2_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0183   08??               M                 MOVFW   INDEX_SUBMENU
0184   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0185   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0186   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0187   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0188   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0189   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
018A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
018B                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
018B   2???               M                                                         GOTO    MENU_2_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE)
018C                      M                                                 MENU_3_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
018C   08??               M                 MOVFW   INDEX_SUBMENU
018D   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
018E   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
018F   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0190   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0191   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0192   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0193   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0194                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
0194   2???               M                                                         GOTO    MENU_3_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0195   2???               M                                                         GOTO    MENU_3_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE)
0196                      M                                                 MENU_4_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0196   08??               M                 MOVFW   INDEX_SUBMENU
0197   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0198   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0199   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
019A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
019B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
019C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
019D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
019E                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
019E   2???               M                                                         GOTO    MENU_4_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
019F   2???               M                                                         GOTO    MENU_4_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
01A0   2???               M                                                         GOTO    MENU_4_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE)
01A1                      M                                                 MENU_5_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01A1   08??               M                 MOVFW   INDEX_SUBMENU
01A2   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01A3   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01A4   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01A5   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01A6   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01A7   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01A8   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01A9                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
01A9   2???               M                                                         GOTO    MENU_5_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
01AA   2???               M                                                         GOTO    MENU_5_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
01AB   2???               M                                                         GOTO    MENU_5_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
01AC   2???               M                                                         GOTO    MENU_5_SUBMENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                 D+=1
                          M                                         ENDW    
                      00485 ;---------------------------------------------------------------------------------------------------
01AD                  00486 SWITCH_ACTION                                                   ; Выполним действие, на котором находитс
                            я курсор 
                      00487         GOTO_PUNKT_SUBMENU_ACTION                       ; Макрос, создает переходы на действия всех подп
                            унктов меню
                          M                                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
01AD   08??               M                 MOVFW   INDEX_MENU
01AE   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01AF   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01B0   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01B1   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01B2   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01B3   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01B4   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01B5                      M         TABLE
  0001                    M                                                         LOCAL   C=1
                          M                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
01B5   2???               M                                                                 GOTO    MENU_1_TABLE_ACTION
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (C)
  00000002                M                                                                 C+=1
01B6   2???               M                                                                 GOTO    MENU_2_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000003                M                                                                 C+=1
01B7   2???               M                                                                 GOTO    MENU_3_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000004                M                                                                 C+=1
01B8   2???               M                                                                 GOTO    MENU_4_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000005                M                                                                 C+=1
01B9   2???               M                                                                 GOTO    MENU_5_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000006                M                                                                 C+=1
                          M                                                         ENDW
  0001                    M                                                         LOCAL   D=1
  0000                    M                                                         LOCAL   A
                          M                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE_ACTION)
01BA                      M                                                                 MENU_1_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01BA   08??               M                 MOVFW   INDEX_SUBMENU
01BB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01BC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01BD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01BE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01BF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01C0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01C1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01C2                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                          M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE_ACTION)
01C2                      M                                                                 MENU_2_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01C2   08??               M                 MOVFW   INDEX_SUBMENU
01C3   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01C4   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01C5   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01C6   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01C7   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01C8   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01C9   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01CA                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
01CA   2???               M                                                                         GOTO    MENU_2_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE_ACTION)
01CB                      M                                                                 MENU_3_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01CB   08??               M                 MOVFW   INDEX_SUBMENU
01CC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01CD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01CE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01CF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01D0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01D1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01D2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01D3                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
01D3   2???               M                                                                         GOTO    MENU_3_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
01D4   2???               M                                                                         GOTO    MENU_3_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
                          M                                                                 ENDW
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (D)
  00000004                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE_ACTION)
01D5                      M                                                                 MENU_4_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01D5   08??               M                 MOVFW   INDEX_SUBMENU
01D6   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01D7   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01D8   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01D9   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01DA   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01DB   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01DC   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01DD                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
01DD   2???               M                                                                         GOTO    MENU_4_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
01DE   2???               M                                                                         GOTO    MENU_4_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
01DF   2???               M                                                                         GOTO    MENU_4_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE_ACTION)
01E0                      M                                                                 MENU_5_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01E0   08??               M                 MOVFW   INDEX_SUBMENU
01E1   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01E2   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01E3   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01E4   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ENDIF
01E5   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01E6   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01E7   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01E8                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
01E8   2???               M                                                                         GOTO    MENU_5_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
01E9   2???               M                                                                         GOTO    MENU_5_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
01EA   2???               M                                                                         GOTO    MENU_5_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
01EB   2???               M                                                                         GOTO    MENU_5_SUBMENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                                 D+=1
                          M                                                         ENDW
                      00488 ;===================================================================================================
                      00489         CREATE_MENU_NAMES                                       ; Макрос, создает имена всех пунктов мен
                            ю
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (MENU_1)
01EC                      M                                 MENU_1
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01EC   08??               M                 MOVFW   SYMBOL_POINTER
01ED   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01EE   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01EF   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01F0   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01F1   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01F2   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01F3   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01F4                      M         TABLE
01F4   3431 342E 344D     M                                         DT              MENU_NAME_1,0
       3465 346E 3475 
       345F 3431 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (MENU_2)
01FD                      M                                 MENU_2
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01FD   08??               M                 MOVFW   SYMBOL_POINTER
01FE   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01FF   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0200   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0201   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0202   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0203   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0204   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0205                      M         TABLE
0205   3432 342E 344D     M                                         DT              MENU_NAME_2,0
       3465 346E 3475 
       345F 3432 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_3)
020E                      M                                 MENU_3
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
020E   08??               M                 MOVFW   SYMBOL_POINTER
020F   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0210   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0211   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0212   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0213   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0214   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0215   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0216                      M         TABLE
0216   3433 342E 344D     M                                         DT              MENU_NAME_3,0
       3465 346E 3475 
       345F 3433 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4)
021F                      M                                 MENU_4
                          M                                         MOD_PCL SYMBOL_POINTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                    M                 LOCAL   TABLE
021F   08??               M                 MOVFW   SYMBOL_POINTER
0220   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0221   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0222   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0223   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0224   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0225   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0226   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0227                      M         TABLE
0227   3434 342E 344D     M                                         DT              MENU_NAME_4,0
       3465 346E 3475 
       345F 3434 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5)
0230                      M                                 MENU_5
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0230   08??               M                 MOVFW   SYMBOL_POINTER
0231   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0232   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0233   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0234   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0235   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0236   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0237   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0238                      M         TABLE
0238   3435 342E 344D     M                                         DT              MENU_NAME_5,0
       3465 346E 3475 
       345F 3435 3400 
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00490 ;===================================================================================================
                      00491         CREATE_SUBMENU_NAMES                            ; Макрос, создает имена всех подпунктов меню
  0001                    M                                 LOCAL   D=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ; Подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                         MENU_#V(D)_SUBMENU_#V(A)
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                          M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
Warning[207]: Found label after column 1. (MENU_2_SUBMENU_1)
0241                      M                                         MENU_2_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0241   08??               M                 MOVFW   SYMBOL_POINTER
0242   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0243   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0244   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0245   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0246   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0247   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0248   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0249                      M         TABLE
0249   3432 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_2_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ; Подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_1)
0252                      M                                         MENU_3_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0252   08??               M                 MOVFW   SYMBOL_POINTER
0253   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0254   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0255   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0256   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0257   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0258   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0259   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
025A                      M         TABLE
025A   3433 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_3_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_2)
0263                      M                                         MENU_3_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0263   08??               M                 MOVFW   SYMBOL_POINTER
0264   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0265   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0266   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0267   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0268   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0269   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
026A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
026B                      M         TABLE
026B   3433 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_3_2,0
       342E 3453 3475 
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_1)
0274                      M                                         MENU_4_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0274   08??               M                 MOVFW   SYMBOL_POINTER
0275   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0276   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0277   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0278   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0279   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
027A   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
027B   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
027C                      M         TABLE
027C   3434 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_4_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_2)
0285                      M                                         MENU_4_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0285   08??               M                 MOVFW   SYMBOL_POINTER
0286   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0287   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0288   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0289   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
028A   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
028B   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
028C   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
028D                      M         TABLE
028D   3434 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_4_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_3)
0296                      M                                         MENU_4_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0296   08??               M                 MOVFW   SYMBOL_POINTER
0297   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0298   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0299   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
029A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
029B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
029C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
029D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
029E                      M         TABLE
029E   3434 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_4_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_1)
02A7                      M                                         MENU_5_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02A7   08??               M                 MOVFW   SYMBOL_POINTER
02A8   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02A9   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02AA   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02AB   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02AC   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02AD   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02AE   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02AF                      M         TABLE
02AF   3435 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_5_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_2)
02B8                      M                                         MENU_5_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02B8   08??               M                 MOVFW   SYMBOL_POINTER
02B9   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02BA   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02BB   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02BC   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02BD   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02BE   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02BF   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02C0                      M         TABLE
02C0   3435 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_5_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_3)
02C9                      M                                         MENU_5_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02C9   08??               M                 MOVFW   SYMBOL_POINTER
02CA   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02CB   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         IF      USE_SHORT_MOD_PCL
02CC   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02CD   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02CE   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02CF   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02D0   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02D1                      M         TABLE
02D1   3435 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_5_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_4)
02DA                      M                                         MENU_5_SUBMENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02DA   08??               M                 MOVFW   SYMBOL_POINTER
02DB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02DC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02DD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02DE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02DF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02E0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02E1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02E2                      M         TABLE
02E2   3435 342E 3434     M                                                 DT              MENU_SUBMENU_NAME_5_4,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_6_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_7_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_8_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00492 ;===================================================================================================
                      00493         INCLUDE MENU_ACTIONS.ASM
Warning[205]: Found directive in column 1. (IF)
                      00001 IF      USE_MENU_ACTION
02EB                  00002 MENU_ACTION
                      00003         GOTO_MENU_ACTION
                          M                                         MOD_PCL INDEX_MENU                      
  0000                    M                 LOCAL   TABLE
02EB   08??               M                 MOVFW   INDEX_MENU
02EC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02ED   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02EE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02EF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02F0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02F1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02F2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02F3                      M         TABLE
  0001                    M                                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
02F3   2???               M                                         GOTO    MENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
02F4   2???               M                                         GOTO    MENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
02F5   2???               M                                         GOTO    MENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
02F6   2???               M                                         GOTO    MENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
02F7   2???               M                                         GOTO    MENU_5_ACTION
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00004 ;===================================================================================================
02F8                  00005 MENU_1_ACTION                                                   ; Выполняем действие 1 пункта меню
02F8   2???           00006         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00007         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
02F9   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
02FA                      M                                         PRINT_LCD_STRING
02FA   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
02FB   39FF               M                                                 ANDLW   0FFH
02FC   1903               M                                                 BTFSC   STATUS,Z
02FD   2???               M                                                 GOTO    END_LCD_STRING          
02FE   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
02FF   0A??               M                                                 INCF    SYMBOL_POINTER  
0300   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
0301                      M                                         END_LCD_STRING  
0301   01??           00008         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
0302   2???           00009         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
0303   0B??           00010         DECFSZ  TEMP_3
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0304   2???           00011         GOTO    $-2
0305   2???           00012         GOTO    END_MENU_ACTION
0306                  00013 MENU_2_ACTION                                                   ; Выполняем действие 2 пункта меню
                      00014 ;       nop
0306   2???           00015         GOTO    END_MENU_ACTION
0307                  00016 MENU_3_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00017 ;       nop
0307   2???           00018         GOTO    END_MENU_ACTION
0308                  00019 MENU_4_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00020 ;       nop
0308   2???           00021         GOTO    END_MENU_ACTION
0309                  00022 MENU_5_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00023 ;       nop
0309   2???           00024         GOTO    END_MENU_ACTION
030A                  00025 MENU_6_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00026 ;       nop
030A   2???           00027         GOTO    END_MENU_ACTION
030B                  00028 MENU_7_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00029 ;       nop
030B   2???           00030         GOTO    END_MENU_ACTION
030C                  00031 MENU_8_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00032 ;       nop
030C   2???           00033         GOTO    END_MENU_ACTION
Warning[205]: Found directive in column 1. (ENDIF)
                      00034 ENDIF
                      00035 ;===================================================================================================
030D                  00036 MENU_1_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 1 пункта
                      00037 ;       nop
030D   2???           00038         GOTO    END_ACTION
030E                  00039 MENU_1_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 1 пункта
                      00040 ;       nop
030E   2???           00041         GOTO    END_ACTION
030F                  00042 MENU_1_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 1 пункта
                      00043 ;       nop
030F   2???           00044         GOTO    END_ACTION
                      00045 ;---------------------------------------------------------------------------------------------------
0310                  00046 MENU_2_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 2 пункта
                      00047 ;       nop
0310   2???           00048         GOTO    END_ACTION
0311                  00049 MENU_2_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 2 пункта
                      00050 ;       nop
0311   2???           00051         GOTO    END_ACTION
0312                  00052 MENU_2_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 2 пункта
                      00053 ;       nop
0312   2???           00054         GOTO    END_ACTION
                      00055 ;---------------------------------------------------------------------------------------------------
0313                  00056 MENU_3_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 3 пункта
                      00057 ;       nop
0313   2???           00058         GOTO    END_ACTION
0314                  00059 MENU_3_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 3 пункта
                      00060 ;       nop
0314   2???           00061         GOTO    END_ACTION
0315                  00062 MENU_3_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 3 пункта
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00063 ;       nop
0315   2???           00064         GOTO    END_ACTION
                      00065 ;---------------------------------------------------------------------------------------------------
0316                  00066 MENU_4_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 4 пункта
                      00067 ;       nop
0316   2???           00068         GOTO    END_ACTION
0317                  00069 MENU_4_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 4 пункта
                      00070 ;       nop
0317   2???           00071         GOTO    END_ACTION
0318                  00072 MENU_4_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 4 пункта
                      00073 ;       nop
0318   2???           00074         GOTO    END_ACTION                                                              
                      00075 ;---------------------------------------------------------------------------------------------------
0319                  00076 MENU_5_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 5 пункта
                      00077 ;       nop
0319   2???           00078         GOTO    END_ACTION
031A                  00079 MENU_5_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00080 ;       nop
031A   2???           00081         GOTO    END_ACTION
031B                  00082 MENU_5_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 5 пункта
                      00083 ;       nop
031B   2???           00084         GOTO    END_ACTION
031C                  00085 MENU_5_SUBMENU_4_ACTION                                 ; Выполняем действие 4 подпункта 5 пункта
                      00086 ;       nop
031C   2???           00087         GOTO    END_ACTION
                      00088 ;---------------------------------------------------------------------------------------------------
                      00494 ;===================================================================================================
                      00495         END
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 47


SYMBOL TABLE
  LABEL                             VALUE 

ACTIONS_MENU_FLAGS                B'00000001'
ADD_PCL                           
BUTTONS                           00000005
BUTTON_HEANDLER                   
C                                 00000000
CHECK_1                           00000020
CHECK_2                           00000085
CHECK_BUTTONS_MACRO               
CLR_DISP                          00000001
CLR_DISPLAY_ROUTINE               00000000
CLR_RAM_MACRO                     
CNTL_TRIS_MASK                    000000F5
CORRECT_INDEX_MENU                00000034
CORRECT_INDEX_MENU_2              00000040
CORRECT_INDEX_SUBMENU             0000009E
CORRECT_INDEX_SUBMENU_2           000000AA
CREATE_MENU_NAMES                 
CREATE_SUBMENU_NAMES              
CREATE_SUBMENU_NAMES_             
CURSOR_DOWN_MENU                  00000064
CURSOR_DOWN_SUBMENU               000000CE
CURSOR_UP_MENU                    0000005C
CURSOR_UP_SUBMENU                 000000C6
DC                                00000001
DD_RAM_ADDR                       00000080
DD_RAM_UL                         00000080
DEBOUNCE_DELAY                    000000EB
DELAY_4MS                         00000000
DISP_OFF                          00000008
DISP_ON                           0000000C
DISP_ON_B                         0000000F
DISP_ON_C                         0000000E
DOWN                              PORTB,5
DRAW_CURSOR                       
DRAW_CURSOR_ROUTINE               00000122
DRAW_MENU                         0000001A
DRAW_MENU_ROUTINE                 000000FB
DRAW_SUBMENU                      0000007F
DRAW_SUBMENU_ROUTINE              00000103
E                                 00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
END_ACTION                        000000DC
END_MENU_ACTION                   00000079
ENTER                             PORTB,6
ENTER_MENU                        0000006E
ENTER_SUBMENU                     000000DA
ENTRY_DEC                         00000004
ENTRY_DEC_S                       00000005
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

ENTRY_INC                         00000006
ENTRY_INC_S                       00000007
EXIT                              PORTB,7
EXIT_DELAY                        .20
EXIT_MENU                         0000006C
EXIT_SUBMENU                      000000D6
F                                 00000001
FIRST_LINE                        00000080
FIRST_LINE_MACRO                  
FSR                               00000004
GIE                               00000007
GOTO_MENU_ACTION                  
GOTO_PUNKT_MENU                   
GOTO_PUNKT_SUBMENU                
GOTO_PUNKT_SUBMENU_ACTION         
INDEX_MENU                        00000000
INDEX_SUBMENU                     00000001
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
KNOWN_ZERO                        00000000
LAST_SYMBOL_FIRST_LINE            0000008F
LAST_SYMBOL_SECOND_LINE           000000CF
LCD_CNTL                          00000005
LCD_CNTL_TRIS                     00000085
LCD_DATA                          00000006
LCD_DATA_TRIS                     00000086
LOOP_1                            00000072
LOOP_DELAY                        000000EE
LOOP_DRAW_MENU                    000000FC
LOOP_DRAW_SUBMENU                 00000104
LOOP_MENU                         0000004D
LOOP_SUBMENU                      000000B7
MAIN                              00000000
MENU_1                            000001EC
MENU_1_ACTION                     000002F8
MENU_1_SUBMENU_1_ACTION           0000030D
MENU_1_SUBMENU_2_ACTION           0000030E
MENU_1_SUBMENU_3_ACTION           0000030F
MENU_1_TABLE                      0000017B
MENU_1_TABLE_ACTION               000001BA
MENU_2                            000001FD
MENU_2_ACTION                     00000306
MENU_2_SUBMENU_1                  00000241
MENU_2_SUBMENU_1_ACTION           00000310
MENU_2_SUBMENU_2_ACTION           00000311
MENU_2_SUBMENU_3_ACTION           00000312
MENU_2_TABLE                      00000183
MENU_2_TABLE_ACTION               000001C2
MENU_3                            0000020E
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

MENU_3_ACTION                     00000307
MENU_3_SUBMENU_1                  00000252
MENU_3_SUBMENU_1_ACTION           00000313
MENU_3_SUBMENU_2                  00000263
MENU_3_SUBMENU_2_ACTION           00000314
MENU_3_SUBMENU_3_ACTION           00000315
MENU_3_TABLE                      0000018C
MENU_3_TABLE_ACTION               000001CB
MENU_4                            0000021F
MENU_4_ACTION                     00000308
MENU_4_SUBMENU_1                  00000274
MENU_4_SUBMENU_1_ACTION           00000316
MENU_4_SUBMENU_2                  00000285
MENU_4_SUBMENU_2_ACTION           00000317
MENU_4_SUBMENU_3                  00000296
MENU_4_SUBMENU_3_ACTION           00000318
MENU_4_TABLE                      00000196
MENU_4_TABLE_ACTION               000001D5
MENU_5                            00000230
MENU_5_ACTION                     00000309
MENU_5_SUBMENU_1                  000002A7
MENU_5_SUBMENU_1_ACTION           00000319
MENU_5_SUBMENU_2                  000002B8
MENU_5_SUBMENU_2_ACTION           0000031A
MENU_5_SUBMENU_3                  000002C9
MENU_5_SUBMENU_3_ACTION           0000031B
MENU_5_SUBMENU_4                  000002DA
MENU_5_SUBMENU_4_ACTION           0000031C
MENU_5_TABLE                      000001A1
MENU_5_TABLE_ACTION               000001E0
MENU_6_ACTION                     0000030A
MENU_7_ACTION                     0000030B
MENU_8_ACTION                     0000030C
MENU_ACTION                       000002EB
MENU_COUNTER                      00000004
MENU_HEANDLER                     00000019
MENU_NAME_1                       "1.Menu_1"
MENU_NAME_2                       "2.Menu_2"
MENU_NAME_3                       "3.Menu_3"
MENU_NAME_4                       "4.Menu_4"
MENU_NAME_5                       "5.Menu_5"
MENU_NAME_6                       "6.Menu_6"
MENU_SUBMENU_NAME_1_1             "1.1.Subm"
MENU_SUBMENU_NAME_1_2             "1.2.Subm"
MENU_SUBMENU_NAME_1_3             "1.3.Subm"
MENU_SUBMENU_NAME_1_4             "1.4.Subm"
MENU_SUBMENU_NAME_2_1             "2.1.Subm"
MENU_SUBMENU_NAME_2_2             "2.2.Subm"
MENU_SUBMENU_NAME_2_3             "2.3.Subm"
MENU_SUBMENU_NAME_2_4             "2.4.Subm"
MENU_SUBMENU_NAME_3_1             "3.1.Subm"
MENU_SUBMENU_NAME_3_2             "3.2.Subm"
MENU_SUBMENU_NAME_3_3             "3.3.Subm"
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

MENU_SUBMENU_NAME_3_4             "3.4.Subm"
MENU_SUBMENU_NAME_4_1             "4.1.Subm"
MENU_SUBMENU_NAME_4_2             "4.2.Subm"
MENU_SUBMENU_NAME_4_3             "4.3.Subm"
MENU_SUBMENU_NAME_4_4             "4.4.Subm"
MENU_SUBMENU_NAME_5_1             "5.1.Subm"
MENU_SUBMENU_NAME_5_2             "5.2.Subm"
MENU_SUBMENU_NAME_5_3             "5.3.Subm"
MENU_SUBMENU_NAME_5_4             "5.4.Subm"
MENU_TABLE                        00000161
MICROMENU_INIT                    
MOD_PCL                           
N                                 00000000
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
NUM_OF_MAIN_MENU_PUNKTS           .5
NUM_OF_SUBMENU                    00000002
NUM_OF_SUBMENU_PUNKTS_1           .0
NUM_OF_SUBMENU_PUNKTS_2           .1
NUM_OF_SUBMENU_PUNKTS_3           .2
NUM_OF_SUBMENU_PUNKTS_4           .3
NUM_OF_SUBMENU_PUNKTS_5           .4
NUM_OF_SUBMENU_TABLE              00000154
OFFSET                            00000000
ONLY_WRITE                        00000001
OPTION_REG                        00000081
PCL                               00000002
PCLATH                            0000000A
POP                               
PORTA                             00000005
PORTB                             00000006
PRESSING_DOWN                     00000039
PRESSING_DOWN_2                   000000A3
PRESS_DOWN                        BUTTONS,1
PRESS_ENTER                       BUTTONS,3
PRESS_EXIT                        BUTTONS,2
PRESS_UP                          BUTTONS,0
PRINT_LCD_STRING_MACRO            
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PUSH                              
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RETLW_NUM_OF_SUBMENU_PUNKTS       
ROTATE_ACTION_MENU_FLAGS          00000077
RP0                               00000005
RP1                               00000006
RS                                00000003
SAVE_CURSOR_POSITION              1
SAVE_POSITION                     00000009
SECOND_LINE                       000000C0
SECOND_LINE_MACRO                 
SECOND_STRING_ROUTINE             0000011F
SEND_LCD_COMMAND                  00000000
SEND_LCD_SYMBOL                   00000000
SKIP_CHECK_1                      00000025
SKIP_CHECK_2                      0000008B
SKIP_CORRECT_INDEX_MENU_2         00000045
SKIP_CORRECT_INDEX_MENU_3         00000048
SKIP_CORRECT_INDEX_SUBMENU_2      000000AF
SKIP_CORRECT_INDEX_SUBMENU_3      000000B2
STATUS                            00000003
SUBMENU_TABLE                     0000016E
SWITCH_ACTION                     000001AD
SYMBOL_POINTER                    00000003
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TABLE_ACTION_COMPLETE             00000000
TABLE_ZASTAVKA_FIRST_STRING       00000126
TABLE_ZASTAVKA_SECOND_STRING      0000013D
TEMP_1                            00000006
TEMP_2                            00000007
TEMP_3                            00000008
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
MPASM  5.51                 MICROMENU_LIB.ASM   12-24-2018  10:37:54         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
UP                                PORTB,4
USE_4_BIT_MODE                    00000001
USE_HIGH_NIBLE                    00000000
USE_MENU_ACTION                   1
USE_MOVING_CURSOR                 1
USE_ONE_PORT                      00000000
USE_RBIE                          1
USE_SHORT_MOD_PCL                 1
USE_STATIC_CURSOR                 0
USE_TOP_LAST_CURSOR               1
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Y                                 00000001
Z                                 00000002
ZASTAVKA                          0000010B
ZASTAVKA_FIRST_STRING             "  MicroMenuLib"
ZASTAVKA_SECOND_STRING            "  ver 1.0 beta"
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_MICROMENU_00E7                   000000E7
_MICROMENU_00F4                   000000F4
_MICROMENU_0304                   00000304
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001

Errors   :     0
Warnings :   162 reported,     0 suppressed
Messages :    31 reported,     0 suppressed

