MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         INCLUDE MICROMENU_LIB.H
                      00001 ; Микроменю на базе двухстрочного индикатора HD44780 и четырехпозиционного джойстика (крестовины кнопок)
                      00002 
Warning[205]: Found directive in column 1. (INCLUDE)
                      00003 INCLUDE HARDWARE_PROFILE.INC
                      00001         #INCLUDE P16F84.INC
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F84 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00206         LIST
                      00002 ;       list p=16f84
Warning[205]: Found directive in column 1. (INCLUDE)
                      00004 INCLUDE MACRO.H 
                      00001 #DEFINE USE_SHORT_MOD_PCL       1       ; Использовать "укороченную" версию макроса модификации PCL, поз
                            воляет экономить 1 слово памяти на каждом вызове макроса ценой 1 лишней ячейки ОЗУ
                      00002 
                      00003 PUSH    MACRO
                      00004                 MOVWF   W_TEMP
                      00005                 SWAPF   STATUS,W
                      00006                 MOVWF   STATUS_TEMP
                      00007                 ENDM
                      00008 
                      00009 POP             MACRO
                      00010                 SWAPF   STATUS_TEMP,W
                      00011                 MOVWF   STATUS
                      00012                 SWAPF   W_TEMP,F
                      00013                 SWAPF   W_TEMP,W
                      00014                 ENDM
                      00015 
                      00016 CLR_RAM_MACRO   MACRO
                      00017                                 MOVLW   4FH             ; end of RAM
                      00018                                 MOVWF   FSR
                      00019                         CLR_RAM 
                      00020                                 CLRF    INDF
                      00021                                 DECF    FSR
                      00022                                 MOVFW   FSR
                      00023                                 SUBLW   0CH-1   ; start RAM
                      00024                                 BNZ             CLR_RAM
                      00025                                 ENDM
                      00026 
                      00027 MOD_PCL MACRO   TARGET                  ; Макрос, позволяет размещать таблицы на границах страниц
                      00028                 LOCAL   TABLE
                      00029                 MOVFW   TARGET
                      00030                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
                      00031                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                      00032         IF      USE_SHORT_MOD_PCL
                      00033                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
                      00034                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00035         ELSE
                      00036                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                      00037                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                      00038                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                      00039         ENDIF
                      00040                 MOVWF   PCLATH                  ; Установить старшую часть адреса
                      00041                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
                      00042                 MOVWF   PCL                             ; Установить младшую часть адреса
                      00043         TABLE
                      00044                 ENDM
                      00045 
                      00046 ADD_PCL MACRO   TARGET,ADDRESS  ; Макрос, позволяет удобно указывать страницу для следующего за ним кода
                      00047                                 MOVFW   TARGET  
                      00048                                 CLRF    PCLATH
                      00049                         IF      (ADDRESS==0X100)
                      00050                                 BSF             PCLATH,0
                      00051                         ENDIF
                      00052                         IF      (ADDRESS==0X200)
                      00053                                 BSF             PCLATH,1
                      00054                         ENDIF
                      00055                         IF      (ADDRESS==0X300)
                      00056                                 BSF             PCLATH,0                                
                      00057                                 BSF             PCLATH,1
                      00058                         ENDIF
                      00059                         IF      (ADDRESS==0X400)
                      00060                                 BSF             PCLATH,2                                
                      00061                         ENDIF
                      00062                                 ADDWF   PCL
                      00063                                 ENDM
                      00005 
                      00006 #DEFINE USE_STATIC_CURSOR               0                               ; Всегда рисовать курсор в конце
                             1-й строки
                      00007 #DEFINE USE_MOVING_CURSOR               1                               ; Использовать перемещаемый курс
                            ор (повышает удобство использования меню и размер прошивки)
Warning[205]: Found directive in column 1. (IF)
                      00008 IF      USE_MOVING_CURSOR
                      00009 #DEFINE SAVE_CURSOR_POSITION    1                               ; Сохранять позицию курсора при входе в 
                            подменю, и восстанавливать ее при выходе в главное меню
                      00010 #DEFINE USE_TOP_LAST_CURSOR             1                               ; Использовать отображение "перв
                            ый пункт всегда сверху" и "последний пункт всегда снизу" (повышает удобство использования меню и
Warning[205]: Found directive in column 1. (ENDIF)
                      00011 ENDIF
                      00012 #DEFINE USE_MENU_ACTION                 1                               ; Использовать возможность запус
                            ка действий при входе в пункт меню
                      00013 #DEFINE USE_RBIE                                0                               ; Использовать прерывани
                            е по изминению состояния PORTB для обработки кнопок (позволяет использовать сон)
                      00014 
Warning[205]: Found directive in column 1. (IF)
                      00015 IF      USE_MENU_ACTION 
                      00016 #DEFINE ACTIONS_MENU_FLAGS              B'00000001'             ; Выставленный бит - есть действие при в
                            ходе в этот пункт меню (не забыть заполнить обработчик действия)
Warning[205]: Found directive in column 1. (ENDIF)
                      00017 ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00018 
                      00019 #DEFINE UP                                              PORTB,4
                      00020 #DEFINE DOWN                                    PORTB,5
                      00021 #DEFINE ENTER                                   PORTB,6
                      00022 #DEFINE EXIT                                    PORTB,7
                      00023 
                      00024 #DEFINE PRESS_UP                                FLAGS,0
                      00025 #DEFINE PRESS_DOWN                              FLAGS,1
                      00026 #DEFINE PRESS_EXIT                              FLAGS,2
                      00027 #DEFINE PRESS_ENTER                             FLAGS,3 
                      00028 
                      00029 ;#define        ZUMER                                   PORTA,0
                      00030 
                      00031 #DEFINE EXIT_DELAY                              .20                             ; Количество опросов кно
                            пок, до выхода в предыдущий уровень (* 0,8 сек)
                      00032 
                      00033 #DEFINE ZASTAVKA_FIRST_STRING   "  MicroMenuLib"
                      00034 #DEFINE ZASTAVKA_SECOND_STRING  "  ver 1.0 beta"
                      00035 
                      00036 #DEFINE NUM_OF_MAIN_MENU_PUNKTS .6                              ; Количество пунктов меню, до 10 
                      00037 
                      00038 #DEFINE MENU_NAME_1                             "1.Menu_1"
                      00039 #DEFINE MENU_NAME_2                             "2.Menu_2"
                      00040 #DEFINE MENU_NAME_3                             "3.Menu_3"
                      00041 #DEFINE MENU_NAME_4                             "4.Menu_4"
                      00042 #DEFINE MENU_NAME_5                             "5.Menu_5"
                      00043 #DEFINE MENU_NAME_6                             "6.Menu_6"      
                      00044 
                      00045 #DEFINE NUM_OF_SUBMENU_PUNKTS_1 .0                              ; Количество подпунктов каждого пункта м
                            еню, до 8
                      00046 
                      00047 #DEFINE MENU_SUBMENU_NAME_1_1   "1.1.Subm"
                      00048 #DEFINE MENU_SUBMENU_NAME_1_2   "1.2.Subm"
                      00049 #DEFINE MENU_SUBMENU_NAME_1_3   "1.3.Subm"
                      00050 #DEFINE MENU_SUBMENU_NAME_1_4   "1.4.Subm"
                      00051 
                      00052 #DEFINE NUM_OF_SUBMENU_PUNKTS_2 .1
                      00053 
                      00054 #DEFINE MENU_SUBMENU_NAME_2_1   "2.1.Subm"
                      00055 #DEFINE MENU_SUBMENU_NAME_2_2   "2.2.Subm"
                      00056 #DEFINE MENU_SUBMENU_NAME_2_3   "2.3.Subm"
                      00057 #DEFINE MENU_SUBMENU_NAME_2_4   "2.4.Subm"
                      00058                                 
                      00059 #DEFINE NUM_OF_SUBMENU_PUNKTS_3 .2
                      00060 
                      00061 #DEFINE MENU_SUBMENU_NAME_3_1   "3.1.Subm"
                      00062 #DEFINE MENU_SUBMENU_NAME_3_2   "3.2.Subm"
                      00063 #DEFINE MENU_SUBMENU_NAME_3_3   "3.3.Subm"
                      00064 #DEFINE MENU_SUBMENU_NAME_3_4   "3.4.Subm"
                      00065 
                      00066 #DEFINE NUM_OF_SUBMENU_PUNKTS_4 .3
                      00067 
                      00068 #DEFINE MENU_SUBMENU_NAME_4_1   "4.1.Subm"
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00069 #DEFINE MENU_SUBMENU_NAME_4_2   "4.2.Subm"
                      00070 #DEFINE MENU_SUBMENU_NAME_4_3   "4.3.Subm"
                      00071 #DEFINE MENU_SUBMENU_NAME_4_4   "4.4.Subm"
                      00072 
                      00073 #DEFINE NUM_OF_SUBMENU_PUNKTS_5 .4
                      00074 
                      00075 #DEFINE MENU_SUBMENU_NAME_5_1   "5.1.Subm"
                      00076 #DEFINE MENU_SUBMENU_NAME_5_2   "5.2.Subm"
                      00077 #DEFINE MENU_SUBMENU_NAME_5_3   "5.3.Subm"
                      00078 #DEFINE MENU_SUBMENU_NAME_5_4   "5.4.Subm"
                      00079 
                      00080 #DEFINE NUM_OF_SUBMENU_PUNKTS_6 .3
                      00081 
                      00082 #DEFINE MENU_SUBMENU_NAME_6_1   "6.1.Subm"
                      00083 #DEFINE MENU_SUBMENU_NAME_6_2   "6.2.Subm"
                      00084 #DEFINE MENU_SUBMENU_NAME_6_3   "6.3.Subm"
                      00085 #DEFINE MENU_SUBMENU_NAME_6_4   "6.4.Subm"
                      00086 ;=======================================================================================================
                            =========
                      00087 CREATE_MENU_NAMES       MACRO                           ; Макрос, создает имена всех пунктов меню
                      00088                         LOCAL   A=1
                      00089                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00090                                 MENU_#V(A)
                      00091                                         MOD_PCL SYMBOL_POINTER
                      00092                                         DT              MENU_NAME_#V(A),0
                      00093                                         A+=1
                      00094                                 ENDW
                      00095                         ENDM
                      00096 ;=======================================================================================================
                            =========
                      00097 RETLW_NUM_OF_SUBMENU_PUNKTS     MACRO           ; Макрос, возвращает количество пунктов нужного подменю
                      00098                                 MOD_PCL INDEX_MENU
                      00099                         LOCAL   A=1
                      00100                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00101                                         RETLW   NUM_OF_SUBMENU_PUNKTS_#V(A)
                      00102                                         A+=1
                      00103                                 ENDW
                      00104                         ENDM
                      00105 ;=======================================================================================================
                            =========
                      00106 GOTO_PUNKT_MENU MACRO                                   ; Макрос, создает переходы на все пункты меню
                      00107                                 MOD_PCL INDEX_MENU
                      00108                         LOCAL   A=1
                      00109                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00110                                         GOTO    MENU_#V(A)
                      00111                                         A+=1
                      00112                                 ENDW
                      00113                         ENDM
                      00114 ;=======================================================================================================
                            =========
                      00115 GOTO_PUNKT_SUBMENU      MACRO                           ; Макрос, создает переходы на имена всех подпунк
                            тов меню
                      00116                                         MOD_PCL INDEX_MENU                              
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00117                                         LOCAL   C=1
                      00118                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00119                                                 GOTO    MENU_#V(C)_TABLE
                      00120                                                 C+=1
                      00121                                         ENDW
                      00122                                         LOCAL   D=1
                      00123                                         LOCAL   A
                      00124                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00125                                                 A=1     
                      00126                                                 MENU_#V(D)_TABLE
                      00127                                                 MOD_PCL INDEX_SUBMENU
                      00128                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00129                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                      00130                                                         A+=1
                      00131                                                 ENDW
                      00132                                                 D+=1
                      00133                                         ENDW    
                      00134                                         ENDM
                      00135 ;=======================================================================================================
                            =========
                      00136 GOTO_PUNKT_SUBMENU_ACTION       MACRO           ; Макрос, создает переходы на действия всех подпунктов м
                            еню
                      00137                                                         MOD_PCL INDEX_MENU                              
                      00138                                                         LOCAL   C=1
                      00139                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00140                                                                 GOTO    MENU_#V(C)_TABLE_ACTION
                      00141                                                                 C+=1
                      00142                                                         ENDW
                      00143                                                         LOCAL   D=1
                      00144                                                         LOCAL   A
                      00145                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00146                                                                 A=1     
                      00147                                                                 MENU_#V(D)_TABLE_ACTION
                      00148                                                                 MOD_PCL INDEX_SUBMENU
                      00149                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00150                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                      00151                                                                         A+=1
                      00152                                                                 ENDW
                      00153                                                                 D+=1
                      00154                                                         ENDW
                      00155                                                         ENDM
                      00156 ;=======================================================================================================
                            =========
                      00157 CREATE_SUBMENU_NAMES_   MACRO                           ; Не работающий макрос создания имен всех подпун
                            ктов меню :(
                      00158                                                 LOCAL   D=1
                      00159                                                 LOCAL   A       
                      00160                                                 WHILE   D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00161                                                         A=1
                      00162                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1         
                                                                    
                      00163                                                                 MENU_#V(D)_SUBMENU_#V(A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00164                                                                 MOD_PCL SYMBOL_POINTER
                      00165                                                                 DT      MENU_SUBMENU_NAME_#V(D)_#V(A),0
                      00166                                                                 A+=1
                      00167                                                         ENDW
                      00168                                                         D+=1
                      00169                                                 ENDW
                      00170                                                 ENDM
                      00171 ;=======================================================================================================
                            =========
                      00172 CREATE_SUBMENU_NAMES    MACRO                           ; Макрос, создает имена всех подпунктов меню
                      00173                                 LOCAL   D=1
                      00174 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00175 ; Подпункты 1 пункта меню
                      00176 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00177                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00178                                 LOCAL   A=1     
                      00179                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00180                                         MENU_#V(D)_SUBMENU_#V(A)
                      00181                                                 MOD_PCL SYMBOL_POINTER
                      00182                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                      00183                                         A+=1
                      00184                                 ENDW
                      00185                                         D+=1
                      00186                                 ENDIF
                      00187 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00188 ; Подпункты 2 пункта меню
                      00189 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00190                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00191                                 LOCAL   A=1     
                      00192                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00193                                         MENU_#V(D)_SUBMENU_#V(A)
                      00194                                                 MOD_PCL SYMBOL_POINTER
                      00195                                                 DT              MENU_SUBMENU_NAME_2_#V(A),0
                      00196                                         A+=1
                      00197                                 ENDW
                      00198                                         D+=1
                      00199                                 ENDIF
                      00200 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00201 ; Подпункты 3 пункта меню
                      00202 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00203                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00204                                 LOCAL   A=1     
                      00205                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00206                                         MENU_#V(D)_SUBMENU_#V(A)
                      00207                                                 MOD_PCL SYMBOL_POINTER
                      00208                                                 DT              MENU_SUBMENU_NAME_3_#V(A),0
                      00209                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00210                                 ENDW
                      00211                                         D+=1
                      00212                                 ENDIF
                      00213 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00214 ; Подпункты 4 пункта меню
                      00215 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00216                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00217                                 LOCAL   A=1     
                      00218                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00219                                         MENU_#V(D)_SUBMENU_#V(A)
                      00220                                                 MOD_PCL SYMBOL_POINTER
                      00221                                                 DT              MENU_SUBMENU_NAME_4_#V(A),0
                      00222                                         A+=1
                      00223                                 ENDW
                      00224                                         D+=1
                      00225                                 ENDIF
                      00226 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00227 ; Подпункты 5 пункта меню
                      00228 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00229                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00230                                 LOCAL   A=1     
                      00231                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00232                                         MENU_#V(D)_SUBMENU_#V(A)
                      00233                                                 MOD_PCL SYMBOL_POINTER
                      00234                                                 DT              MENU_SUBMENU_NAME_5_#V(A),0
                      00235                                         A+=1
                      00236                                 ENDW
                      00237                                         D+=1
                      00238                                 ENDIF
                      00239 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00240 ; Подпункты 6 пункта меню
                      00241 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00242                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00243                                 LOCAL   A=1     
                      00244                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00245                                         MENU_#V(D)_SUBMENU_#V(A)
                      00246                                                 MOD_PCL SYMBOL_POINTER
                      00247                                                 DT              MENU_SUBMENU_NAME_6_#V(A),0
                      00248                                         A+=1
                      00249                                 ENDW
                      00250                                         D+=1
                      00251                                 ENDIF
                      00252 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00253 ; Подпункты 7 пункта меню
                      00254 ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00255                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00256                                 LOCAL   A=1     
                      00257                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00258                                         MENU_#V(D)_SUBMENU_#V(A)
                      00259                                                 MOD_PCL SYMBOL_POINTER
                      00260                                                 DT              MENU_SUBMENU_NAME_7_#V(A),0
                      00261                                         A+=1
                      00262                                 ENDW
                      00263                                         D+=1
                      00264                                 ENDIF
                      00265 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00266 ; Подпункты 8 пункта меню
                      00267 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00268                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00269                                 LOCAL   A=1     
                      00270                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00271                                         MENU_#V(D)_SUBMENU_#V(A)
                      00272                                                 MOD_PCL SYMBOL_POINTER
                      00273                                                 DT              MENU_SUBMENU_NAME_8_#V(A),0
                      00274                                         A+=1
                      00275                                 ENDW
                      00276                                         D+=1
                      00277                                 ENDIF
                      00278 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00279                         ENDM
                      00280 ;=======================================================================================================
                            =========
Warning[205]: Found directive in column 1. (IF)
                      00281 IF      USE_MENU_ACTION 
                      00282 GOTO_MENU_ACTION        MACRO           ; Макрос, создает переходы на действия всех пунктов меню (если в
                            ключена соответствующая опция)
                      00283                                         MOD_PCL INDEX_MENU                      
                      00284                                         LOCAL   A=1
                      00285                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00286                                         GOTO    MENU_#V(A)_ACTION
                      00287                                         A+=1
                      00288                                 ENDW
                      00289                                         ENDM
Warning[205]: Found directive in column 1. (ENDIF)
                      00290 ENDIF
                      00291 ;=======================================================================================================
                            =========
                      00002         INCLUDE HD44780_LIB.H
Warning[205]: Found directive in column 1. (INCLUDE)
                      00001 INCLUDE HARDWARE_PROFILE.INC
                      00003         #INCLUDE P16F84.INC
                      00207         LIST
                      00208 
                      00209 ;==========================================================================
                      00210 ;  MPASM PIC16F84 processor include
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00211 ; 
                      00212 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00213 ;==========================================================================
                      00214 
Message[310]: Superseding current maximum RAM and RAM map.
                      00412         LIST
                      00004 ;       list p=16f84
                      00002 
  00000001            00003 Y                               EQU             1                               ; YES
  00000000            00004 N                               EQU             0                               ; NO
                      00005 
  00000001            00006 USE_4_BIT_MODE  EQU             Y                               ; YES/NO
  00000000            00007 USE_HIGH_NIBLE  EQU             N                               ; YES/NO
  00000000            00008 USE_ONE_PORT    EQU             N                               ; YES/NO
  00000001            00009 ONLY_WRITE              EQU             Y                               ; YES/NO
                      00010 
  00000006            00011 LCD_DATA                EQU             PORTB                   ; Описываем порт линий данных
  00000086            00012 LCD_DATA_TRIS   EQU             TRISB
                      00013 
                      00014         IF      (USE_4_BIT_MODE && USE_ONE_PORT); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00015 
                      00016 LCD_CNTL                EQU             LCD_DATA                ; то так и опишем
                      00017 LCD_CNTL_TRIS   EQU             LCD_DATA_TRIS
                      00018 
                      00019         ELSE
                      00020 
  00000005            00021 LCD_CNTL                EQU             PORTA                   ; Иначе зададим любой другой
  00000085            00022 LCD_CNTL_TRIS   EQU             TRISA
                      00023         ENDIF
                      00024         
                      00025         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && ONLY_WRITE)
                      00026 E                               EQU             2
                      00027 RS                              EQU             3
                      00028 CNTL_TRIS_MASK  EQU             B'11110011'             ; Маска настройки линий управлениЯ
                      00029         ENDIF
                      00030 
                      00031         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && !ONLY_WRITE)
                      00032 E                               EQU             1
                      00033 RW                              EQU             2
                      00034 RS                              EQU             3
                      00035 CNTL_TRIS_MASK  EQU             B'11110001'             ; Маска настройки линий управлениЯ
                      00036         ENDIF   
                      00037 
                      00038         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && ONLY_WRITE)
                      00039 E                               EQU             4
                      00040 RS                              EQU             5
                      00041 CNTL_TRIS_MASK  EQU             B'11001111'             ; Маска настройки линий управлениЯ
                      00042         ENDIF   
                      00043 
                      00044         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && !ONLY_WRITE)
                      00045 E                               EQU             4
                      00046 RW                              EQU             5
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00047 RS                              EQU             6
                      00048 CNTL_TRIS_MASK  EQU             B'10001111'             ; Маска настройки линий управлениЯ
                      00049 
                      00050         ELSE    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
                      00051         
  00000001            00052 E                               EQU             1
  00000003            00053 RS                              EQU             3
  000000F5            00054 CNTL_TRIS_MASK  EQU             B'11110101'             ; Маска настройки линий управления
                      00055         ENDIF
                      00056 
  0000000C            00057 DISP_ON                 EQU             B'00001100'             ; Display on
  0000000E            00058 DISP_ON_C               EQU             B'00001110'             ; Display on, Cursor on
  0000000F            00059 DISP_ON_B               EQU             B'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00060 DISP_OFF                EQU             B'00001000'             ; Display off
  00000001            00061 CLR_DISP                EQU             B'00000001'             ; Clear the Display
  00000006            00062 ENTRY_INC               EQU             B'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00063 ENTRY_INC_S             EQU             B'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00064 ENTRY_DEC               EQU             B'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00065 ENTRY_DEC_S             EQU             B'00000101'             ;
  00000080            00066 DD_RAM_ADDR             EQU             B'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00067 DD_RAM_UL               EQU             B'10000000'             ; Upper Left coner of the Display
  000000C0            00068 SECOND_LINE             EQU             B'11000000'             ; Move cursor to second line
  0000008F            00069 LAST_SYMBOL_FIRST_LINE  EQU     B'10001111'     ; Установим курсор на последний символ 1-й строки
  000000CF            00070 LAST_SYMBOL_SECOND_LINE EQU     B'11001111'     ; Установим курсор на последний символ 2-й строки
                      00071 
                      00072 PRINT_LCD_STRING_MACRO  MACRO   LABEL
                      00073                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
                      00074                                                 CLRF    SYMBOL_POINTER
                      00075                                         PRINT_LCD_STRING
                      00076                                                 CALL    LABEL
                      00077                                                 ANDLW   0FFH
                      00078                                                 BTFSC   STATUS,Z
                      00079                                                 GOTO    END_LCD_STRING          
                      00080                                                 CALL    SEND_LCD_SYMBOL
                      00081                                                 INCF    SYMBOL_POINTER  
                      00082                                                 GOTO    PRINT_LCD_STRING
                      00083                                         END_LCD_STRING  
                      00084                                                 ENDM
                      00085 ;=======================================================================================================
                            =========
                      00086 DRAW_CURSOR     MACRO   SYMBOL
                      00087                         MOVLW   SYMBOL
                      00088                         CALL    DRAW_CURSOR_ROUTINE
                      00089                         ENDM
                      00090 ;=======================================================================================================
                            =========
                      00091 SECOND_LINE_MACRO       MACRO
                      00092                                         MOVLW   SECOND_LINE     
                      00093                                         CALL    SEND_LCD_COMMAND
                      00094                                         ENDM
                      00095 ;=======================================================================================================
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            =========
                      00003 
                      00004 MICROMENU_LIB_UDATA     UDATA_SHR
0000                  00005 INDEX_MENU              RES     1
0001                  00006 INDEX_SUBMENU   RES     1
0002                  00007 NUM_OF_SUBMENU  RES     1                                       ; Количество пунктов в текущем меню
0003                  00008 SYMBOL_POINTER  RES     1
0004                  00009 MENU_COUNTER    RES     1
0005                  00010 TEMP_1                  RES     1
0006                  00011 TEMP_2                  RES     1
0007                  00012 TEMP_3                  RES     1
                      00013 
                      00014         IF SAVE_CURSOR_POSITION
0008                  00015 SAVE_POSITION   RES     1
                      00016         ENDIF
                      00017 
                      00018         IF      USE_SHORT_MOD_PCL
  0000                00019         EXTERN  KNOWN_ZERO
                      00020         ENDIF
                      00021 
  0000                00022         EXTERN  FLAGS,OFFSET
  0000                00023         GLOBAL  MENU_HEANDLER,ZASTAVKA,ENTER_MENU
  0000                00024         EXTERN  SEND_LCD_SYMBOL,SEND_LCD_COMMAND,DELAY_4MS,CLR_DISPLAY_ROUTINE,MAIN
                      00025 ;===================================================================================================
                      00026 MICROMENU               CODE                                    ; Сегмент кода библиотеки меню
                      00027 ;===================================================================================================
0000                  00028 TABLE_ACTION_COMPLETE 
                      00029         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0000   08??               M                 MOVFW   SYMBOL_POINTER
0001   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0002   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0003   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0004   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0005   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0006   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0007   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0008                      M         TABLE
0008   3441 3463 3474 00030         DT              "Action Complete!",0
       3469 346F 346E 
       3420 3443 346F 
       346D 3470 346C 
       3465 3474 3465 
       3421 3400 
                      00031 ;===================================================================================================
0019                  00032 MENU_HEANDLER                                                   ; Обработчик меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00033 ;===================================================================================================
0019   01??           00034         CLRF    INDEX_MENU                                      ; Была нажатая какая-то кнопка, очистим 
                            индекс пункта меню                                      
                      00035 
                      00036         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00037         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00038         ANDWF   FLAGS                                           
                      00039         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00040         ENDIF
                      00041 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
001A                  00042 DRAW_MENU                                                               ; Поместим курсор на нужный пунк
                            т меню                                                  
                      00043         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
001A   08??           00044         MOVFW   INDEX_MENU
001B   1D03 2???      00045         BNZ             CHECK_1         
001D   30F0           00046         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
001E   05??           00047         ANDWF   FLAGS   
001F   1400           00048         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
0020   2???           00049         GOTO    SKIP_CHECK_1
0021                  00050 CHECK_1
0021   3C05           00051         SUBLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Сравниваем с количеством пунктов меню
0022   1D03 2???      00052         BNZ             SKIP_CHECK_1    
0024   30F0           00053         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0025   05??           00054         ANDWF   FLAGS
0026   1480           00055         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
0027                  00056 SKIP_CHECK_1
                      00057         ENDIF
                      00058 
0027   2???           00059         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
                      00060 
                      00061         IF      USE_MOVING_CURSOR
0028   1C00           00062         BTFSS   PRESS_UP
0029   2???           00063         GOTO    PRESSING_DOWN                   
002A   2???           00064         CALL    DRAW_MENU_ROUTINE                       ; Рисуем текущий пункт меню
                      00065         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
002B   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
002C   2???               M                         CALL    DRAW_CURSOR_ROUTINE
002D   2???           00066         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
002E   0A??           00067         INCF    INDEX_MENU                                      ; Берем следующий пункт
002F   08??           00068         MOVFW   INDEX_MENU      
0030   3C06           00069         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
0031   1903 2???      00070         BZ              CORRECT_INDEX_MENU                              
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0033   2???           00071         CALL    DRAW_MENU_ROUTINE                       ; Рисуем пункт меню под текущим
Message[305]: Using default destination of 1 (file).
0034   03??           00072         DECF    INDEX_MENU                                      ; Не забудем вернуть назад текущий пункт
                             меню   
0035   2???           00073         GOTO    SKIP_CORRECT_INDEX_MENU_3
0036                  00074 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
0036   01??           00075         CLRF    INDEX_MENU
0037   2???           00076         CALL    DRAW_MENU_ROUTINE
0038   3005           00077         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
0039   00??           00078         MOVWF   INDEX_MENU      
003A   2???           00079         GOTO    SKIP_CORRECT_INDEX_MENU_3
003B                  00080 PRESSING_DOWN
Message[305]: Using default destination of 1 (file).
003B   03??           00081         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
003C   1B80           00082         BTFSC   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
003D   2???           00083         GOTO    CORRECT_INDEX_MENU_2
003E   2???           00084         CALL    DRAW_MENU_ROUTINE                       ; Рисуем предыдущий пункт меню
003F   2???           00085         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0040   0A??           00086         INCF    INDEX_MENU                                      ; Вернем текущий пункт                  
                                            
0041   08??           00087         MOVFW   INDEX_MENU      
0042   2???           00088         GOTO    SKIP_CORRECT_INDEX_MENU_2
0043                  00089 CORRECT_INDEX_MENU_2
0043   3005           00090         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
0044   00??           00091         MOVWF   INDEX_MENU
0045   2???           00092         CALL    DRAW_MENU_ROUTINE                       ; Рисуем предыдущий пункт меню
0046   2???           00093         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
0047   01??           00094         CLRF    INDEX_MENU
0048                  00095 SKIP_CORRECT_INDEX_MENU_2
0048   2???           00096         CALL    DRAW_MENU_ROUTINE                       ; Рисуем текущий пункт меню под предыдущим
                      00097         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE
0049   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
004A   2???               M                         CALL    DRAW_CURSOR_ROUTINE
004B                  00098 SKIP_CORRECT_INDEX_MENU_3
                      00099 
                      00100         ELSE
                      00101         CALL    DRAW_MENU_ROUTINE                       ; Рисуем текущий пункт меню
                      00102         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00103         INCF    INDEX_MENU                                      ; Берем следующий пункт
                      00104         MOVFW   INDEX_MENU      
                      00105         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
                      00106         BTFSC   STATUS,Z
                      00107         GOTO    CORRECT_INDEX_MENU                      
                      00108         CALL    DRAW_MENU_ROUTINE                       ; Рисуем пункт меню под текущим 
                      00109         DECF    INDEX_MENU                                      ; Не забудем вернуть назад текущий пункт
                             меню   
                      00110         GOTO    SKIP_CORRECT_INDEX_MENU
                      00111 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
                      00112         CLRF    INDEX_MENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00113         CALL    SWITCH_MENU_ROUTINE
                      00114         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
                      00115         MOVWF   INDEX_MENU      
                      00116 SKIP_CORRECT_INDEX_MENU
                      00117         ENDIF
                      00118 
004B   2???           00119         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в меню, при нажатии кнопок "Вверх", "Вниз", выходе из подпункта меню
                      00120 
                      00121         IF      USE_RBIE
                      00122         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00123         ANDWF   FLAGS   
                      00124         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания от кнопок
                      00125         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00126         ENDIF
                      00127 
004C   3014           00128         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
004D   00??           00129         MOVWF   MENU_COUNTER
004E   01??           00130         CLRF    TEMP_1
004F   01??           00131         CLRF    TEMP_2
0050                  00132 LOOP_MENU                                                               ; Вычисляем нажатую клавишу
                      00133         IF      USE_RBIE
                      00134         BTFSC   PRESS_UP
                      00135         GOTO    CURSOR_UP_MENU                          
                      00136         BTFSC   PRESS_DOWN
                      00137         GOTO    CURSOR_DOWN_MENU
                      00138         BTFSC   PRESS_ENTER
                      00139         GOTO    ENTER_MENU
                      00140         BTFSC   PRESS_EXIT
                      00141         GOTO    EXIT_MENU
                      00142         
                      00143         ELSE
0050   1E06           00144         BTFSS   UP
0051   2???           00145         GOTO    CURSOR_UP_MENU                          
0052   1E86           00146         BTFSS   DOWN
0053   2???           00147         GOTO    CURSOR_DOWN_MENU
0054   1F06           00148         BTFSS   ENTER
0055   2???           00149         GOTO    ENTER_MENU
0056   1F86           00150         BTFSS   EXIT
0057   2???           00151         GOTO    EXIT_MENU
                      00152         ENDIF
                      00153 ;-----------------------------------------------------------------                                      
                                                                    
Message[305]: Using default destination of 1 (file).
0058   0B??           00154         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата             
                                                            
0059   2???           00155         GOTO    LOOP_MENU                                       ; Цикл ожидания нажатия в главном меню  
Message[305]: Using default destination of 1 (file).
005A   0B??           00156         DECFSZ  TEMP_2  
005B   2???           00157         GOTO    LOOP_MENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
005C   0B??           00158         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
005D   2???           00159         GOTO    LOOP_MENU
005E   2???           00160         GOTO    ZASTAVKA                                        ; Вышел таймаут нахождения в меню, выход
                            им в заставку   
                      00161 ;-----------------------------------------------------------------
005F                  00162 CURSOR_UP_MENU                                                  ; Была нажата клавиша "Вверх"
                      00163         IF      USE_MOVING_CURSOR & !USE_RBIE
005F   30F0           00164         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0060   05??           00165         ANDWF   FLAGS                                           
0061   1400           00166         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00167         ENDIF
                      00168 
Message[305]: Using default destination of 1 (file).
0062   03??           00169         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
0063   1F80           00170         BTFSS   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
0064   2???           00171         GOTO    DRAW_MENU
0065   3005           00172         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Стало "<0", сделаем текущим последний пункт меню. Учит
                            ываем, что индекс пункта меню на 1 меньше его порядкового номера
0066   00??           00173         MOVWF   INDEX_MENU
0067   2???           00174         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00175 ;-----------------------------------------------------------------
0068                  00176 CURSOR_DOWN_MENU                                                ; Была нажата клавиша "Вниз"
                      00177         IF      USE_MOVING_CURSOR & !USE_RBIE
0068   30F0           00178         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0069   05??           00179         ANDWF   FLAGS                                           
006A   1480           00180         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00181         ENDIF
                      00182 
Message[305]: Using default destination of 1 (file).
006B   0A??           00183         INCF    INDEX_MENU                                      ; Берем следущий пункт меню
006C   08??           00184         MOVFW   INDEX_MENU
006D   3C06           00185         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Достигли последнего ?
006E   1903           00186         BTFSC   STATUS,Z
006F   01??           00187         CLRF    INDEX_MENU                                      ; Если да, делаем текущим первый пункт м
                            еню     
0070   2???           00188         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00189 ;-----------------------------------------------------------------
0071                  00190 EXIT_MENU                                                               ; Была нажата клавиша "Выход"
                      00191         IF      USE_RBIE
                      00192         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00193         ANDWF   FLAGS   
                      00194         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
                      00195         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            к
                      00196         
                      00197         ELSE
0071   2???           00198         CALL    DEBOUNCE_DELAY  
                      00199         ENDIF
0072   2???           00200         GOTO    ZASTAVKA                                        ; Выходим в заставку
                      00201 ;===================================================================================================
0073                  00202 ENTER_MENU                                                              ; Была нажата клавиша "Вход", ос
                            уществлям вход в меню и отрисовку подпунктов
                      00203 ;===================================================================================================
                      00204         IF      USE_MENU_ACTION         
0073   08??           00205         MOVFW   INDEX_MENU                                      ; Берем текущий пункт меню
0074   00??           00206         MOVWF   TEMP_1                                          ; Заносим в счетчик
Message[305]: Using default destination of 1 (file).
0075   0A??           00207         INCF    TEMP_1                                          ; Учитываем, что нумерация начинается с 
                            0
0076   3001           00208         MOVLW   ACTIONS_MENU_FLAGS                      ; Берем флаги действий пунктов меню
0077   00??           00209         MOVWF   TEMP_2                                          ; И заносим в переменную
0078                  00210 LOOP_1
Message[305]: Using default destination of 1 (file).
0078   0B??           00211         DECFSZ  TEMP_1
0079   2???           00212         GOTO    ROTATE_ACTION_MENU_FLAGS
007A   1803 2???      00213         BC              MENU_ACTION                                     ; Флаг действия текущего пункта 
                            меню выдавлен в бит переноса, анализируем его
007C   2???           00214         GOTO    END_MENU_ACTION
007D                  00215 ROTATE_ACTION_MENU_FLAGS
Message[305]: Using default destination of 1 (file).
007D   0C??           00216         RRF             TEMP_2                                          ; Перебор флагов действий всех п
                            унктов меню
007E   2???           00217         GOTO    LOOP_1  
007F                  00218 END_MENU_ACTION
                      00219         ENDIF
                      00220 
007F   2???           00221         CALL    NUM_OF_SUBMENU_TABLE            ; Получаем количество подпунктов в этом пункте меню
0080   00??           00222         MOVWF   NUM_OF_SUBMENU                          ; 1 раз занесем в перемунную, чтобы каждый раз н
                            е вызывать эту процедуру        
0081   3C00           00223         SUBLW   .0
0082   1903 2???      00224         BZ              DRAW_MENU                                       ; Если 0, сразу на выход без про
                            рисовки подпунктов
0084   01??           00225         CLRF    INDEX_SUBMENU                           ; Очистим индекс пункта подменю 
                      00226 
                      00227         IF      SAVE_CURSOR_POSITION
0085   08??           00228         MOVFW   FLAGS
0086   00??           00229         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора
                      00230         ENDIF
                      00231 
                      00232         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00233         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00234         ANDWF   FLAGS                                           
                      00235         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00236         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00237 ;===================================================================================================
0087                  00238 DRAW_SUBMENU                                                    ; Рисуем подпункты меню
                      00239 ;===================================================================================================
                      00240         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
0087   08??           00241         MOVFW   INDEX_SUBMENU
0088   1D03 2???      00242         BNZ             CHECK_2         
008A   30F0           00243         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
008B   05??           00244         ANDWF   FLAGS   
008C   1400           00245         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
008D   2???           00246         GOTO    SKIP_CHECK_2
008E                  00247 CHECK_2
008E   03??           00248         DECF    NUM_OF_SUBMENU,W                        ; Получаем количество подпунктов в этом меню, уч
                            итываем, что индекс подпункта начинается с 0
008F   02??           00249         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
0090   1D03 2???      00250         BNZ             SKIP_CHECK_2
0092   30F0           00251         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0093   05??           00252         ANDWF   FLAGS
0094   1480           00253         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
0095                  00254 SKIP_CHECK_2
                      00255         ENDIF
                      00256 
0095   2???           00257         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой подпу
                            нктов меню, чтобы уменьшить моргание
                      00258 
                      00259         IF      USE_MOVING_CURSOR
0096   1C00           00260         BTFSS   PRESS_UP
0097   2???           00261         GOTO    PRESSING_DOWN_2                 
0098   2???           00262         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий подпункт меню  
0099   08??           00263         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
009A   3C01           00264         SUBLW   .1
009B   1903 2???      00265         BZ              SKIP_CORRECT_INDEX_SUBMENU_3; Если 1, пропускаем прорисовку 2-й строки
                      00266         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
009D   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
009E   2???               M                         CALL    DRAW_CURSOR_ROUTINE
009F   2???           00267         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
00A0   0A??           00268         INCF    INDEX_SUBMENU                           ; Берем следующий пункт
00A1   08??           00269         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
00A2   02??           00270         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
00A3   1903 2???      00271         BZ              CORRECT_INDEX_SUBMENU
00A5   2???           00272         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
Message[305]: Using default destination of 1 (file).
00A6   03??           00273         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий пункт меню   
00A7   2???           00274         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
00A8                  00275 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
00A8   01??           00276         CLRF    INDEX_SUBMENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00A9   2???           00277         CALL    DRAW_SUBMENU_ROUTINE
00AA   08??           00278         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
00AB   00??           00279         MOVWF   INDEX_SUBMENU
Message[305]: Using default destination of 1 (file).
00AC   03??           00280         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс подпункта начинается с 0
                                    
00AD   2???           00281         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
00AE                  00282 PRESSING_DOWN_2
Message[305]: Using default destination of 1 (file).
00AE   03??           00283         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт меню
00AF   1B80           00284         BTFSC   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
00B0   2???           00285         GOTO    CORRECT_INDEX_SUBMENU_2
00B1   2???           00286         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
00B2   2???           00287         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
00B3   0A??           00288         INCF    INDEX_SUBMENU                           ; Вернем текущий пункт                          
                                    
00B4   08??           00289         MOVFW   INDEX_SUBMENU   
00B5   2???           00290         GOTO    SKIP_CORRECT_INDEX_SUBMENU_2
00B6                  00291 CORRECT_INDEX_SUBMENU_2
00B6   08??           00292         MOVFW   NUM_OF_SUBMENU                          ; Стало "<0", возвращаем количество пунктов в да
                            ном подменю     
00B7   00??           00293         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
00B8   03??           00294         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс пункта подменю на 1 мень
                            ше его порядкового номера
00B9   2???           00295         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
00BA   2???           00296         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
00BB   01??           00297         CLRF    INDEX_SUBMENU
00BC                  00298 SKIP_CORRECT_INDEX_SUBMENU_2
00BC   2???           00299         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий пункт меню под предыдущим 
                      00300         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE ; Нарисум курсор в конце 2-й строчки
00BD   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
00BE   2???               M                         CALL    DRAW_CURSOR_ROUTINE
00BF                  00301 SKIP_CORRECT_INDEX_SUBMENU_3
                      00302 
                      00303         ELSE
                      00304         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий подпункт меню  
                      00305         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
                      00306         SUBLW   .1
                      00307         BZ              SKIP_CORRECT_INDEX_SUBMENU      ; Если 1, пропускаем прорисовку 2-й строки
                      00308         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00309         INCF    INDEX_SUBMENU
                      00310         CALL    NUM_OF_SUBMENU_TABLE                    
                      00311         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
                      00312         BZ              CORRECT_INDEX_SUBMENU
                      00313         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
                      00314         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий подпункт меню
                      00315         GOTO    SKIP_CORRECT_INDEX_SUBMENU      
                      00316 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
                      00317         CLRF    INDEX_SUBMENU   
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00318         CALL    DRAW_SUBMENU_ROUTINE
                      00319         CALL    NUM_OF_SUBMENU_TABLE
                      00320         MOVWF   INDEX_SUBMENU   
                      00321         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс подпункта начинается с 0
                      00322 SKIP_CORRECT_INDEX_SUBMENU
                      00323         ENDIF
                      00324 
00BF   2???           00325         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в подпункт меню, при нажатии кнопок "Вверх", "Вниз", выходе из действия подпункта меню
                      00326 
                      00327         IF      USE_RBIE
                      00328         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00329         ANDWF   FLAGS   
                      00330         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
                      00331         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00332         ENDIF
                      00333 
00C0   3014           00334         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
00C1   00??           00335         MOVWF   MENU_COUNTER
00C2   01??           00336         CLRF    TEMP_1
00C3   01??           00337         CLRF    TEMP_2
00C4                  00338 LOOP_SUBMENU                                                    ; Мы зашли в пункт меню, ждем нажатия сл
                            едующей кнопки
                      00339 
                      00340         IF      USE_RBIE
                      00341         BTFSC   PRESS_UP
                      00342         GOTO    CURSOR_UP_SUBMENU                               
                      00343         BTFSC   PRESS_DOWN
                      00344         GOTO    CURSOR_DOWN_SUBMENU
                      00345         BTFSC   PRESS_ENTER
                      00346         GOTO    ENTER_SUBMENU
                      00347         BTFSC   PRESS_EXIT
                      00348         GOTO    EXIT_SUBMENU
                      00349         
                      00350         ELSE
00C4   1E06           00351         BTFSS   UP
00C5   2???           00352         GOTO    CURSOR_UP_SUBMENU                               
00C6   1E86           00353         BTFSS   DOWN
00C7   2???           00354         GOTO    CURSOR_DOWN_SUBMENU
00C8   1F06           00355         BTFSS   ENTER
00C9   2???           00356         GOTO    ENTER_SUBMENU
00CA   1F86           00357         BTFSS   EXIT
00CB   2???           00358         GOTO    EXIT_SUBMENU
                      00359         ENDIF
                      00360 ;-----------------------------------------------------------------
Message[305]: Using default destination of 1 (file).
00CC   0B??           00361         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата     
00CD   2???           00362         GOTO    LOOP_SUBMENU                            ; Цикл ожидания нажатия в пункте меню
Message[305]: Using default destination of 1 (file).
00CE   0B??           00363         DECFSZ  TEMP_2  
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CF   2???           00364         GOTO    LOOP_SUBMENU
Message[305]: Using default destination of 1 (file).
00D0   0B??           00365         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
                                    
00D1   2???           00366         GOTO    LOOP_SUBMENU
00D2   2???           00367         GOTO    DRAW_MENU                                       ; Вышел таймаут нахождения в подменю, вы
                            ходим в меню
                      00368 ;-----------------------------------------------------------------
00D3                  00369 CURSOR_UP_SUBMENU                                               ; Была нажата клавиша "Вверх"
                      00370         IF      USE_MOVING_CURSOR & !USE_RBIE
00D3   30F0           00371         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
00D4   05??           00372         ANDWF   FLAGS                                           
00D5   1400           00373         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00374         ENDIF
                      00375 
Message[305]: Using default destination of 1 (file).
00D6   03??           00376         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт подменю
00D7   1F80           00377         BTFSS   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов подменю ограничено 64
00D8   2???           00378         GOTO    DRAW_SUBMENU    
00D9   08??           00379         MOVFW   NUM_OF_SUBMENU                          ; Стало "<0", возвращаем количество пунктов в да
                            ном подменю     
00DA   00??           00380         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
00DB   03??           00381         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс пункта подменю на 1 мень
                            ше его порядкового номера
00DC   2???           00382         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню      
                      00383 ;-----------------------------------------------------------------
00DD                  00384 CURSOR_DOWN_SUBMENU                                             ; Была нажата клавиша "Вниз"
                      00385         IF      USE_MOVING_CURSOR & !USE_RBIE
00DD   30F0           00386         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
00DE   05??           00387         ANDWF   FLAGS                                           
00DF   1480           00388         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00389         ENDIF
                      00390 
Message[305]: Using default destination of 1 (file).
00E0   0A??           00391         INCF    INDEX_SUBMENU                           ; Берем следущий пункт подменю
00E1   08??           00392         MOVFW   NUM_OF_SUBMENU                          ; Возвращаем количество пунктов в даном подменю 
00E2   02??           00393         SUBWF   INDEX_SUBMENU,W                         ; Достигли последнего ? 
00E3   1903           00394         BTFSC   STATUS,Z
00E4   01??           00395         CLRF    INDEX_SUBMENU                           ; Если да, делаем текущим первый подпункт меню  
                                    
00E5   2???           00396         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню
                      00397 ;-----------------------------------------------------------------      
00E6                  00398 EXIT_SUBMENU                                                    ; Была нажата клавиша "Выход"
00E6   01??           00399         CLRF    INDEX_SUBMENU                           ; Обнуляем индекс пункта подменю, чтобы при след
                            ующем заходе в любой пункт меню курсор находился на 1 пункте подменю                    
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00400 
                      00401         IF      SAVE_CURSOR_POSITION
00E7   08??           00402         MOVFW   SAVE_POSITION
00E8   00??           00403         MOVWF   FLAGS                                           ; Восстановим позицию курсора
                      00404         ENDIF
                      00405 
00E9   2???           00406         GOTO    DRAW_MENU                                       ; Выходим в меню
                      00407 ;===================================================================================================
00EA                  00408 ENTER_SUBMENU                                                   ; Была нажата клавиша "Вход", осуществля
                            м вход в подпункт меню и выполняем его действие
                      00409 ;===================================================================================================
00EA   2???           00410         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
00EB   2???           00411         GOTO    SWITCH_ACTION                           ; Делаем действие текущего подпункта меню
00EC                  00412 END_ACTION
                      00413 ;-----------------------------------------------------------------
                      00414         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE   ; Рисуем подтверждение действия
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
00EC   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
00ED                      M                                         PRINT_LCD_STRING
00ED   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
00EE   39FF               M                                                 ANDLW   0FFH
00EF   1903               M                                                 BTFSC   STATUS,Z
00F0   2???               M                                                 GOTO    END_LCD_STRING          
00F1   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00F2   0A??               M                                                 INCF    SYMBOL_POINTER  
00F3   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
00F4                      M                                         END_LCD_STRING  
00F4   01??           00415         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
00F5   2???           00416         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
00F6   0B??           00417         DECFSZ  TEMP_3
00F7   2???           00418         GOTO    $-2
                      00419 ;-----------------------------------------------------------------
00F8   2???           00420         GOTO    DRAW_SUBMENU                            ; И идем отрисовывать подпункт меню, курсор на т
                            ом же подпункте, что и был
                      00421 ;===================================================================================================
00F9                  00422 DEBOUNCE_DELAY                                                  ; Подпрограмма антидребезговой задержки
00F9   3003           00423         MOVLW   .3                                                      ; Количество проходов подбираетс
                            я экспериментальным путем
00FA   00??           00424         MOVWF   TEMP_2
00FB   01??           00425         CLRF    TEMP_1
00FC                  00426 LOOP_DELAY
00FC   0806           00427         MOVFW   PORTB                                           
00FD   380F           00428         IORLW   B'00001111'                                     ; Установим незначущие разряды
00FE   3E01           00429         ADDLW   .1
00FF   1D03 2???      00430         BNZ             DEBOUNCE_DELAY                          ; Если хоть одна кнопка нажата, начинаем
                             отсчет антидребезговой задержки заново
Message[305]: Using default destination of 1 (file).
0101   0B??           00431         DECFSZ  TEMP_1  
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0102   2???           00432         GOTO    $-1
Message[305]: Using default destination of 1 (file).
0103   0B??           00433         DECFSZ  TEMP_2  
0104   2???           00434         GOTO    LOOP_DELAY
0105   0008           00435         RETURN
                      00436 ;===================================================================================================
0106                  00437 DRAW_MENU_ROUTINE                                               ; Подпрограмма отрисовки 1 пункта меню
0106   01??           00438         CLRF    SYMBOL_POINTER
0107                  00439 LOOP_DRAW_MENU
0107   2???           00440         CALL    MENU_TABLE
0108   39FF           00441         ANDLW   0FFH
0109   1903           00442         BTFSC   STATUS,Z
010A   0008           00443         RETURN 
010B   2???           00444         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
010C   0A??           00445         INCF    SYMBOL_POINTER  
010D   2???           00446         GOTO    LOOP_DRAW_MENU
                      00447 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
010E                  00448 DRAW_SUBMENU_ROUTINE                                    ; Подпрограмма отрисовки 1 подпункта меню
010E   01??           00449         CLRF    SYMBOL_POINTER
010F                  00450 LOOP_DRAW_SUBMENU
010F   2???           00451         CALL    SUBMENU_TABLE
0110   39FF           00452         ANDLW   0FFH
0111   1903           00453         BTFSC   STATUS,Z
0112   0008           00454         RETURN 
0113   2???           00455         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0114   0A??           00456         INCF    SYMBOL_POINTER  
0115   2???           00457         GOTO    LOOP_DRAW_SUBMENU
                      00458 ;===================================================================================================
0116                  00459 ZASTAVKA
0116   2???           00460         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00461         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_FIRST_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
0117   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
0118                      M                                         PRINT_LCD_STRING
0118   2???               M                                                 CALL    TABLE_ZASTAVKA_FIRST_STRING
0119   39FF               M                                                 ANDLW   0FFH
011A   1903               M                                                 BTFSC   STATUS,Z
011B   2???               M                                                 GOTO    END_LCD_STRING          
011C   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
011D   0A??               M                                                 INCF    SYMBOL_POINTER  
011E   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
011F                      M                                         END_LCD_STRING  
                      00462         SECOND_LINE_MACRO
011F   30C0               M                                         MOVLW   SECOND_LINE     
0120   2???               M                                         CALL    SEND_LCD_COMMAND
                      00463         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_SECOND_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0121   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
0122                      M                                         PRINT_LCD_STRING
0122   2???               M                                                 CALL    TABLE_ZASTAVKA_SECOND_STRING
0123   39FF               M                                                 ANDLW   0FFH
0124   1903               M                                                 BTFSC   STATUS,Z
0125   2???               M                                                 GOTO    END_LCD_STRING          
0126   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0127   0A??               M                                                 INCF    SYMBOL_POINTER  
0128   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
0129                      M                                         END_LCD_STRING  
0129   2???           00464         GOTO    MAIN
                      00465 ;===================================================================================================
012A                  00466 SECOND_STRING_ROUTINE                                   ; Подпрограмма перевода указателя на 2-ю строку 
                      00467         IF      USE_STATIC_CURSOR
                      00468         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисуем курсор на последнем символе 1-й строки
                      00469         ENDIF
                      00470         SECOND_LINE_MACRO                                       ; Переводим указатель на 2-ю строку     
012A   30C0               M                                         MOVLW   SECOND_LINE     
012B   2???               M                                         CALL    SEND_LCD_COMMAND
012C   0008           00471         RETURN                                                          ; И приступаем к отрисовке следу
                            ющего пункта меню
                      00472 ;===================================================================================================
012D                  00473 DRAW_CURSOR_ROUTINE                                             ; Процедура рисования курсора. В w лежит
                             адрес
012D   2???           00474         CALL    SEND_LCD_COMMAND
012E   303C           00475         MOVLW   '<'                                                     ; Нарисуем там курсор
012F   2???           00476         CALL    SEND_LCD_SYMBOL
0130   0008           00477         RETURN
                      00478 ;===================================================================================================
0131                  00479 TABLE_ZASTAVKA_FIRST_STRING
                      00480         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0131   08??               M                 MOVFW   SYMBOL_POINTER
0132   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0133   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0134   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0135   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0136   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0137   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0138   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0139                      M         TABLE
0139   3420 3420 344D 00481         DT              ZASTAVKA_FIRST_STRING,0
       3469 3463 3472 
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       346F 344D 3465 
       346E 3475 344C 
       3469 3462 3400 
0148                  00482 TABLE_ZASTAVKA_SECOND_STRING 
                      00483         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0148   08??               M                 MOVFW   SYMBOL_POINTER
0149   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
014A   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
014B   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
014C   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
014D   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
014E   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
014F   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0150                      M         TABLE
0150   3420 3420 3476 00484         DT              ZASTAVKA_SECOND_STRING,0
       3465 3472 3420 
       3431 342E 3430 
       3420 3462 3465 
       3474 3461 3400 
                      00485 ;===================================================================================================
015F                  00486 NUM_OF_SUBMENU_TABLE                                    
                      00487         RETLW_NUM_OF_SUBMENU_PUNKTS                     ; Макрос, возвращает количество подпунктов текущ
                            его пункта меню
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
015F   08??               M                 MOVFW   INDEX_MENU
0160   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0161   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0162   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0163   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0164   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0165   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0166   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0167                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
0167   3400               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_1
Warning[207]: Found label after column 1. (A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000002                M                                         A+=1
0168   3401               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
0169   3402               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
016A   3403               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
016B   3404               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
016C   3403               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_6
Warning[207]: Found label after column 1. (A)
  00000007                M                                         A+=1
                          M                                 ENDW
                      00488 ;===================================================================================================
016D                  00489 MENU_TABLE
                      00490         GOTO_PUNKT_MENU                                         ; Макрос, создает переходы на все пункты
                             меню                                                   
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
016D   08??               M                 MOVFW   INDEX_MENU
016E   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
016F   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0170   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0171   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0172   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0173   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0174   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0175                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
0175   2???               M                                         GOTO    MENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
0176   2???               M                                         GOTO    MENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
0177   2???               M                                         GOTO    MENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
0178   2???               M                                         GOTO    MENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0179   2???               M                                         GOTO    MENU_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
017A   2???               M                                         GOTO    MENU_6
Warning[207]: Found label after column 1. (A)
  00000007                M                                         A+=1
                          M                                 ENDW
                      00491 ;---------------------------------------------------------------------------------------------------
017B                  00492 SUBMENU_TABLE
                      00493         GOTO_PUNKT_SUBMENU                                      ; Макрос, создает переходы на все подпун
                            кты меню
                          M                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
017B   08??               M                 MOVFW   INDEX_MENU
017C   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
017D   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
017E   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
017F   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0180   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0181   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0182   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0183                      M         TABLE
  0001                    M                                         LOCAL   C=1
                          M                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
0183   2???               M                                                 GOTO    MENU_1_TABLE
Warning[207]: Found label after column 1. (C)
  00000002                M                                                 C+=1
0184   2???               M                                                 GOTO    MENU_2_TABLE
Warning[207]: Found label after column 1. (C)
  00000003                M                                                 C+=1
0185   2???               M                                                 GOTO    MENU_3_TABLE
Warning[207]: Found label after column 1. (C)
  00000004                M                                                 C+=1
0186   2???               M                                                 GOTO    MENU_4_TABLE
Warning[207]: Found label after column 1. (C)
  00000005                M                                                 C+=1
0187   2???               M                                                 GOTO    MENU_5_TABLE
Warning[207]: Found label after column 1. (C)
  00000006                M                                                 C+=1
0188   2???               M                                                 GOTO    MENU_6_TABLE
Warning[207]: Found label after column 1. (C)
  00000007                M                                                 C+=1
                          M                                         ENDW
  0001                    M                                         LOCAL   D=1
  0000                    M                                         LOCAL   A
                          M                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE)
0189                      M                                                 MENU_1_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0189   08??               M                 MOVFW   INDEX_SUBMENU
018A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
018B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
018C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
018D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
018E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
018F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0190   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0191                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                          M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE)
0191                      M                                                 MENU_2_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0191   08??               M                 MOVFW   INDEX_SUBMENU
0192   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0193   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0194   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0195   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0196   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0197   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0198   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0199                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
0199   2???               M                                                         GOTO    MENU_2_SUBMENU_1
Warning[207]: Found label after column 1. (A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000002                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE)
019A                      M                                                 MENU_3_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
019A   08??               M                 MOVFW   INDEX_SUBMENU
019B   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
019C   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
019D   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
019E   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
019F   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01A0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01A1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01A2                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
01A2   2???               M                                                         GOTO    MENU_3_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
01A3   2???               M                                                         GOTO    MENU_3_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE)
01A4                      M                                                 MENU_4_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01A4   08??               M                 MOVFW   INDEX_SUBMENU
01A5   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01A6   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01A7   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01A8   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A9   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01AA   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01AB   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01AC                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
01AC   2???               M                                                         GOTO    MENU_4_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
01AD   2???               M                                                         GOTO    MENU_4_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
01AE   2???               M                                                         GOTO    MENU_4_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE)
01AF                      M                                                 MENU_5_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01AF   08??               M                 MOVFW   INDEX_SUBMENU
01B0   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01B1   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01B2   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01B3   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01B4   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01B5   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01B6   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01B7                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
01B7   2???               M                                                         GOTO    MENU_5_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
01B8   2???               M                                                         GOTO    MENU_5_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
01B9   2???               M                                                         GOTO    MENU_5_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
01BA   2???               M                                                         GOTO    MENU_5_SUBMENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_6_TABLE)
01BB                      M                                                 MENU_6_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01BB   08??               M                 MOVFW   INDEX_SUBMENU
01BC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01BD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01BE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01BF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01C0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01C1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01C2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01C3                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
01C3   2???               M                                                         GOTO    MENU_6_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
01C4   2???               M                                                         GOTO    MENU_6_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
01C5   2???               M                                                         GOTO    MENU_6_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                                 D+=1
                          M                                         ENDW    
                      00494 ;---------------------------------------------------------------------------------------------------
01C6                  00495 SWITCH_ACTION                                                   ; Выполним действие, на котором находитс
                            я курсор 
                      00496         GOTO_PUNKT_SUBMENU_ACTION                       ; Макрос, создает переходы на действия всех подп
                            унктов меню
                          M                                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
01C6   08??               M                 MOVFW   INDEX_MENU
01C7   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01C8   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01C9   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01CA   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01CB   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01CC   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01CD   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01CE                      M         TABLE
  0001                    M                                                         LOCAL   C=1
                          M                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
01CE   2???               M                                                                 GOTO    MENU_1_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000002                M                                                                 C+=1
01CF   2???               M                                                                 GOTO    MENU_2_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000003                M                                                                 C+=1
01D0   2???               M                                                                 GOTO    MENU_3_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000004                M                                                                 C+=1
01D1   2???               M                                                                 GOTO    MENU_4_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000005                M                                                                 C+=1
01D2   2???               M                                                                 GOTO    MENU_5_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000006                M                                                                 C+=1
01D3   2???               M                                                                 GOTO    MENU_6_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000007                M                                                                 C+=1
                          M                                                         ENDW
  0001                    M                                                         LOCAL   D=1
  0000                    M                                                         LOCAL   A
                          M                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE_ACTION)
01D4                      M                                                                 MENU_1_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01D4   08??               M                 MOVFW   INDEX_SUBMENU
01D5   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01D6   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01D7   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01D8   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01D9   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01DA   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01DB   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (TABLE)
01DC                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                          M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE_ACTION)
01DC                      M                                                                 MENU_2_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01DC   08??               M                 MOVFW   INDEX_SUBMENU
01DD   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01DE   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01DF   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01E0   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01E1   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01E2   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01E3   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01E4                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
01E4   2???               M                                                                         GOTO    MENU_2_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE_ACTION)
01E5                      M                                                                 MENU_3_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01E5   08??               M                 MOVFW   INDEX_SUBMENU
01E6   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01E7   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01E8   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01E9   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01EA   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01EB   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01EC   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01ED                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
01ED   2???               M                                                                         GOTO    MENU_3_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
01EE   2???               M                                                                         GOTO    MENU_3_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE_ACTION)
01EF                      M                                                                 MENU_4_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01EF   08??               M                 MOVFW   INDEX_SUBMENU
01F0   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01F1   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01F2   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01F3   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01F4   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01F5   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01F6   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01F7                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
01F7   2???               M                                                                         GOTO    MENU_4_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
01F8   2???               M                                                                         GOTO    MENU_4_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
01F9   2???               M                                                                         GOTO    MENU_4_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE_ACTION)
01FA                      M                                                                 MENU_5_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
01FA   08??               M                 MOVFW   INDEX_SUBMENU
01FB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01FC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01FD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01FE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01FF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0200   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0201   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0202                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
0202   2???               M                                                                         GOTO    MENU_5_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
0203   2???               M                                                                         GOTO    MENU_5_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
0204   2???               M                                                                         GOTO    MENU_5_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
0205   2???               M                                                                         GOTO    MENU_5_SUBMENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_6_TABLE_ACTION)
0206                      M                                                                 MENU_6_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0206   08??               M                 MOVFW   INDEX_SUBMENU
0207   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0208   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0209   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
020A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ENDIF
020B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
020C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
020D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
020E                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
020E   2???               M                                                                         GOTO    MENU_6_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
020F   2???               M                                                                         GOTO    MENU_6_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
0210   2???               M                                                                         GOTO    MENU_6_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                                                 D+=1
                          M                                                         ENDW
                      00497 ;===================================================================================================
                      00498         CREATE_MENU_NAMES                                       ; Макрос, создает имена всех пунктов мен
                            ю
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (MENU_1)
0211                      M                                 MENU_1
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0211   08??               M                 MOVFW   SYMBOL_POINTER
0212   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0213   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0214   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0215   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0216   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0217   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0218   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0219                      M         TABLE
0219   3431 342E 344D     M                                         DT              MENU_NAME_1,0
       3465 346E 3475 
       345F 3431 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_2)
0222                      M                                 MENU_2
                          M                                         MOD_PCL SYMBOL_POINTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                    M                 LOCAL   TABLE
0222   08??               M                 MOVFW   SYMBOL_POINTER
0223   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0224   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0225   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0226   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0227   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0228   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0229   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
022A                      M         TABLE
022A   3432 342E 344D     M                                         DT              MENU_NAME_2,0
       3465 346E 3475 
       345F 3432 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_3)
0233                      M                                 MENU_3
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0233   08??               M                 MOVFW   SYMBOL_POINTER
0234   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0235   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0236   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0237   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0238   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0239   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
023A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
023B                      M         TABLE
023B   3433 342E 344D     M                                         DT              MENU_NAME_3,0
       3465 346E 3475 
       345F 3433 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4)
0244                      M                                 MENU_4
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0244   08??               M                 MOVFW   SYMBOL_POINTER
0245   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0246   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0247   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0248   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0249   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
024A   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
024B   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
024C                      M         TABLE
024C   3434 342E 344D     M                                         DT              MENU_NAME_4,0
       3465 346E 3475 
       345F 3434 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5)
0255                      M                                 MENU_5
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0255   08??               M                 MOVFW   SYMBOL_POINTER
0256   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0257   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0258   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0259   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
025A   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
025B   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
025C   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
025D                      M         TABLE
025D   3435 342E 344D     M                                         DT              MENU_NAME_5,0
       3465 346E 3475 
       345F 3435 3400 
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_6)
0266                      M                                 MENU_6
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0266   08??               M                 MOVFW   SYMBOL_POINTER
0267   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0268   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0269   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

026A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
026B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
026C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
026D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
026E                      M         TABLE
026E   3436 342E 344D     M                                         DT              MENU_NAME_6,0
       3465 346E 3475 
       345F 3436 3400 
Warning[207]: Found label after column 1. (A)
  00000007                M                                         A+=1
                          M                                 ENDW
                      00499 ;===================================================================================================
                      00500         CREATE_SUBMENU_NAMES                            ; Макрос, создает имена всех подпунктов меню
  0001                    M                                 LOCAL   D=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                         MENU_#V(D)_SUBMENU_#V(A)
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                          M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
Warning[207]: Found label after column 1. (MENU_2_SUBMENU_1)
0277                      M                                         MENU_2_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0277   08??               M                 MOVFW   SYMBOL_POINTER
0278   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0279   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
027A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

027B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
027C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
027D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
027E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
027F                      M         TABLE
027F   3432 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_2_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_1)
0288                      M                                         MENU_3_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0288   08??               M                 MOVFW   SYMBOL_POINTER
0289   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
028A   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
028B   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
028C   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
028D   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
028E   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
028F   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0290                      M         TABLE
0290   3433 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_3_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (MENU_3_SUBMENU_2)
0299                      M                                         MENU_3_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0299   08??               M                 MOVFW   SYMBOL_POINTER
029A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
029B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
029C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
029D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
029E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
029F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02A0   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02A1                      M         TABLE
02A1   3433 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_3_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_1)
02AA                      M                                         MENU_4_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02AA   08??               M                 MOVFW   SYMBOL_POINTER
02AB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02AC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02AD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02AE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02AF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02B0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02B1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02B2                      M         TABLE
02B2   3434 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_4_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_2)
02BB                      M                                         MENU_4_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02BB   08??               M                 MOVFW   SYMBOL_POINTER
02BC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02BD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02BE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02BF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02C0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02C1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02C2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02C3                      M         TABLE
02C3   3434 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_4_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_3)
02CC                      M                                         MENU_4_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02CC   08??               M                 MOVFW   SYMBOL_POINTER
02CD   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02CE   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02CF   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02D0   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02D1   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02D2   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02D3   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02D4                      M         TABLE
02D4   3434 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_4_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_1)
02DD                      M                                         MENU_5_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02DD   08??               M                 MOVFW   SYMBOL_POINTER
02DE   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02DF   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02E0   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02E1   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02E2   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02E3   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02E4   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02E5                      M         TABLE
02E5   3435 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_5_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_2)
02EE                      M                                         MENU_5_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02EE   08??               M                 MOVFW   SYMBOL_POINTER
02EF   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02F0   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02F1   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02F2   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02F3   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02F4   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02F5   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02F6                      M         TABLE
02F6   3435 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_5_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_3)
02FF                      M                                         MENU_5_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
02FF   08??               M                 MOVFW   SYMBOL_POINTER
0300   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0301   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0302   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0303   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0304   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0305   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0306   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0307                      M         TABLE
0307   3435 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_5_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_4)
0310                      M                                         MENU_5_SUBMENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0310   08??               M                 MOVFW   SYMBOL_POINTER
0311   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0312   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0313   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0314   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0315   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0316   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0317   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0318                      M         TABLE
0318   3435 342E 3434     M                                                 DT              MENU_SUBMENU_NAME_5_4,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
Warning[207]: Found label after column 1. (MENU_6_SUBMENU_1)
0321                      M                                         MENU_6_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0321   08??               M                 MOVFW   SYMBOL_POINTER
0322   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0323   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0324   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0325   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0326   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0327   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0328   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0329                      M         TABLE
0329   3436 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_6_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_6_SUBMENU_2)
0332                      M                                         MENU_6_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0332   08??               M                 MOVFW   SYMBOL_POINTER
0333   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0334   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0335   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0336   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0337   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0338   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0339   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
033A                      M         TABLE
033A   3436 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_6_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_6_SUBMENU_3)
0343                      M                                         MENU_6_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0343   08??               M                 MOVFW   SYMBOL_POINTER
0344   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0345   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0346   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0347   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0348   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0349   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
034A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
034B                      M         TABLE
034B   3436 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_6_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 7 пункта меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_7+1
                          M                                         MENU_7_SUBMENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_7_4,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_7+1
                          M                                         MENU_7_SUBMENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_8_4,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00501 ;===================================================================================================
                      00502         INCLUDE MENU_ACTIONS.ASM
Warning[205]: Found directive in column 1. (IF)
                      00001 IF      USE_MENU_ACTION
0354                  00002 MENU_ACTION
                      00003         GOTO_MENU_ACTION
                          M                                         MOD_PCL INDEX_MENU                      
  0000                    M                 LOCAL   TABLE
0354   08??               M                 MOVFW   INDEX_MENU
0355   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0356   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0357   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0358   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0359   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
035A   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
035B   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
035C                      M         TABLE
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0001                    M                                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
035C   2???               M                                         GOTO    MENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
035D   2???               M                                         GOTO    MENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
035E   2???               M                                         GOTO    MENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
035F   2???               M                                         GOTO    MENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
0360   2???               M                                         GOTO    MENU_5_ACTION
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
0361   2???               M                                         GOTO    MENU_6_ACTION
Warning[207]: Found label after column 1. (A)
  00000007                M                                         A+=1
                          M                                 ENDW
                      00004 ;===================================================================================================
0362                  00005 MENU_1_ACTION                                                   ; Выполняем действие 1 пункта меню
0362   2???           00006         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00007         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
0363   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
0364                      M                                         PRINT_LCD_STRING
0364   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
0365   39FF               M                                                 ANDLW   0FFH
0366   1903               M                                                 BTFSC   STATUS,Z
0367   2???               M                                                 GOTO    END_LCD_STRING          
0368   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0369   0A??               M                                                 INCF    SYMBOL_POINTER  
036A   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
036B                      M                                         END_LCD_STRING  
036B   01??           00008         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
036C   2???           00009         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
036D   0B??           00010         DECFSZ  TEMP_3
036E   2???           00011         GOTO    $-2
036F   2???           00012         GOTO    END_MENU_ACTION
0370                  00013 MENU_2_ACTION                                                   ; Выполняем действие 2 пункта меню
                      00014 ;       nop
0370   2???           00015         GOTO    END_MENU_ACTION
0371                  00016 MENU_3_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00017 ;       nop
0371   2???           00018         GOTO    END_MENU_ACTION
0372                  00019 MENU_4_ACTION                                                   ; Выполняем действие 4 пункта меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00020 ;       nop
0372   2???           00021         GOTO    END_MENU_ACTION
0373                  00022 MENU_5_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00023 ;       nop
0373   2???           00024         GOTO    END_MENU_ACTION
0374                  00025 MENU_6_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00026 ;       nop
0374   2???           00027         GOTO    END_MENU_ACTION
0375                  00028 MENU_7_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00029 ;       nop
0375   2???           00030         GOTO    END_MENU_ACTION
0376                  00031 MENU_8_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00032 ;       nop
0376   2???           00033         GOTO    END_MENU_ACTION
Warning[205]: Found directive in column 1. (ENDIF)
                      00034 ENDIF
                      00035 ;===================================================================================================
0377                  00036 MENU_1_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 1 пункта
                      00037 ;       nop
0377   2???           00038         GOTO    END_ACTION
0378                  00039 MENU_1_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 1 пункта
                      00040 ;       nop
0378   2???           00041         GOTO    END_ACTION
0379                  00042 MENU_1_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 1 пункта
                      00043 ;       nop
0379   2???           00044         GOTO    END_ACTION
                      00045 ;---------------------------------------------------------------------------------------------------
037A                  00046 MENU_2_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 2 пункта
                      00047 ;       nop
037A   2???           00048         GOTO    END_ACTION
037B                  00049 MENU_2_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 2 пункта
                      00050 ;       nop
037B   2???           00051         GOTO    END_ACTION
037C                  00052 MENU_2_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 2 пункта
                      00053 ;       nop
037C   2???           00054         GOTO    END_ACTION
                      00055 ;---------------------------------------------------------------------------------------------------
037D                  00056 MENU_3_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 3 пункта
                      00057 ;       nop
037D   2???           00058         GOTO    END_ACTION
037E                  00059 MENU_3_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 3 пункта
                      00060 ;       nop
037E   2???           00061         GOTO    END_ACTION
037F                  00062 MENU_3_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 3 пункта
                      00063 ;       nop
037F   2???           00064         GOTO    END_ACTION
                      00065 ;---------------------------------------------------------------------------------------------------
0380                  00066 MENU_4_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 4 пункта
                      00067 ;       nop
0380   2???           00068         GOTO    END_ACTION
0381                  00069 MENU_4_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 4 пункта
                      00070 ;       nop
0381   2???           00071         GOTO    END_ACTION
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0382                  00072 MENU_4_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 4 пункта
                      00073 ;       nop
0382   2???           00074         GOTO    END_ACTION                                                              
                      00075 ;---------------------------------------------------------------------------------------------------
0383                  00076 MENU_5_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 5 пункта
                      00077 ;       nop
0383   2???           00078         GOTO    END_ACTION
0384                  00079 MENU_5_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00080 ;       nop
0384   2???           00081         GOTO    END_ACTION
0385                  00082 MENU_5_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 5 пункта
                      00083 ;       nop
0385   2???           00084         GOTO    END_ACTION
0386                  00085 MENU_5_SUBMENU_4_ACTION                                 ; Выполняем действие 4 подпункта 5 пункта
                      00086 ;       nop
0386   2???           00087         GOTO    END_ACTION
                      00088 ;---------------------------------------------------------------------------------------------------
0387                  00089 MENU_6_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 5 пункта
                      00090 ;       nop
0387   2???           00091         GOTO    END_ACTION
0388                  00092 MENU_6_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00093 ;       nop
0388   2???           00094         GOTO    END_ACTION
0389                  00095 MENU_6_SUBMENU_3_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00096 ;       nop
0389   2???           00097         GOTO    END_ACTION
038A                  00098 MENU_6_SUBMENU_4_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00099 ;       nop
038A   2???           00100         GOTO    END_ACTION
                      00503 ;===================================================================================================
                      00504         END
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

ACTIONS_MENU_FLAGS                B'00000001'
ADD_PCL                           
C                                 00000000
CHECK_1                           00000021
CHECK_2                           0000008E
CLR_DISP                          00000001
CLR_DISPLAY_ROUTINE               00000000
CLR_RAM_MACRO                     
CNTL_TRIS_MASK                    000000F5
CORRECT_INDEX_MENU                00000036
CORRECT_INDEX_MENU_2              00000043
CORRECT_INDEX_SUBMENU             000000A8
CORRECT_INDEX_SUBMENU_2           000000B6
CREATE_MENU_NAMES                 
CREATE_SUBMENU_NAMES              
CREATE_SUBMENU_NAMES_             
CURSOR_DOWN_MENU                  00000068
CURSOR_DOWN_SUBMENU               000000DD
CURSOR_UP_MENU                    0000005F
CURSOR_UP_SUBMENU                 000000D3
DC                                00000001
DD_RAM_ADDR                       00000080
DD_RAM_UL                         00000080
DEBOUNCE_DELAY                    000000F9
DELAY_4MS                         00000000
DISP_OFF                          00000008
DISP_ON                           0000000C
DISP_ON_B                         0000000F
DISP_ON_C                         0000000E
DOWN                              PORTB,5
DRAW_CURSOR                       
DRAW_CURSOR_ROUTINE               0000012D
DRAW_MENU                         0000001A
DRAW_MENU_ROUTINE                 00000106
DRAW_SUBMENU                      00000087
DRAW_SUBMENU_ROUTINE              0000010E
E                                 00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
END_ACTION                        000000EC
END_MENU_ACTION                   0000007F
ENTER                             PORTB,6
ENTER_MENU                        00000073
ENTER_SUBMENU                     000000EA
ENTRY_DEC                         00000004
ENTRY_DEC_S                       00000005
ENTRY_INC                         00000006
ENTRY_INC_S                       00000007
EXIT                              PORTB,7
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

EXIT_DELAY                        .20
EXIT_MENU                         00000071
EXIT_SUBMENU                      000000E6
F                                 00000001
FLAGS                             00000000
FSR                               00000004
GIE                               00000007
GOTO_MENU_ACTION                  
GOTO_PUNKT_MENU                   
GOTO_PUNKT_SUBMENU                
GOTO_PUNKT_SUBMENU_ACTION         
INDEX_MENU                        00000000
INDEX_SUBMENU                     00000001
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
KNOWN_ZERO                        00000000
LAST_SYMBOL_FIRST_LINE            0000008F
LAST_SYMBOL_SECOND_LINE           000000CF
LCD_CNTL                          00000005
LCD_CNTL_TRIS                     00000085
LCD_DATA                          00000006
LCD_DATA_TRIS                     00000086
LOOP_1                            00000078
LOOP_DELAY                        000000FC
LOOP_DRAW_MENU                    00000107
LOOP_DRAW_SUBMENU                 0000010F
LOOP_MENU                         00000050
LOOP_SUBMENU                      000000C4
MAIN                              00000000
MENU_1                            00000211
MENU_1_ACTION                     00000362
MENU_1_SUBMENU_1_ACTION           00000377
MENU_1_SUBMENU_2_ACTION           00000378
MENU_1_SUBMENU_3_ACTION           00000379
MENU_1_TABLE                      00000189
MENU_1_TABLE_ACTION               000001D4
MENU_2                            00000222
MENU_2_ACTION                     00000370
MENU_2_SUBMENU_1                  00000277
MENU_2_SUBMENU_1_ACTION           0000037A
MENU_2_SUBMENU_2_ACTION           0000037B
MENU_2_SUBMENU_3_ACTION           0000037C
MENU_2_TABLE                      00000191
MENU_2_TABLE_ACTION               000001DC
MENU_3                            00000233
MENU_3_ACTION                     00000371
MENU_3_SUBMENU_1                  00000288
MENU_3_SUBMENU_1_ACTION           0000037D
MENU_3_SUBMENU_2                  00000299
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

MENU_3_SUBMENU_2_ACTION           0000037E
MENU_3_SUBMENU_3_ACTION           0000037F
MENU_3_TABLE                      0000019A
MENU_3_TABLE_ACTION               000001E5
MENU_4                            00000244
MENU_4_ACTION                     00000372
MENU_4_SUBMENU_1                  000002AA
MENU_4_SUBMENU_1_ACTION           00000380
MENU_4_SUBMENU_2                  000002BB
MENU_4_SUBMENU_2_ACTION           00000381
MENU_4_SUBMENU_3                  000002CC
MENU_4_SUBMENU_3_ACTION           00000382
MENU_4_TABLE                      000001A4
MENU_4_TABLE_ACTION               000001EF
MENU_5                            00000255
MENU_5_ACTION                     00000373
MENU_5_SUBMENU_1                  000002DD
MENU_5_SUBMENU_1_ACTION           00000383
MENU_5_SUBMENU_2                  000002EE
MENU_5_SUBMENU_2_ACTION           00000384
MENU_5_SUBMENU_3                  000002FF
MENU_5_SUBMENU_3_ACTION           00000385
MENU_5_SUBMENU_4                  00000310
MENU_5_SUBMENU_4_ACTION           00000386
MENU_5_TABLE                      000001AF
MENU_5_TABLE_ACTION               000001FA
MENU_6                            00000266
MENU_6_ACTION                     00000374
MENU_6_SUBMENU_1                  00000321
MENU_6_SUBMENU_1_ACTION           00000387
MENU_6_SUBMENU_2                  00000332
MENU_6_SUBMENU_2_ACTION           00000388
MENU_6_SUBMENU_3                  00000343
MENU_6_SUBMENU_3_ACTION           00000389
MENU_6_SUBMENU_4_ACTION           0000038A
MENU_6_TABLE                      000001BB
MENU_6_TABLE_ACTION               00000206
MENU_7_ACTION                     00000375
MENU_8_ACTION                     00000376
MENU_ACTION                       00000354
MENU_COUNTER                      00000004
MENU_HEANDLER                     00000019
MENU_NAME_1                       "1.Menu_1"
MENU_NAME_2                       "2.Menu_2"
MENU_NAME_3                       "3.Menu_3"
MENU_NAME_4                       "4.Menu_4"
MENU_NAME_5                       "5.Menu_5"
MENU_NAME_6                       "6.Menu_6"
MENU_SUBMENU_NAME_1_1             "1.1.Subm"
MENU_SUBMENU_NAME_1_2             "1.2.Subm"
MENU_SUBMENU_NAME_1_3             "1.3.Subm"
MENU_SUBMENU_NAME_1_4             "1.4.Subm"
MENU_SUBMENU_NAME_2_1             "2.1.Subm"
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 53


SYMBOL TABLE
  LABEL                             VALUE 

MENU_SUBMENU_NAME_2_2             "2.2.Subm"
MENU_SUBMENU_NAME_2_3             "2.3.Subm"
MENU_SUBMENU_NAME_2_4             "2.4.Subm"
MENU_SUBMENU_NAME_3_1             "3.1.Subm"
MENU_SUBMENU_NAME_3_2             "3.2.Subm"
MENU_SUBMENU_NAME_3_3             "3.3.Subm"
MENU_SUBMENU_NAME_3_4             "3.4.Subm"
MENU_SUBMENU_NAME_4_1             "4.1.Subm"
MENU_SUBMENU_NAME_4_2             "4.2.Subm"
MENU_SUBMENU_NAME_4_3             "4.3.Subm"
MENU_SUBMENU_NAME_4_4             "4.4.Subm"
MENU_SUBMENU_NAME_5_1             "5.1.Subm"
MENU_SUBMENU_NAME_5_2             "5.2.Subm"
MENU_SUBMENU_NAME_5_3             "5.3.Subm"
MENU_SUBMENU_NAME_5_4             "5.4.Subm"
MENU_SUBMENU_NAME_6_1             "6.1.Subm"
MENU_SUBMENU_NAME_6_2             "6.2.Subm"
MENU_SUBMENU_NAME_6_3             "6.3.Subm"
MENU_SUBMENU_NAME_6_4             "6.4.Subm"
MENU_TABLE                        0000016D
MOD_PCL                           
N                                 00000000
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
NUM_OF_MAIN_MENU_PUNKTS           .6
NUM_OF_SUBMENU                    00000002
NUM_OF_SUBMENU_PUNKTS_1           .0
NUM_OF_SUBMENU_PUNKTS_2           .1
NUM_OF_SUBMENU_PUNKTS_3           .2
NUM_OF_SUBMENU_PUNKTS_4           .3
NUM_OF_SUBMENU_PUNKTS_5           .4
NUM_OF_SUBMENU_PUNKTS_6           .3
NUM_OF_SUBMENU_TABLE              0000015F
OFFSET                            00000000
ONLY_WRITE                        00000001
OPTION_REG                        00000081
PCL                               00000002
PCLATH                            0000000A
POP                               
PORTA                             00000005
PORTB                             00000006
PRESSING_DOWN                     0000003B
PRESSING_DOWN_2                   000000AE
PRESS_DOWN                        FLAGS,1
PRESS_ENTER                       FLAGS,3
PRESS_EXIT                        FLAGS,2
PRESS_UP                          FLAGS,0
PRINT_LCD_STRING_MACRO            
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 54


SYMBOL TABLE
  LABEL                             VALUE 

PUSH                              
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RETLW_NUM_OF_SUBMENU_PUNKTS       
ROTATE_ACTION_MENU_FLAGS          0000007D
RP0                               00000005
RP1                               00000006
RS                                00000003
SAVE_CURSOR_POSITION              1
SAVE_POSITION                     00000008
SECOND_LINE                       000000C0
SECOND_LINE_MACRO                 
SECOND_STRING_ROUTINE             0000012A
SEND_LCD_COMMAND                  00000000
SEND_LCD_SYMBOL                   00000000
SKIP_CHECK_1                      00000027
SKIP_CHECK_2                      00000095
SKIP_CORRECT_INDEX_MENU_2         00000048
SKIP_CORRECT_INDEX_MENU_3         0000004B
SKIP_CORRECT_INDEX_SUBMENU_2      000000BC
SKIP_CORRECT_INDEX_SUBMENU_3      000000BF
STATUS                            00000003
SUBMENU_TABLE                     0000017B
SWITCH_ACTION                     000001C6
SYMBOL_POINTER                    00000003
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TABLE_ACTION_COMPLETE             00000000
TABLE_ZASTAVKA_FIRST_STRING       00000131
TABLE_ZASTAVKA_SECOND_STRING      00000148
TEMP_1                            00000005
TEMP_2                            00000006
TEMP_3                            00000007
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TRISA                             00000085
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 55


SYMBOL TABLE
  LABEL                             VALUE 

TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
UP                                PORTB,4
USE_4_BIT_MODE                    00000001
USE_HIGH_NIBLE                    00000000
USE_MENU_ACTION                   1
USE_MOVING_CURSOR                 1
USE_ONE_PORT                      00000000
USE_RBIE                          0
USE_SHORT_MOD_PCL                 1
USE_STATIC_CURSOR                 0
USE_TOP_LAST_CURSOR               1
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Y                                 00000001
Z                                 00000002
ZASTAVKA                          00000116
ZASTAVKA_FIRST_STRING             "  MicroMenuLib"
ZASTAVKA_SECOND_STRING            "  ver 1.0 beta"
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_MICROMENU_00F7                   000000F7
_MICROMENU_0102                   00000102
_MICROMENU_036E                   0000036E
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
MPASM  5.51                 MICROMENU_LIB.ASM   12-21-2018  19:45:30         PAGE 56


SYMBOL TABLE
  LABEL                             VALUE 

_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001

Errors   :     0
Warnings :   194 reported,     0 suppressed
Messages :    43 reported,     0 suppressed

