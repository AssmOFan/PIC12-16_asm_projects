MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         INCLUDE MICROMENU_LIB.H
                      00001 ; Микроменю на базе двухстрочного индикатора HD44780 и четырехпозиционного джойстика (крестовины кнопок)
                      00002 ; Библиотека построена на основе "индексов". Меню имеет 2 уровня вложености (вход в пункт меню + вход в 
                            подпункт меню)
                      00003 ; При навигации по меню изменяются номера ("индексы") текущего пункта меню и текущего подпункта меню
                      00004 ; На основе этих данных и выводится информация на дисплей/совершаются действия
                      00005 
                      00006         INCLUDE HARDWARE_PROFILE.INC
                      00001         INCLUDE P16F84.INC
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F84 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00206         LIST
                      00002         LIST P=16F84
                      00007         INCLUDE MACRO.H
                      00001 
                      00002 #DEFINE USE_SHORT_MOD_PCL       1       ; Использовать "укороченную" версию макроса модификации PCL, поз
                            воляет экономить 1 слово памяти на каждом вызове макроса ценой 1 лишней ячейки ОЗУ
                      00003 
                      00004 PUSH    MACRO
                      00005                 MOVWF   W_TEMP
                      00006                 SWAPF   STATUS,W
                      00007                 MOVWF   STATUS_TEMP
                      00008                 ENDM
                      00009 
                      00010 POP             MACRO
                      00011                 SWAPF   STATUS_TEMP,W
                      00012                 MOVWF   STATUS
                      00013                 SWAPF   W_TEMP,F
                      00014                 SWAPF   W_TEMP,W
                      00015                 ENDM
                      00016 
                      00017 MOD_PCL MACRO   TARGET                  ; Макрос, позволяет размещать таблицы на границах страниц
                      00018                 LOCAL   TABLE
                      00019                 MOVFW   TARGET
                      00020                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
                      00021                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                      00022         IF      USE_SHORT_MOD_PCL
                      00023                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
                      00024                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                      00025         ELSE
                      00026                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                      00027                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                      00028                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                      00029         ENDIF
                      00030                 MOVWF   PCLATH                  ; Установить старшую часть адреса
                      00031                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
                      00032                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00033 TABLE
                      00034                 ENDM
                      00035 
                      00036 ADD_PCL MACRO   TARGET,ADDRESS  ; Макрос, позволяет удобно указывать страницу для следующего за ним кода
                      00037                                 MOVFW   TARGET  
                      00038                                 CLRF    PCLATH
                      00039                         IF      (ADDRESS==0X100)
                      00040                                 BSF             PCLATH,0
                      00041                         ENDIF
                      00042                         IF      (ADDRESS==0X200)
                      00043                                 BSF             PCLATH,1
                      00044                         ENDIF
                      00045                         IF      (ADDRESS==0X300)
                      00046                                 BSF             PCLATH,0                                
                      00047                                 BSF             PCLATH,1
                      00048                         ENDIF
                      00049                         IF      (ADDRESS==0X400)
                      00050                                 BSF             PCLATH,2                                
                      00051                         ENDIF
                      00052                                 ADDWF   PCL
                      00053                                 ENDM
                      00008         INCLUDE HD44780_LIB.H
                      00001         INCLUDE HARDWARE_PROFILE.INC
                      00003         INCLUDE P16F84.INC
                      00207         LIST
                      00208 
                      00209 ;==========================================================================
                      00210 ;  MPASM PIC16F84 processor include
                      00211 ; 
                      00212 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00213 ;==========================================================================
                      00214 
Message[310]: Superseding current maximum RAM and RAM map.
                      00412         LIST
                      00004         LIST P=16F84
                      00002 
  00000001            00003 USE_4_BIT_MODE  EQU             1                               ; YES/NO
  00000000            00004 USE_HIGH_NIBLE  EQU             0                               ; YES/NO
  00000000            00005 USE_ONE_PORT    EQU             0                               ; YES/NO
  00000001            00006 ONLY_WRITE              EQU             1                               ; YES/NO
                      00007 
  00000006            00008 LCD_DATA                EQU             PORTB                   ; Описываем порт линий данных
  00000086            00009 LCD_DATA_TRIS   EQU             TRISB
                      00010 
                      00011         IF      (USE_4_BIT_MODE && USE_ONE_PORT); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00012 
                      00013 LCD_CNTL                EQU             LCD_DATA                ; то так и опишем
                      00014 LCD_CNTL_TRIS   EQU             LCD_DATA_TRIS
                      00015 
                      00016         ELSE
                      00017 
  00000005            00018 LCD_CNTL                EQU             PORTA                   ; Иначе зададим любой другой
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000085            00019 LCD_CNTL_TRIS   EQU             TRISA
                      00020         ENDIF
                      00021         
                      00022         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && ONLY_WRITE)
                      00023 E                               EQU             2
                      00024 RS                              EQU             3
                      00025 CNTL_TRIS_MASK  EQU             B'11110011'             ; Маска настройки линий управлениЯ
                      00026         ENDIF
                      00027 
                      00028         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && !ONLY_WRITE)
                      00029 E                               EQU             1
                      00030 RW                              EQU             2
                      00031 RS                              EQU             3
                      00032 CNTL_TRIS_MASK  EQU             B'11110001'             ; Маска настройки линий управлениЯ
                      00033         ENDIF   
                      00034 
                      00035         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && ONLY_WRITE)
                      00036 E                               EQU             4
                      00037 RS                              EQU             5
                      00038 CNTL_TRIS_MASK  EQU             B'11001111'             ; Маска настройки линий управлениЯ
                      00039         ENDIF   
                      00040 
                      00041         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && !ONLY_WRITE)
                      00042 E                               EQU             4
                      00043 RW                              EQU             5
                      00044 RS                              EQU             6
                      00045 CNTL_TRIS_MASK  EQU             B'10001111'             ; Маска настройки линий управлениЯ
                      00046 
                      00047         ELSE    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
                      00048         
  00000001            00049 E                               EQU             1
  00000003            00050 RS                              EQU             3
  000000F5            00051 CNTL_TRIS_MASK  EQU             B'11110101'             ; Маска настройки линий управления
                      00052         ENDIF
                      00053 
  0000000C            00054 DISP_ON                 EQU             B'00001100'             ; Display on
  0000000E            00055 DISP_ON_C               EQU             B'00001110'             ; Display on, Cursor on
  0000000F            00056 DISP_ON_B               EQU             B'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00057 DISP_OFF                EQU             B'00001000'             ; Display off
  00000001            00058 CLR_DISP                EQU             B'00000001'             ; Clear the Display
  00000006            00059 ENTRY_INC               EQU             B'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00060 ENTRY_INC_S             EQU             B'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00061 ENTRY_DEC               EQU             B'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00062 ENTRY_DEC_S             EQU             B'00000101'             ;
  00000080            00063 DD_RAM_ADDR             EQU             B'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00064 DD_RAM_UL               EQU             B'10000000'             ; Upper Left coner of the Display
  000000C0            00065 SECOND_LINE             EQU             B'11000000'             ; Move cursor to second line
  0000008F            00066 LAST_SYMBOL_FIRST_LINE  EQU     B'10001111'     ; Установим курсор на последний символ 1-й строки
  000000CF            00067 LAST_SYMBOL_SECOND_LINE EQU     B'11001111'     ; Установим курсор на последний символ 2-й строки       
                                                            
                      00009 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00010 #DEFINE USE_STATIC_CURSOR               0                               ; Всегда рисовать курсор в конце
                             1-й строки
                      00011 #DEFINE USE_MOVING_CURSOR               1                               ; Использовать перемещаемый курс
                            ор (повышает удобство использования меню и размер прошивки)
                      00012 #DEFINE USE_TOP_LAST_CURSOR             1                               ; Использовать отображение "перв
                            ый пункт всегда сверху" и "последний пункт всегда снизу" (повышает удобство использования меню и
                      00013 #DEFINE USE_RBIE                                1                               ; Использовать прерывани
                            е по изминению состояния PORTB для обработки кнопок (позволяет использовать сон)
                      00014 #DEFINE USE_MENU_ACTION                 1                               ; Использовать возможность запус
                            ка действий при входе в пункт меню (повышает размер прошивки)
                      00015 
                      00016         IF      USE_MENU_ACTION 
                      00017 #DEFINE ACTIONS_MENU_FLAGS              B'00000001'             ; Выставленный бит - есть действие при в
                            ходе в этот пункт меню (не забыть заполнить обработчик действия !!!)
                      00018         ENDIF
                      00019 
                      00020 #DEFINE UP                                              PORTB,4
                      00021 #DEFINE DOWN                                    PORTB,5
                      00022 #DEFINE ENTER                                   PORTB,6
                      00023 #DEFINE EXIT                                    PORTB,7
                      00024 
                      00025 #DEFINE PRESS_UP                                FLAGS,0
                      00026 #DEFINE PRESS_DOWN                              FLAGS,1
                      00027 #DEFINE PRESS_ENTER                             FLAGS,2
                      00028 #DEFINE PRESS_EXIT                              FLAGS,3
                      00029         
                      00030 #DEFINE EXIT_DELAY                              .20                             ; Количество опросов кно
                            пок, до автовыхода в предыдущий уровень (* 0,8 сек)
                      00031 
                      00032 #DEFINE ZASTAVKA_FIRST_STRING   "  MicroMenuLib"
                      00033 #DEFINE ZASTAVKA_SECOND_STRING  "  ver 1.0 beta"
                      00034 
                      00035 #DEFINE ACTION_COMPLETE_STRING  "Action Complete!"
                      00036 
                      00037 #DEFINE NUM_OF_MAIN_MENU_PUNKTS .6                              ; Количество пунктов меню, до 8 (можно и
                             больше, но действия при входе в меню доступны только для первых 8 пунктов) 
                      00038 
                      00039 #DEFINE MENU_NAME_1                             "1.Menu_1"
                      00040 #DEFINE MENU_NAME_2                             "2.Menu_2"
                      00041 #DEFINE MENU_NAME_3                             "3.Menu_3"
                      00042 #DEFINE MENU_NAME_4                             "4.Menu_4"
                      00043 #DEFINE MENU_NAME_5                             "5.Menu_5"
                      00044 #DEFINE MENU_NAME_6                             "6.Menu_6"      
                      00045 
                      00046 #DEFINE NUM_OF_SUBMENU_PUNKTS_1 .0                              ; Количество подпунктов каждого пункта м
                            еню (в теории до 64, но больше 8 не проверялось, памяти в контроллере не хватило)
                      00047                                                                                                 ; Не заб
                            ываем оформить обработчик для каждого действия !!!
                      00048 #DEFINE MENU_SUBMENU_NAME_1_1   "1.1.SubMenu"
                      00049 #DEFINE MENU_SUBMENU_NAME_1_2   "1.2.SubMenu"
                      00050 #DEFINE MENU_SUBMENU_NAME_1_3   "1.3.SubMenu"
                      00051 
                      00052 #DEFINE NUM_OF_SUBMENU_PUNKTS_2 .1
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00053 
                      00054 #DEFINE MENU_SUBMENU_NAME_2_1   "2.1.SubMenu"
                      00055 #DEFINE MENU_SUBMENU_NAME_2_2   "2.2.SubMenu"
                      00056 #DEFINE MENU_SUBMENU_NAME_2_3   "2.3.SubMenu"
                      00057                                 
                      00058 #DEFINE NUM_OF_SUBMENU_PUNKTS_3 .2
                      00059 
                      00060 #DEFINE MENU_SUBMENU_NAME_3_1   "3.1.SubMenu"
                      00061 #DEFINE MENU_SUBMENU_NAME_3_2   "3.2.SubMenu"
                      00062 #DEFINE MENU_SUBMENU_NAME_3_3   "3.3.SubMenu"
                      00063 
                      00064 #DEFINE NUM_OF_SUBMENU_PUNKTS_4 .3
                      00065 
                      00066 #DEFINE MENU_SUBMENU_NAME_4_1   "4.1.SubMenu"
                      00067 #DEFINE MENU_SUBMENU_NAME_4_2   "4.2.SubMenu"
                      00068 #DEFINE MENU_SUBMENU_NAME_4_3   "4.3.SubMenu"
                      00069 
                      00070 #DEFINE NUM_OF_SUBMENU_PUNKTS_5 .4
                      00071 
                      00072 #DEFINE MENU_SUBMENU_NAME_5_1   "5.1.SubMenu"
                      00073 #DEFINE MENU_SUBMENU_NAME_5_2   "5.2.SubMenu"
                      00074 #DEFINE MENU_SUBMENU_NAME_5_3   "5.3.SubMenu"
                      00075 #DEFINE MENU_SUBMENU_NAME_5_4   "5.4.SubMenu"
                      00076 
                      00077 #DEFINE NUM_OF_SUBMENU_PUNKTS_6 .1
                      00078 
                      00079 #DEFINE MENU_SUBMENU_NAME_6_1   "6.1.SubMenu"
                      00080 ;=======================================================================================================
                            =========
                      00081 CREATE_MENU_NAMES       MACRO                           ; Макрос, создает имена всех пунктов меню
                      00082                                         LOCAL   A=1
                      00083                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00084                                                 MENU_#V(A)
                      00085                                                 MOD_PCL SYMBOL_POINTER
                      00086                                                 DT              MENU_NAME_#V(A),0
                      00087                                                 A+=1
                      00088                                         ENDW
                      00089                                         ENDM
                      00090 ;=======================================================================================================
                            =========
                      00091 RETLW_NUM_OF_SUBMENU_PUNKTS     MACRO           ; Макрос, возвращает количество пунктов нужного подменю
                      00092                                                         MOD_PCL INDEX_MENU
                      00093                                                         LOCAL   A=1
                      00094                                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00095                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_#V(A)
                      00096                                                                 A+=1
                      00097                                                         ENDW
                      00098                                                         ENDM
                      00099 ;=======================================================================================================
                            =========
                      00100 GOTO_PUNKT_MENU MACRO                                   ; Макрос, создает переходы на все пункты меню
                      00101                                 MOD_PCL INDEX_MENU
                      00102                                 LOCAL   A=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00103                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00104                                         GOTO    MENU_#V(A)
                      00105                                         A+=1
                      00106                                 ENDW
                      00107                                 ENDM
                      00108 ;=======================================================================================================
                            =========
                      00109 GOTO_PUNKT_SUBMENU      MACRO                           ; Макрос, создает переходы на имена всех подпунк
                            тов меню
                      00110                                         MOD_PCL INDEX_MENU                              
                      00111                                         LOCAL   C=1
                      00112                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00113                                                 GOTO    MENU_#V(C)_TABLE
                      00114                                                 C+=1
                      00115                                         ENDW
                      00116                                         LOCAL   D=1
                      00117                                         LOCAL   A
                      00118                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00119                                                 A=1     
                      00120                                                 MENU_#V(D)_TABLE
                      00121                                                 MOD_PCL INDEX_SUBMENU
                      00122                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00123                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                      00124                                                         A+=1
                      00125                                                 ENDW
                      00126                                                 D+=1
                      00127                                         ENDW    
                      00128                                         ENDM
                      00129 ;=======================================================================================================
                            =========
                      00130 GOTO_PUNKT_SUBMENU_ACTION       MACRO           ; Макрос, создает переходы на действия всех подпунктов м
                            еню
                      00131                                                         MOD_PCL INDEX_MENU                              
                      00132                                                         LOCAL   C=1
                      00133                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00134                                                                 GOTO    MENU_#V(C)_TABLE_ACTION
                      00135                                                                 C+=1
                      00136                                                         ENDW
                      00137                                                         LOCAL   D=1
                      00138                                                         LOCAL   A
                      00139                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00140                                                                 A=1     
                      00141                                                                 MENU_#V(D)_TABLE_ACTION
                      00142                                                                 MOD_PCL INDEX_SUBMENU
                      00143                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00144                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                      00145                                                                         A+=1
                      00146                                                                 ENDW
                      00147                                                                 D+=1
                      00148                                                         ENDW
                      00149                                                         ENDM
                      00150 ;=======================================================================================================
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            =========
                      00151 CREATE_SUBMENU_NAMES    MACRO                           ; Макрос, создает имена всех подпунктов меню
                      00152 ; К сожаления, почему-то не получилось создавать имена всех подпунктов меню в цикле, поэтому приходится 
                            вызывать макрос столько раз, сколько есть пунктов меню
                      00153 ; Внимание, если количество пунктов в меню превышает 8, просто добавьте еще
                      00154                                                 LOCAL   D=1
                      00155 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00156 ; Подпункты 1 пункта меню
                      00157 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00158                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00159                                                         LOCAL   A=1     
                      00160                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00161                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00162                                                                 MOD_PCL SYMBOL_POINTER
                      00163                                                                 DT              MENU_SUBMENU_NAME_1_#V(A
                            ),0
                      00164                                                                 A+=1
                      00165                                                         ENDW
                      00166                                                         D+=1
                      00167                                                 ENDIF
                      00168 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00169 ; Подпункты 2 пункта меню
                      00170 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00171                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00172                                                         LOCAL   A=1     
                      00173                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00174                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00175                                                                 MOD_PCL SYMBOL_POINTER
                      00176                                                                 DT              MENU_SUBMENU_NAME_2_#V(A
                            ),0
                      00177                                                                 A+=1
                      00178                                                         ENDW
                      00179                                                         D+=1
                      00180                                                 ENDIF
                      00181 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00182 ; Подпункты 3 пункта меню
                      00183 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00184                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00185                                                         LOCAL   A=1     
                      00186                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00187                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00188                                                                 MOD_PCL SYMBOL_POINTER
                      00189                                                                 DT              MENU_SUBMENU_NAME_3_#V(A
                            ),0
                      00190                                                                 A+=1
                      00191                                                         ENDW
                      00192                                                         D+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00193                                                 ENDIF
                      00194 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00195 ; Подпункты 4 пункта меню
                      00196 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00197                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00198                                                         LOCAL   A=1     
                      00199                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00200                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00201                                                                 MOD_PCL SYMBOL_POINTER
                      00202                                                                 DT              MENU_SUBMENU_NAME_4_#V(A
                            ),0
                      00203                                                                 A+=1
                      00204                                                         ENDW
                      00205                                                         D+=1
                      00206                                                 ENDIF
                      00207 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00208 ; Подпункты 5 пункта меню
                      00209 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00210                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00211                                                         LOCAL   A=1     
                      00212                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00213                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00214                                                                 MOD_PCL SYMBOL_POINTER
                      00215                                                                 DT              MENU_SUBMENU_NAME_5_#V(A
                            ),0
                      00216                                                                 A+=1
                      00217                                                         ENDW
                      00218                                                         D+=1
                      00219                                                 ENDIF
                      00220 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00221 ; Подпункты 6 пункта меню
                      00222 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00223                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00224                                                         LOCAL   A=1     
                      00225                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00226                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00227                                                                 MOD_PCL SYMBOL_POINTER
                      00228                                                                 DT              MENU_SUBMENU_NAME_6_#V(A
                            ),0
                      00229                                                                 A+=1
                      00230                                                         ENDW
                      00231                                                         D+=1
                      00232                                                 ENDIF
                      00233 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00234 ; Подпункты 7 пункта меню
                      00235 ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                      00236                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00237                                                         LOCAL   A=1     
                      00238                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00239                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00240                                                                 MOD_PCL SYMBOL_POINTER
                      00241                                                                 DT              MENU_SUBMENU_NAME_7_#V(A
                            ),0
                      00242                                                                 A+=1
                      00243                                                         ENDW
                      00244                                                         D+=1
                      00245                                                 ENDIF
                      00246 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00247 ; Подпункты 8 пункта меню
                      00248 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00249                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00250                                                         LOCAL   A=1     
                      00251                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00252                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00253                                                                 MOD_PCL SYMBOL_POINTER
                      00254                                                                 DT              MENU_SUBMENU_NAME_8_#V(A
                            ),0
                      00255                                                                 A+=1
                      00256                                                         ENDW
                      00257                                                         D+=1
                      00258                                                 ENDIF
                      00259 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00260                                                 ENDM
                      00261 ;=======================================================================================================
                            =========
                      00262         IF      USE_MENU_ACTION 
                      00263 GOTO_MENU_ACTION        MACRO           ; Макрос, создает переходы на действия всех пунктов меню (если в
                            ключена соответствующая опция)
                      00264                                         MOD_PCL INDEX_MENU                              
                      00265                                         LOCAL   A=1
                      00266                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00267                                                 GOTO    MENU_#V(A)_ACTION
                      00268                                                 A+=1
                      00269                                         ENDW
                      00270                                         ENDM
                      00271         ENDIF
                      00272 ;=======================================================================================================
                            =========
                      00273 DRAW_CURSOR     MACRO   LAST_SYMBOL
                      00274                         MOVLW   LAST_SYMBOL
                      00275                         CALL    DRAW_CURSOR_ROUTINE
                      00276                         ENDM
                      00277                                                 
                      00002         INCLUDE HD44780_LIB.H
                      00068         INCLUDE HARDWARE_PROFILE.INC
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00005         INCLUDE P16F84.INC
                      00413         LIST
                      00414 
                      00415 ;==========================================================================
                      00416 ;  MPASM PIC16F84 processor include
                      00417 ; 
                      00418 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00419 ;==========================================================================
                      00420 
Message[310]: Superseding current maximum RAM and RAM map.
                      00618         LIST
                      00006         LIST P=16F84
                      00069 
  00000001            00070 USE_4_BIT_MODE  EQU             1                               ; YES/NO
  00000000            00071 USE_HIGH_NIBLE  EQU             0                               ; YES/NO
  00000000            00072 USE_ONE_PORT    EQU             0                               ; YES/NO
  00000001            00073 ONLY_WRITE              EQU             1                               ; YES/NO
                      00074 
  00000006            00075 LCD_DATA                EQU             PORTB                   ; Описываем порт линий данных
  00000086            00076 LCD_DATA_TRIS   EQU             TRISB
                      00077 
                      00078         IF      (USE_4_BIT_MODE && USE_ONE_PORT); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00079 
                      00080 LCD_CNTL                EQU             LCD_DATA                ; то так и опишем
                      00081 LCD_CNTL_TRIS   EQU             LCD_DATA_TRIS
                      00082 
                      00083         ELSE
                      00084 
  00000005            00085 LCD_CNTL                EQU             PORTA                   ; Иначе зададим любой другой
  00000085            00086 LCD_CNTL_TRIS   EQU             TRISA
                      00087         ENDIF
                      00088         
                      00089         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && ONLY_WRITE)
                      00090 E                               EQU             2
                      00091 RS                              EQU             3
                      00092 CNTL_TRIS_MASK  EQU             B'11110011'             ; Маска настройки линий управлениЯ
                      00093         ENDIF
                      00094 
                      00095         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && !ONLY_WRITE)
                      00096 E                               EQU             1
                      00097 RW                              EQU             2
                      00098 RS                              EQU             3
                      00099 CNTL_TRIS_MASK  EQU             B'11110001'             ; Маска настройки линий управлениЯ
                      00100         ENDIF   
                      00101 
                      00102         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && ONLY_WRITE)
                      00103 E                               EQU             4
                      00104 RS                              EQU             5
                      00105 CNTL_TRIS_MASK  EQU             B'11001111'             ; Маска настройки линий управлениЯ
                      00106         ENDIF   
                      00107 
                      00108         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && !ONLY_WRITE)
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00109 E                               EQU             4
                      00110 RW                              EQU             5
                      00111 RS                              EQU             6
                      00112 CNTL_TRIS_MASK  EQU             B'10001111'             ; Маска настройки линий управлениЯ
                      00113 
                      00114         ELSE    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
                      00115         
  00000001            00116 E                               EQU             1
  00000003            00117 RS                              EQU             3
  000000F5            00118 CNTL_TRIS_MASK  EQU             B'11110101'             ; Маска настройки линий управления
                      00119         ENDIF
                      00120 
  0000000C            00121 DISP_ON                 EQU             B'00001100'             ; Display on
  0000000E            00122 DISP_ON_C               EQU             B'00001110'             ; Display on, Cursor on
  0000000F            00123 DISP_ON_B               EQU             B'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00124 DISP_OFF                EQU             B'00001000'             ; Display off
  00000001            00125 CLR_DISP                EQU             B'00000001'             ; Clear the Display
  00000006            00126 ENTRY_INC               EQU             B'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00127 ENTRY_INC_S             EQU             B'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00128 ENTRY_DEC               EQU             B'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00129 ENTRY_DEC_S             EQU             B'00000101'             ;
  00000080            00130 DD_RAM_ADDR             EQU             B'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00131 DD_RAM_UL               EQU             B'10000000'             ; Upper Left coner of the Display
  000000C0            00132 SECOND_LINE             EQU             B'11000000'             ; Move cursor to second line
  0000008F            00133 LAST_SYMBOL_FIRST_LINE  EQU     B'10001111'     ; Установим курсор на последний символ 1-й строки
  000000CF            00134 LAST_SYMBOL_SECOND_LINE EQU     B'11001111'     ; Установим курсор на последний символ 2-й строки       
                                                            
                      00003 
                      00004 MICROMENU_LIB_UDATA     UDATA_SHR
0000                  00005 INDEX_MENU              RES     1                                       ; Индекс текущего пункта меню
0001                  00006 INDEX_SUBMENU   RES     1                                       ; Индекс текущего пункта подменю
0002                  00007 NUM_OF_SUBMENU  RES     1                                       ; Количество пунктов в текущем меню
0003                  00008 SYMBOL_POINTER  RES     1                                       ; Указатель на выводимый символ
0004                  00009 MENU_COUNTER    RES     1                                       ; Счетчик опросов кнопок в меню
0005                  00010 TEMP_1                  RES     1
0006                  00011 TEMP_2                  RES     1
0007                  00012 TEMP_3                  RES     1
                      00013 
  0000                00014         EXTERN  FLAGS,OFFSET
                      00015 
                      00016         IF      USE_SHORT_MOD_PCL                               ; Если используется "укороченная" версия
                             макроса модификации PCL
  0000                00017         EXTERN  KNOWN_ZERO
                      00018         ENDIF
                      00019 
  0000                00020         GLOBAL  MENU_HEANDLER,ZASTAVKA
  0000                00021         EXTERN  SEND_LCD_SYMBOL,SEND_LCD_COMMAND,DELAY_4MS,MAIN
                      00022 ;===================================================================================================
                      00023 MICROMENU               CODE                                    ; Сегмент кода библиотеки меню
                      00024 ;===================================================================================================
0000                  00025 TABLE_ACTION_COMPLETE 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00026         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0000   08??               M                 MOVFW   SYMBOL_POINTER
0001   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0002   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0003   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0004   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0005   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0006   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0007   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0008                      M TABLE
0008   3441 3463 3474 00027         DT              ACTION_COMPLETE_STRING,0
       3469 346F 346E 
       3420 3443 346F 
       346D 3470 346C 
       3465 3474 3465 
       3421 3400 
                      00028 
0019                  00029 TABLE_ZASTAVKA_FIRST_STRING
                      00030         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0019   08??               M                 MOVFW   SYMBOL_POINTER
001A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
001B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
001C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
001D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
001E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
001F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0020   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0021                      M TABLE
0021   3420 3420 344D 00031         DT              ZASTAVKA_FIRST_STRING,0
       3469 3463 3472 
       346F 344D 3465 
       346E 3475 344C 
       3469 3462 3400 
                      00032 
0030                  00033 TABLE_ZASTAVKA_SECOND_STRING 
                      00034         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0030   08??               M                 MOVFW   SYMBOL_POINTER
0031   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0032   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0033   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0034   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0035   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0036   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0037   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0038                      M TABLE
0038   3420 3420 3476 00035         DT              ZASTAVKA_SECOND_STRING,0
       3465 3472 3420 
       3431 342E 3430 
       3420 3462 3465 
       3474 3461 3400 
                      00036 ;===================================================================================================
0047                  00037 NUM_OF_SUBMENU_TABLE                                    
                      00038         RETLW_NUM_OF_SUBMENU_PUNKTS                     ; Макрос, возвращает количество подпунктов текущ
                            его пункта меню
                          M                                                         MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0047   08??               M                 MOVFW   INDEX_MENU
0048   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0049   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
004A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
004B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
004C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
004D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
004E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
004F                      M TABLE
  0001                    M                                                         LOCAL   A=1
                          M                                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
004F   3400               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
0050   3401               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                 A+=1
0051   3402               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                 A+=1
0052   3403               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                 A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0053   3404               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                                                 A+=1
0054   3401               M                                                                 RETLW   NUM_OF_SUBMENU_PUNKTS_6
Warning[207]: Found label after column 1. (A)
  00000007                M                                                                 A+=1
                          M                                                         ENDW
                      00039 ;===================================================================================================
0055                  00040 SWITCH_MENU_TABLE                                               ; Переходим на нужный пункт меню
                      00041         GOTO_PUNKT_MENU                                         ; Макрос, создает переходы на все пункты
                             меню                                           
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0055   08??               M                 MOVFW   INDEX_MENU
0056   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0057   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0058   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0059   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
005A   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
005B   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
005C   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
005D                      M TABLE
  0001                    M                                 LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
005D   2???               M                                         GOTO    MENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
005E   2???               M                                         GOTO    MENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
005F   2???               M                                         GOTO    MENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
0060   2???               M                                         GOTO    MENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
0061   2???               M                                         GOTO    MENU_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
0062   2???               M                                         GOTO    MENU_6
Warning[207]: Found label after column 1. (A)
  00000007                M                                         A+=1
                          M                                 ENDW
                      00042 ;---------------------------------------------------------------------------------------------------
0063                  00043 SWITCH_SUBMENU_TABLE                                    ; Переходим на нужный подпункт меню
                      00044         GOTO_PUNKT_SUBMENU                                      ; Макрос, создает переходы на все подпун
                            кты меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
0063   08??               M                 MOVFW   INDEX_MENU
0064   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0065   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0066   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0067   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0068   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0069   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
006A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
006B                      M TABLE
  0001                    M                                         LOCAL   C=1
                          M                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
006B   2???               M                                                 GOTO    MENU_1_TABLE
Warning[207]: Found label after column 1. (C)
  00000002                M                                                 C+=1
006C   2???               M                                                 GOTO    MENU_2_TABLE
Warning[207]: Found label after column 1. (C)
  00000003                M                                                 C+=1
006D   2???               M                                                 GOTO    MENU_3_TABLE
Warning[207]: Found label after column 1. (C)
  00000004                M                                                 C+=1
006E   2???               M                                                 GOTO    MENU_4_TABLE
Warning[207]: Found label after column 1. (C)
  00000005                M                                                 C+=1
006F   2???               M                                                 GOTO    MENU_5_TABLE
Warning[207]: Found label after column 1. (C)
  00000006                M                                                 C+=1
0070   2???               M                                                 GOTO    MENU_6_TABLE
Warning[207]: Found label after column 1. (C)
  00000007                M                                                 C+=1
                          M                                         ENDW
  0001                    M                                         LOCAL   D=1
  0000                    M                                         LOCAL   A
                          M                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE)
0071                      M                                                 MENU_1_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0071   08??               M                 MOVFW   INDEX_SUBMENU
0072   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0073   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0074   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0075   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0076   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0077   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0078   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0079                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                          M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE)
0079                      M                                                 MENU_2_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0079   08??               M                 MOVFW   INDEX_SUBMENU
007A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
007B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
007C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
007D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
007E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
007F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0080   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0081                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
0081   2???               M                                                         GOTO    MENU_2_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE)
0082                      M                                                 MENU_3_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0082   08??               M                 MOVFW   INDEX_SUBMENU
0083   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0084   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0085   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0086   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0087   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0088   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0089   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
008A                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
008A   2???               M                                                         GOTO    MENU_3_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
008B   2???               M                                                         GOTO    MENU_3_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE)
008C                      M                                                 MENU_4_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
008C   08??               M                 MOVFW   INDEX_SUBMENU
008D   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
008E   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
008F   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0090   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0091   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0092   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0093   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0094                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
0094   2???               M                                                         GOTO    MENU_4_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
0095   2???               M                                                         GOTO    MENU_4_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
0096   2???               M                                                         GOTO    MENU_4_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
                          M                                                 ENDW
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (D)
  00000005                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE)
0097                      M                                                 MENU_5_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0097   08??               M                 MOVFW   INDEX_SUBMENU
0098   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0099   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
009A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
009B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
009C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
009D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
009E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
009F                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
009F   2???               M                                                         GOTO    MENU_5_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
00A0   2???               M                                                         GOTO    MENU_5_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
00A1   2???               M                                                         GOTO    MENU_5_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
00A2   2???               M                                                         GOTO    MENU_5_SUBMENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_6_TABLE)
00A3                      M                                                 MENU_6_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00A3   08??               M                 MOVFW   INDEX_SUBMENU
00A4   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00A5   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00A6   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00A7   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00A8   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00A9   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00AA   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00AB                      M TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
00AB   2???               M                                                         GOTO    MENU_6_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                                 D+=1
                          M                                         ENDW    
                      00045 ;---------------------------------------------------------------------------------------------------
00AC                  00046 SWITCH_ACTION                                                   ; Выполним действие, на котором находитс
                            я курсор 
                      00047         GOTO_PUNKT_SUBMENU_ACTION                       ; Макрос, создает переходы на действия всех подп
                            унктов меню
                          M                                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
00AC   08??               M                 MOVFW   INDEX_MENU
00AD   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00AE   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00AF   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00B0   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00B1   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00B2   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00B3   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00B4                      M TABLE
  0001                    M                                                         LOCAL   C=1
                          M                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
00B4   2???               M                                                                 GOTO    MENU_1_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000002                M                                                                 C+=1
00B5   2???               M                                                                 GOTO    MENU_2_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000003                M                                                                 C+=1
00B6   2???               M                                                                 GOTO    MENU_3_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000004                M                                                                 C+=1
00B7   2???               M                                                                 GOTO    MENU_4_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000005                M                                                                 C+=1
00B8   2???               M                                                                 GOTO    MENU_5_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000006                M                                                                 C+=1
00B9   2???               M                                                                 GOTO    MENU_6_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000007                M                                                                 C+=1
                          M                                                         ENDW
  0001                    M                                                         LOCAL   D=1
  0000                    M                                                         LOCAL   A
                          M                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE_ACTION)
00BA                      M                                                                 MENU_1_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00BA   08??               M                 MOVFW   INDEX_SUBMENU
00BB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00BC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00BD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00BE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00BF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00C0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00C1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00C2                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                          M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE_ACTION)
00C2                      M                                                                 MENU_2_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00C2   08??               M                 MOVFW   INDEX_SUBMENU
00C3   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00C4   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00C5   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00C6   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00C7   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00C8   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00C9   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00CA                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
00CA   2???               M                                                                         GOTO    MENU_2_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE_ACTION)
00CB                      M                                                                 MENU_3_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00CB   08??               M                 MOVFW   INDEX_SUBMENU
00CC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00CD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00CE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00CF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00D0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00D1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00D2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00D3                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
00D3   2???               M                                                                         GOTO    MENU_3_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
00D4   2???               M                                                                         GOTO    MENU_3_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE_ACTION)
00D5                      M                                                                 MENU_4_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00D5   08??               M                 MOVFW   INDEX_SUBMENU
00D6   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00D7   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00D8   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D9   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00DA   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00DB   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00DC   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00DD                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
00DD   2???               M                                                                         GOTO    MENU_4_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
00DE   2???               M                                                                         GOTO    MENU_4_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
00DF   2???               M                                                                         GOTO    MENU_4_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE_ACTION)
00E0                      M                                                                 MENU_5_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00E0   08??               M                 MOVFW   INDEX_SUBMENU
00E1   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00E2   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00E3   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00E4   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00E5   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00E6   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00E7   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00E8                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
00E8   2???               M                                                                         GOTO    MENU_5_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
00E9   2???               M                                                                         GOTO    MENU_5_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
00EA   2???               M                                                                         GOTO    MENU_5_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000004                M                                                                         A+=1
00EB   2???               M                                                                         GOTO    MENU_5_SUBMENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_6_TABLE_ACTION)
00EC                      M                                                                 MENU_6_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
00EC   08??               M                 MOVFW   INDEX_SUBMENU
00ED   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00EE   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00EF   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00F0   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00F1   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00F2   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00F3   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00F4                      M TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
00F4   2???               M                                                                         GOTO    MENU_6_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                                                 D+=1
                          M                                                         ENDW
                      00048 ;===================================================================================================
                      00049         CREATE_MENU_NAMES                                       ; Макрос, создает имена всех пунктов мен
                            ю
  0001                    M                                         LOCAL   A=1
                          M                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (MENU_1)
00F5                      M                                                 MENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
00F5   08??               M                 MOVFW   SYMBOL_POINTER
00F6   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00F7   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00F8   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00F9   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00FA   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00FB   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00FC   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
00FD                      M TABLE
00FD   3431 342E 344D     M                                                 DT              MENU_NAME_1,0
       3465 346E 3475 
       345F 3431 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                 A+=1
Warning[207]: Found label after column 1. (MENU_2)
0106                      M                                                 MENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0106   08??               M                 MOVFW   SYMBOL_POINTER
0107   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0108   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0109   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
010A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
010B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
010C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
010D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
010E                      M TABLE
010E   3432 342E 344D     M                                                 DT              MENU_NAME_2,0
       3465 346E 3475 
       345F 3432 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                                 A+=1
Warning[207]: Found label after column 1. (MENU_3)
0117                      M                                                 MENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0117   08??               M                 MOVFW   SYMBOL_POINTER
0118   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0119   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
011A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
011B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
011C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
011D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

011E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
011F                      M TABLE
011F   3433 342E 344D     M                                                 DT              MENU_NAME_3,0
       3465 346E 3475 
       345F 3433 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                                 A+=1
Warning[207]: Found label after column 1. (MENU_4)
0128                      M                                                 MENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0128   08??               M                 MOVFW   SYMBOL_POINTER
0129   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
012A   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
012B   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
012C   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
012D   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
012E   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
012F   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0130                      M TABLE
0130   3434 342E 344D     M                                                 DT              MENU_NAME_4,0
       3465 346E 3475 
       345F 3434 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                                 A+=1
Warning[207]: Found label after column 1. (MENU_5)
0139                      M                                                 MENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0139   08??               M                 MOVFW   SYMBOL_POINTER
013A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
013B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
013C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
013D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
013E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
013F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0140   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0141                      M TABLE
0141   3435 342E 344D     M                                                 DT              MENU_NAME_5,0
       3465 346E 3475 
       345F 3435 3400 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (A)
  00000006                M                                                 A+=1
Warning[207]: Found label after column 1. (MENU_6)
014A                      M                                                 MENU_6
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
014A   08??               M                 MOVFW   SYMBOL_POINTER
014B   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
014C   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
014D   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
014E   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
014F   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0150   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0151   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0152                      M TABLE
0152   3436 342E 344D     M                                                 DT              MENU_NAME_6,0
       3465 346E 3475 
       345F 3436 3400 
Warning[207]: Found label after column 1. (A)
  00000007                M                                                 A+=1
                          M                                         ENDW
                      00050 ;===================================================================================================
                      00051         CREATE_SUBMENU_NAMES                            ; Макрос, создает имена всех подпунктов меню
                          M ; К сожаления, почему-то не получилось создавать имена всех подпунктов меню в цикле, поэтому приходится 
                            вызывать макрос столько раз, сколько есть пунктов меню
                          M ; Внимание, если количество пунктов в меню превышает 8, просто добавьте еще
  0001                    M                                                 LOCAL   D=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                                 MENU_#V(D)_SUBMENU_#V(A)
                          M                                                                 MOD_PCL SYMBOL_POINTER
                          M                                                                 DT              MENU_SUBMENU_NAME_1_#V(A
                            ),0
                          M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 2 пункта меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
Warning[207]: Found label after column 1. (MENU_2_SUBMENU_1)
015B                      M                                                                 MENU_2_SUBMENU_1
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
015B   08??               M                 MOVFW   SYMBOL_POINTER
015C   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
015D   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
015E   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
015F   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0160   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0161   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0162   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0163                      M TABLE
0163   3432 342E 3431     M                                                                 DT              MENU_SUBMENU_NAME_2_1,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_1)
016F                      M                                                                 MENU_3_SUBMENU_1
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
016F   08??               M                 MOVFW   SYMBOL_POINTER
0170   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0171   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0172   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0173   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0174   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0175   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0176   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0177                      M TABLE
0177   3433 342E 3431     M                                                                 DT              MENU_SUBMENU_NAME_3_1,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_2)
0183                      M                                                                 MENU_3_SUBMENU_2
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0183   08??               M                 MOVFW   SYMBOL_POINTER
0184   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0185   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0186   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0187   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0188   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0189   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
018A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
018B                      M TABLE
018B   3433 342E 3432     M                                                                 DT              MENU_SUBMENU_NAME_3_2,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_1)
0197                      M                                                                 MENU_4_SUBMENU_1
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0197   08??               M                 MOVFW   SYMBOL_POINTER
0198   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0199   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
019A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
019B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
019C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
019D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
019E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
019F                      M TABLE
019F   3434 342E 3431     M                                                                 DT              MENU_SUBMENU_NAME_4_1,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_2)
01AB                      M                                                                 MENU_4_SUBMENU_2
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01AB   08??               M                 MOVFW   SYMBOL_POINTER
01AC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01AD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01AE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01AF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01B0   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01B1   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01B2   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
01B3                      M TABLE
01B3   3434 342E 3432     M                                                                 DT              MENU_SUBMENU_NAME_4_2,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_3)
01BF                      M                                                                 MENU_4_SUBMENU_3
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01BF   08??               M                 MOVFW   SYMBOL_POINTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01C0   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01C1   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01C2   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01C3   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01C4   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01C5   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01C6   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
01C7                      M TABLE
01C7   3434 342E 3433     M                                                                 DT              MENU_SUBMENU_NAME_4_3,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_1)
01D3                      M                                                                 MENU_5_SUBMENU_1
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01D3   08??               M                 MOVFW   SYMBOL_POINTER
01D4   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01D5   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01D6   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01D7   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01D8   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01D9   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01DA   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
01DB                      M TABLE
01DB   3435 342E 3431     M                                                                 DT              MENU_SUBMENU_NAME_5_1,0
       342E 3453 3475 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_2)
01E7                      M                                                                 MENU_5_SUBMENU_2
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01E7   08??               M                 MOVFW   SYMBOL_POINTER
01E8   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01E9   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01EA   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01EB   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01EC   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01ED   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01EE   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
01EF                      M TABLE
01EF   3435 342E 3432     M                                                                 DT              MENU_SUBMENU_NAME_5_2,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_3)
01FB                      M                                                                 MENU_5_SUBMENU_3
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01FB   08??               M                 MOVFW   SYMBOL_POINTER
01FC   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01FD   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01FE   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01FF   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0200   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0201   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0202   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0203                      M TABLE
0203   3435 342E 3433     M                                                                 DT              MENU_SUBMENU_NAME_5_3,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000004                M                                                                 A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_4)
020F                      M                                                                 MENU_5_SUBMENU_4
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
020F   08??               M                 MOVFW   SYMBOL_POINTER
0210   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0211   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0212   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0213   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0214   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0215   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0216   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
0217                      M TABLE
0217   3435 342E 3434     M                                                                 DT              MENU_SUBMENU_NAME_5_4,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
Warning[207]: Found label after column 1. (MENU_6_SUBMENU_1)
0223                      M                                                                 MENU_6_SUBMENU_1
                          M                                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0223   08??               M                 MOVFW   SYMBOL_POINTER
0224   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0225   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0226   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0227   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0228   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0229   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
022A   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
022B                      M TABLE
022B   3436 342E 3431     M                                                                 DT              MENU_SUBMENU_NAME_6_1,0
       342E 3453 3475 
       3462 344D 3465 
       346E 3475 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                 A+=1
                          M                                                         ENDW
Warning[207]: Found label after column 1. (D)
  00000007                M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_7+1
                          M                                                                 MENU_7_SUBMENU_2
                          M                                                                 MOD_PCL SYMBOL_POINTER
                          M                                                                 DT              MENU_SUBMENU_NAME_7_2,0
                          M                                                                 A+=1
                          M                                                         ENDW
                          M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                                         LOCAL   A=1     
                          M                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_7+1
                          M                                                                 MENU_7_SUBMENU_2
                          M                                                                 MOD_PCL SYMBOL_POINTER
                          M                                                                 DT              MENU_SUBMENU_NAME_8_2,0
                          M                                                                 A+=1
                          M                                                         ENDW
                          M                                                         D+=1
                          M                                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00052 ;===================================================================================================
Warning[205]: Found directive in column 1. (INCLUDE)
                      00053 INCLUDE MENU_ACTION.ASM
                      00001 ;===================================================================================================
                      00002 ; Menu_Action file. All menu/submenu code must be in this file
                      00003 ;===================================================================================================
                      00004         IF      USE_MENU_ACTION
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0237                  00005 MENU_ACTION
                      00006         GOTO_MENU_ACTION
                          M                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
0237   08??               M                 MOVFW   INDEX_MENU
0238   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0239   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
023A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
023B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
023C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
023D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
023E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
023F                      M TABLE
  0001                    M                                         LOCAL   A=1
                          M                                         WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
023F   2???               M                                                 GOTO    MENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                 A+=1
0240   2???               M                                                 GOTO    MENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                 A+=1
0241   2???               M                                                 GOTO    MENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                 A+=1
0242   2???               M                                                 GOTO    MENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                                 A+=1
0243   2???               M                                                 GOTO    MENU_5_ACTION
Warning[207]: Found label after column 1. (A)
  00000006                M                                                 A+=1
0244   2???               M                                                 GOTO    MENU_6_ACTION
Warning[207]: Found label after column 1. (A)
  00000007                M                                                 A+=1
                          M                                         ENDW
                      00007 ;===================================================================================================
0245                  00008 MENU_1_ACTION                                                   ; Выполняем действие 1 пункта меню
                      00009 ;       nop
0245   2???           00010         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
0246   01??           00011         CLRF    SYMBOL_POINTER                          ; Рисуем подтверждение действия
0247                  00012 STRING_ACTION_COMPLETE_
0247   2???           00013         CALL    TABLE_ACTION_COMPLETE   
0248   39FF           00014         ANDLW   0FFH
0249   1903           00015         BTFSC   STATUS,Z
024A   2???           00016         GOTO    OUT_ACTION_COMPLETE_
024B   2???           00017         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

024C   0A??           00018         INCF    SYMBOL_POINTER  
024D   2???           00019         GOTO    STRING_ACTION_COMPLETE_
024E                  00020 OUT_ACTION_COMPLETE_
024E   01??           00021         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
024F   2???           00022         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
0250   0B??           00023         DECFSZ  TEMP_3
0251   2???           00024         GOTO    $-2
0252   2???           00025         GOTO    END_MENU_ACTION
                      00026 ;---------------------------------------------------------------------------------------------------
0253                  00027 MENU_2_ACTION                                                   ; Выполняем действие 2 пункта меню
                      00028 ;       nop
0253   2???           00029         GOTO    END_MENU_ACTION
                      00030 ;---------------------------------------------------------------------------------------------------
0254                  00031 MENU_3_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00032 ;       nop
0254   2???           00033         GOTO    END_MENU_ACTION
                      00034 ;---------------------------------------------------------------------------------------------------
0255                  00035 MENU_4_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00036 ;       nop
0255   2???           00037         GOTO    END_MENU_ACTION
                      00038 ;---------------------------------------------------------------------------------------------------
0256                  00039 MENU_5_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00040 ;       nop
0256   2???           00041         GOTO    END_MENU_ACTION
                      00042 ;---------------------------------------------------------------------------------------------------
0257                  00043 MENU_6_ACTION                                                   ; Выполняем действие 6 пункта меню
                      00044 ;       nop
0257   2???           00045         GOTO    END_MENU_ACTION
                      00046         ENDIF
                      00047 ;===================================================================================================
0258                  00048 MENU_1_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 1 пункта
                      00049 ;       nop
0258   2???           00050         GOTO    END_ACTION
0259                  00051 MENU_1_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 1 пункта
                      00052 ;       nop
0259   2???           00053         GOTO    END_ACTION
025A                  00054 MENU_1_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 1 пункта
                      00055 ;       nop
025A   2???           00056         GOTO    END_ACTION
                      00057 ;---------------------------------------------------------------------------------------------------
025B                  00058 MENU_2_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 2 пункта
                      00059 ;       nop
025B   2???           00060         GOTO    END_ACTION
025C                  00061 MENU_2_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 2 пункта
                      00062 ;       nop
025C   2???           00063         GOTO    END_ACTION
025D                  00064 MENU_2_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 2 пункта
                      00065 ;       nop
025D   2???           00066         GOTO    END_ACTION
                      00067 ;---------------------------------------------------------------------------------------------------
025E                  00068 MENU_3_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 3 пункта
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00069 ;       nop
025E   2???           00070         GOTO    END_ACTION
025F                  00071 MENU_3_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 3 пункта
                      00072 ;       nop
025F   2???           00073         GOTO    END_ACTION
0260                  00074 MENU_3_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 3 пункта
                      00075 ;       nop
0260   2???           00076         GOTO    END_ACTION
                      00077 ;---------------------------------------------------------------------------------------------------
0261                  00078 MENU_4_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 4 пункта
                      00079 ;       nop
0261   2???           00080         GOTO    END_ACTION
0262                  00081 MENU_4_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 4 пункта
                      00082 ;       nop
0262   2???           00083         GOTO    END_ACTION
0263                  00084 MENU_4_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 4 пункта
                      00085 ;       nop
0263   2???           00086         GOTO    END_ACTION                                                              
                      00087 ;---------------------------------------------------------------------------------------------------
0264                  00088 MENU_5_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 5 пункта
                      00089 ;       nop
0264   2???           00090         GOTO    END_ACTION
0265                  00091 MENU_5_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00092 ;       nop
0265   2???           00093         GOTO    END_ACTION
0266                  00094 MENU_5_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 5 пункта
                      00095 ;       nop
0266   2???           00096         GOTO    END_ACTION
0267                  00097 MENU_5_SUBMENU_4_ACTION                                 ; Выполняем действие 4 подпункта 5 пункта
                      00098 ;       nop
0267   2???           00099         GOTO    END_ACTION
                      00100 ;---------------------------------------------------------------------------------------------------
0268                  00101 MENU_6_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 6 пункта
                      00102 ;       nop
0268   2???           00103         GOTO    END_ACTION
                      00104 ;---------------------------------------------------------------------------------------------------
                      00054 ;===================================================================================================
0269                  00055 CLR_DISPLAY_ROUTINE                                             ; Подпрограмма очистки дисплея
0269   3001           00056         MOVLW   CLR_DISP
026A   2???           00057         CALL    SEND_LCD_COMMAND
026B   2???           00058         CALL    DELAY_4MS                                       ; Обязательная задержка после очистки ди
                            сплея !!!
026C   0008           00059         RETURN
                      00060 ;===================================================================================================
026D                  00061 DRAW_CURSOR_ROUTINE                                             ; Процедура рисования курсора. В w лежит
                             адрес
026D   2???           00062         CALL    SEND_LCD_COMMAND
026E   303C           00063         MOVLW   '<'                                                     ; Нарисуем там курсор
026F   2???           00064         CALL    SEND_LCD_SYMBOL
0270   0008           00065         RETURN
                      00066 ;===================================================================================================
0271                  00067 SECOND_STRING_ROUTINE                                   ; Подпрограмма перевода указателя на 2-ю строку 
                      00068         IF      USE_STATIC_CURSOR
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00069         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строки
                      00070         ENDIF
0271   30C0           00071         MOVLW   SECOND_LINE                                     ; Переводим указатель на 2-ю строку     
0272   2???           00072         CALL    SEND_LCD_COMMAND
0273   0008           00073         RETURN                                                          ; И приступаем к отрисовке следу
                            ющего пункта меню
                      00074 ;===================================================================================================
0274                  00075 SWITCH_MENU_ROUTINE                                             ; Подпрограмма вывода названия пункта ме
                            ню на дисплей
0274   01??           00076         CLRF    SYMBOL_POINTER
0275                  00077 STRING_MENU
0275   2???           00078         CALL    SWITCH_MENU_TABLE
0276   39FF           00079         ANDLW   0FFH
0277   1903           00080         BTFSC   STATUS,Z
0278   0008           00081         RETURN 
0279   2???           00082         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
027A   0A??           00083         INCF    SYMBOL_POINTER  
027B   2???           00084         GOTO    STRING_MENU
                      00085 ;---------------------------------------------------------------------------------------------------
027C                  00086 SWITCH_SUBMENU_ROUTINE                                  ; Подпрограмма вывода названия подпункта меню на
                             дисплей
027C   01??           00087         CLRF    SYMBOL_POINTER
027D                  00088 STRING_SUBMENU
027D   2???           00089         CALL    SWITCH_SUBMENU_TABLE
027E   39FF           00090         ANDLW   0FFH
027F   1903           00091         BTFSC   STATUS,Z
0280   0008           00092         RETURN 
0281   2???           00093         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0282   0A??           00094         INCF    SYMBOL_POINTER  
0283   2???           00095         GOTO    STRING_SUBMENU
                      00096 ;===================================================================================================
0284                  00097 MENU_HEANDLER                                                   ; Обработчик меню
0284   01??           00098         CLRF    INDEX_MENU                                      ; Была нажатая какая-то кнопка, очистим 
                            индекс пункта меню                                      
                      00099         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00100         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00101         ANDWF   FLAGS                                           
                      00102         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00103         ENDIF
                      00104 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
0285                  00105 SWITCH_MENU                                                             ; Поместим курсор на нужный пунк
                            т меню                                                  
                      00106         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
0285   08??           00107         MOVFW   INDEX_MENU
0286   1D03 2???      00108         BNZ             CHECK_1
0288   30F0           00109         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0289   05??           00110         ANDWF   FLAGS   
028A   1400           00111         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
028B   2???           00112         GOTO    SKIP_CHECK_1
028C                  00113 CHECK_1
028C   3C05           00114         SUBLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Сравниваем с количеством пунктов меню
028D   1D03 2???      00115         BNZ             SKIP_CHECK_1    
028F   30F0           00116         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
0290   05??           00117         ANDWF   FLAGS
0291   1480           00118         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
0292                  00119 SKIP_CHECK_1
                      00120         ENDIF
                      00121 
0292   2???           00122         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
                      00123         
                      00124         IF      USE_MOVING_CURSOR
0293   1C00           00125         BTFSS   PRESS_UP                                        ; Чтобы двигать курсор, надо знать, кака
                            я кнопка была нажата
0294   2???           00126         GOTO    PRESSING_DOWN                           ; Была нажата кнопка UP         
0295   2???           00127         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем текущий пункт меню     
                      00128         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
0296   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
0297   2???               M                         CALL    DRAW_CURSOR_ROUTINE
0298   2???           00129         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0299   0A??           00130         INCF    INDEX_MENU                                      ; Берем следующий пункт
029A   08??           00131         MOVFW   INDEX_MENU      
029B   3C06           00132         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
029C   1903 2???      00133         BZ              CORRECT_INDEX_MENU                      
029E   2???           00134         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем пункт меню под текущим 
Message[305]: Using default destination of 1 (file).
029F   03??           00135         DECF    INDEX_MENU                                      ; Не забудем вернуть назад текущий пункт
                             меню   
02A0   2???           00136         GOTO    SKIP_CORRECT_INDEX_MENU_3
02A1                  00137 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
02A1   01??           00138         CLRF    INDEX_MENU
02A2   2???           00139         CALL    SWITCH_MENU_ROUTINE
02A3   3005           00140         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
02A4   00??           00141         MOVWF   INDEX_MENU      
02A5   2???           00142         GOTO    SKIP_CORRECT_INDEX_MENU_3
02A6                  00143 PRESSING_DOWN                                                   ; Была нажата кнопка DOWN       
Message[305]: Using default destination of 1 (file).
02A6   03??           00144         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
02A7   1B80           00145         BTFSC   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
02A8   2???           00146         GOTO    CORRECT_INDEX_MENU_2
02A9   2???           00147         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем предыдущий пункт меню
02AA   2???           00148         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
02AB   0A??           00149         INCF    INDEX_MENU                                      ; Вернем текущий пункт                  
                                            
02AC   08??           00150         MOVFW   INDEX_MENU      
02AD   2???           00151         GOTO    SKIP_CORRECT_INDEX_MENU_2
02AE                  00152 CORRECT_INDEX_MENU_2
02AE   3005           00153         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
02AF   00??           00154         MOVWF   INDEX_MENU
02B0   2???           00155         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем предыдущий пункт меню
02B1   2???           00156         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
02B2   01??           00157         CLRF    INDEX_MENU
02B3                  00158 SKIP_CORRECT_INDEX_MENU_2
02B3   2???           00159         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем текущий пункт меню под предыдущим 
                      00160         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE ; Нарисум курсор в конце 2-й строчки
02B4   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
02B5   2???               M                         CALL    DRAW_CURSOR_ROUTINE
02B6                  00161 SKIP_CORRECT_INDEX_MENU_3
                      00162         
                      00163         ELSE
                      00164         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем текущий пункт меню
                      00165         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00166         INCF    INDEX_MENU                                      ; Берем следующий пункт
                      00167         MOVFW   INDEX_MENU      
                      00168         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
                      00169         BZ              CORRECT_INDEX_MENU                      
                      00170         CALL    SWITCH_MENU_ROUTINE                     ; Рисуем пункт меню под текущим 
                      00171         DECF    INDEX_MENU                                      ; Не забудем вернуть назад текущий пункт
                             меню   
                      00172         GOTO    SKIP_CORRECT_INDEX_MENU
                      00173 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
                      00174         CLRF    INDEX_MENU
                      00175         CALL    SWITCH_MENU_ROUTINE
                      00176         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
                      00177         MOVWF   INDEX_MENU      
                      00178 SKIP_CORRECT_INDEX_MENU
                      00179         ENDIF
                      00180 
02B6   2???           00181         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в меню, при нажатии кнопок "Вверх", "Вниз", выходе из подпункта меню
                      00182         IF      USE_RBIE
02B7   30F0           00183         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
02B8   05??           00184         ANDWF   FLAGS   
02B9   100B           00185         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания от кнопок
02BA   158B           00186         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00187         ENDIF
                      00188 
02BB   3014           00189         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
02BC   00??           00190         MOVWF   MENU_COUNTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02BD   01??           00191         CLRF    TEMP_1
02BE   01??           00192         CLRF    TEMP_2
02BF                  00193 LOOP_MENU                                                               ; Вычисляем нажатую клавишу
                      00194         IF      USE_RBIE
02BF   1800           00195         BTFSC   PRESS_UP
02C0   2???           00196         GOTO    CURSOR_UP_MENU                          
02C1   1880           00197         BTFSC   PRESS_DOWN
02C2   2???           00198         GOTO    CURSOR_DOWN_MENU
02C3   1900           00199         BTFSC   PRESS_ENTER
02C4   2???           00200         GOTO    ENTER_MENU
02C5   1980           00201         BTFSC   PRESS_EXIT
02C6   2???           00202         GOTO    EXIT_MENU
                      00203         
                      00204         ELSE
                      00205         BTFSS   UP
                      00206         GOTO    CURSOR_UP_MENU                          
                      00207         BTFSS   DOWN
                      00208         GOTO    CURSOR_DOWN_MENU
                      00209         BTFSS   ENTER
                      00210         GOTO    ENTER_MENU
                      00211         BTFSS   EXIT
                      00212         GOTO    EXIT_MENU
                      00213         ENDIF
                      00214 ;-----------------------------------------------------------------                                      
                                                                    
Message[305]: Using default destination of 1 (file).
02C7   0B??           00215         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата             
                                                            
02C8   2???           00216         GOTO    LOOP_MENU                                       ; Цикл ожидания нажатия в главном меню  
Message[305]: Using default destination of 1 (file).
02C9   0B??           00217         DECFSZ  TEMP_2  
02CA   2???           00218         GOTO    LOOP_MENU
Message[305]: Using default destination of 1 (file).
02CB   0B??           00219         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
02CC   2???           00220         GOTO    LOOP_MENU
02CD   2???           00221         GOTO    ZASTAVKA                                        ; Вышел таймаут нахождения в меню, выход
                            им в заставку   
                      00222 ;-----------------------------------------------------------------
02CE                  00223 CURSOR_UP_MENU                                                  ; Была нажата клавиша "Вверх"
                      00224         IF      USE_MOVING_CURSOR & !USE_RBIE
                      00225         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00226         ANDWF   FLAGS                                           
                      00227         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00228         ENDIF
                      00229 
Message[305]: Using default destination of 1 (file).
02CE   03??           00230         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
02CF   1F80           00231         BTFSS   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
02D0   2???           00232         GOTO    SWITCH_MENU
02D1   3005           00233         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Стало "<0", сделаем текущим последний пункт меню. Учит
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ываем, что индекс пункта меню на 1 меньше его порядкового номера
02D2   00??           00234         MOVWF   INDEX_MENU
02D3   2???           00235         GOTO    SWITCH_MENU                                     ; Отрисовываем новый текущий пункт меню
                      00236 ;-----------------------------------------------------------------
02D4                  00237 CURSOR_DOWN_MENU                                                ; Была нажата клавиша "Вниз"
                      00238         IF      USE_MOVING_CURSOR & !USE_RBIE
                      00239         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00240         ANDWF   FLAGS                                           
                      00241         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00242         ENDIF
                      00243 
Message[305]: Using default destination of 1 (file).
02D4   0A??           00244         INCF    INDEX_MENU                                      ; Берем следущий пункт меню
02D5   08??           00245         MOVFW   INDEX_MENU
02D6   3C06           00246         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Достигли последнего ?
02D7   1903           00247         BTFSC   STATUS,Z
02D8   01??           00248         CLRF    INDEX_MENU                                      ; Если да, делаем текущим первый пункт м
                            еню     
02D9   2???           00249         GOTO    SWITCH_MENU                                     ; Отрисовываем новый текущий пункт меню
                      00250 ;-----------------------------------------------------------------
02DA                  00251 EXIT_MENU                                                               ; Была нажата клавиша "Выход"
                      00252         IF      USE_RBIE
02DA   30F0           00253         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
02DB   05??           00254         ANDWF   FLAGS   
02DC   100B           00255         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
02DD   158B           00256         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00257         
                      00258         ELSE
                      00259         CALL    DEBOUNCE_DELAY  
                      00260         ENDIF
                      00261 
02DE   2???           00262         GOTO    ZASTAVKA                                        ; Выходим в заставку
                      00263 ;-----------------------------------------------------------------
02DF                  00264 ENTER_MENU                                                              ; Была нажата клавиша "Вход", за
                            ходим в текущий пункт меню
                      00265         IF      USE_MENU_ACTION         
02DF   08??           00266         MOVFW   INDEX_MENU                                      ; Берем текущий пункт меню
02E0   00??           00267         MOVWF   TEMP_1                                          ; Заносим в счетчик
Message[305]: Using default destination of 1 (file).
02E1   0A??           00268         INCF    TEMP_1                                          ; Учитываем, что нумерация начинается с 
                            0
02E2   3001           00269         MOVLW   ACTIONS_MENU_FLAGS                      ; Берем флаги действий пунктов меню
02E3   00??           00270         MOVWF   TEMP_2                                          ; И заносим в переменную
02E4                  00271 LOOP_1
Message[305]: Using default destination of 1 (file).
02E4   0B??           00272         DECFSZ  TEMP_1
02E5   2???           00273         GOTO    ROTATE_ACTION_MENU_FLAGS
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02E6   1803 2???      00274         BC              MENU_ACTION                                     ; Флаг действия текущего пункта 
                            меню выдавлен в бит переноса, анализируем его. Если у текущего пункта меню есть действие, выполн
02E8   2???           00275         GOTO    END_MENU_ACTION
02E9                  00276 ROTATE_ACTION_MENU_FLAGS
Message[305]: Using default destination of 1 (file).
02E9   0C??           00277         RRF             TEMP_2                                          ; Перебор флагов действий всех п
                            унктов меню
02EA   2???           00278         GOTO    LOOP_1  
02EB                  00279 END_MENU_ACTION
                      00280         ENDIF
                      00281 
02EB   2???           00282         CALL    NUM_OF_SUBMENU_TABLE            ; Получаем количество подпунктов в этом пункте меню
02EC   00??           00283         MOVWF   NUM_OF_SUBMENU                          ; 1 раз занесем в перемунную, чтобы каждый раз н
                            е вызывать эту процедуру        
02ED   3C00           00284         SUBLW   .0
02EE   1903 2???      00285         BZ              SWITCH_MENU                                     ; Если 0, сразу на выход без про
                            рисовки чего либо
02F0   01??           00286         CLRF    INDEX_SUBMENU                           ; Очистим индекс пункта подменю 
                      00287 
                      00288         IF      USE_MOVING_CURSOR       &       !USE_TOP_LAST_CURSOR
                      00289         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00290         ANDWF   FLAGS                                           
                      00291         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00292         ENDIF
                      00293 ;-----------------------------------------------------------------
02F1                  00294 SWITCH_SUBMENU                                                  ; Поместим курсор на нужный подпункт нуж
                            ного пункта
                      00295         IF      USE_MOVING_CURSOR       &       USE_TOP_LAST_CURSOR
02F1   08??           00296         MOVFW   INDEX_SUBMENU
02F2   1D03 2???      00297         BNZ             CHECK_2
02F4   30F0           00298         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
02F5   05??           00299         ANDWF   FLAGS   
02F6   1400           00300         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
02F7   2???           00301         GOTO    SKIP_CHECK_2
02F8                  00302 CHECK_2
02F8   03??           00303         DECF    NUM_OF_SUBMENU,W                        ; Получаем количество подпунктов в этом меню, уч
                            итываем, что индекс подпункта начинается с 0
02F9   02??           00304         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
02FA   1D03 2???      00305         BNZ             SKIP_CHECK_2
02FC   30F0           00306         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
02FD   05??           00307         ANDWF   FLAGS
02FE   1480           00308         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
02FF                  00309 SKIP_CHECK_2
                      00310         ENDIF
                      00311 
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02FF   2???           00312         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой подпу
                            нктов меню, чтобы уменьшить моргание
                      00313 
                      00314         IF      USE_MOVING_CURSOR
0300   1C00           00315         BTFSS   PRESS_UP
0301   2???           00316         GOTO    PRESSING_DOWN_2                 
0302   2???           00317         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем текущий подпункт меню
0303   08??           00318         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
0304   3C01           00319         SUBLW   .1
0305   1903 2???      00320         BZ              SKIP_CORRECT_INDEX_SUBMENU_3; Если 1, пропускаем прорисовку 2-й строки
                      00321         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
0307   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
0308   2???               M                         CALL    DRAW_CURSOR_ROUTINE
0309   2???           00322         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
030A   0A??           00323         INCF    INDEX_SUBMENU                           ; Берем следующий пункт
030B   08??           00324         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
030C   02??           00325         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
030D   1903 2???      00326         BZ              CORRECT_INDEX_SUBMENU
030F   2???           00327         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем подпункт меню под текущим 
Message[305]: Using default destination of 1 (file).
0310   03??           00328         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий пункт меню   
0311   2???           00329         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
0312                  00330 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
0312   01??           00331         CLRF    INDEX_SUBMENU
0313   2???           00332         CALL    SWITCH_SUBMENU_ROUTINE
0314   08??           00333         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
0315   00??           00334         MOVWF   INDEX_SUBMENU
Message[305]: Using default destination of 1 (file).
0316   03??           00335         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс подпункта начинается с 0
                                    
0317   2???           00336         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
                      00337 
0318                  00338 PRESSING_DOWN_2
Message[305]: Using default destination of 1 (file).
0318   03??           00339         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт меню
0319   1B80           00340         BTFSC   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
031A   2???           00341         GOTO    CORRECT_INDEX_SUBMENU_2
031B   2???           00342         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем предыдущий пункт меню
031C   2???           00343         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
031D   0A??           00344         INCF    INDEX_SUBMENU                           ; Вернем текущий пункт                          
                                    
031E   08??           00345         MOVFW   INDEX_SUBMENU   
031F   2???           00346         GOTO    SKIP_CORRECT_INDEX_SUBMENU_2
0320                  00347 CORRECT_INDEX_SUBMENU_2
0320   08??           00348         MOVFW   NUM_OF_SUBMENU                          ; Стало "<0", возвращаем количество пунктов в да
                            ном подменю     
0321   00??           00349         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
0322   03??           00350         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс пункта подменю на 1 мень
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ше его порядкового номера
0323   2???           00351         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем предыдущий пункт меню
0324   2???           00352         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
0325   01??           00353         CLRF    INDEX_SUBMENU
0326                  00354 SKIP_CORRECT_INDEX_SUBMENU_2
0326   2???           00355         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем текущий пункт меню под предыдущим 
                      00356         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE ; Нарисум курсор в конце 2-й строчки
0327   30CF               M                         MOVLW   LAST_SYMBOL_SECOND_LINE
0328   2???               M                         CALL    DRAW_CURSOR_ROUTINE
0329                  00357 SKIP_CORRECT_INDEX_SUBMENU_3
                      00358 
                      00359         ELSE
                      00360         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем текущий подпункт меню
                      00361 
                      00362         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
                      00363         SUBLW   .1
                      00364         BZ              SKIP_CORRECT_INDEX_SUBMENU      ; Если 1, пропускаем прорисовку 2-й строки
                      00365         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00366         INCF    INDEX_SUBMENU
                      00367         MOVFW   NUM_OF_SUBMENU  
                      00368         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
                      00369         BZ              CORRECT_INDEX_SUBMENU
                      00370         CALL    SWITCH_SUBMENU_ROUTINE          ; Рисуем подпункт меню под текущим 
                      00371         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий подпункт меню
                      00372         GOTO    SKIP_CORRECT_INDEX_SUBMENU      
                      00373 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
                      00374         CLRF    INDEX_SUBMENU   
                      00375         CALL    SWITCH_SUBMENU_ROUTINE
                      00376         MOVFW   NUM_OF_SUBMENU
                      00377         MOVWF   INDEX_SUBMENU   
                      00378         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс подпункта начинается с 0
                      00379 SKIP_CORRECT_INDEX_SUBMENU
                      00380         ENDIF
                      00381 
0329   2???           00382         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в подпункт меню, при нажатии кнопок "Вверх", "Вниз", выходе из действия подпункта меню
                      00383         IF      USE_RBIE
032A   30F0           00384         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
Message[305]: Using default destination of 1 (file).
032B   05??           00385         ANDWF   FLAGS   
032C   100B           00386         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания
032D   158B           00387         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00388         ENDIF
                      00389 
032E   3014           00390         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
032F   00??           00391         MOVWF   MENU_COUNTER
0330   01??           00392         CLRF    TEMP_1
0331   01??           00393         CLRF    TEMP_2
0332                  00394 LOOP_SUBMENU                                                    ; Мы зашли в пункт меню, ждем нажатия сл
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            едующей кнопки
                      00395         IF      USE_RBIE
0332   1800           00396         BTFSC   PRESS_UP
0333   2???           00397         GOTO    CURSOR_UP_SUBMENU                               
0334   1880           00398         BTFSC   PRESS_DOWN
0335   2???           00399         GOTO    CURSOR_DOWN_SUBMENU
0336   1900           00400         BTFSC   PRESS_ENTER
0337   2???           00401         GOTO    ENTER_SUBMENU
0338   1980           00402         BTFSC   PRESS_EXIT
0339   2???           00403         GOTO    EXIT_SUBMENU
                      00404         
                      00405         ELSE
                      00406         BTFSS   UP
                      00407         GOTO    CURSOR_UP_SUBMENU                               
                      00408         BTFSS   DOWN
                      00409         GOTO    CURSOR_DOWN_SUBMENU
                      00410         BTFSS   ENTER
                      00411         GOTO    ENTER_SUBMENU
                      00412         BTFSS   EXIT
                      00413         GOTO    EXIT_SUBMENU
                      00414         ENDIF
                      00415 ;-----------------------------------------------------------------
Message[305]: Using default destination of 1 (file).
033A   0B??           00416         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата     
033B   2???           00417         GOTO    LOOP_SUBMENU                            ; Цикл ожидания нажатия в пункте меню
Message[305]: Using default destination of 1 (file).
033C   0B??           00418         DECFSZ  TEMP_2  
033D   2???           00419         GOTO    LOOP_SUBMENU
Message[305]: Using default destination of 1 (file).
033E   0B??           00420         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
                                    
033F   2???           00421         GOTO    LOOP_SUBMENU
0340   2???           00422         GOTO    SWITCH_MENU                                     ; Вышел таймаут нахождения в подменю, вы
                            ходим в предыдущий пункт меню
                      00423 ;-----------------------------------------------------------------
0341                  00424 CURSOR_UP_SUBMENU                                               ; Была нажата клавиша "Вверх"
                      00425         IF      USE_MOVING_CURSOR & !USE_RBIE
                      00426         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00427         ANDWF   FLAGS                                           
                      00428         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00429         ENDIF
                      00430 
Message[305]: Using default destination of 1 (file).
0341   03??           00431         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт подменю
0342   1F80           00432         BTFSS   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество подпунктов меню ограничено 64
0343   2???           00433         GOTO    SWITCH_SUBMENU  
0344   08??           00434         MOVFW   NUM_OF_SUBMENU                          ; Стало "<0", возвращаем количество пунктов в да
                            ном подменю     
0345   00??           00435         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
Message[305]: Using default destination of 1 (file).
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0346   03??           00436         DECF    INDEX_SUBMENU                           ; Учитываем, что индекс пункта подменю на 1 мень
                            ше его порядкового номера
0347   2???           00437         GOTO    SWITCH_SUBMENU                          ; Отрисовываем новый текущий подпункт меню      
                      00438 ;-----------------------------------------------------------------
0348                  00439 CURSOR_DOWN_SUBMENU                                             ; Была нажата клавиша "Вниз"
                      00440         IF      USE_MOVING_CURSOR & !USE_RBIE
                      00441         MOVLW   B'11110000'                                     ; Сбросим признак нажатия для всех кнопо
                            к                                       
                      00442         ANDWF   FLAGS                                           
                      00443         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00444         ENDIF
                      00445 
Message[305]: Using default destination of 1 (file).
0348   0A??           00446         INCF    INDEX_SUBMENU                           ; Берем следущий пункт подменю
0349   08??           00447         MOVFW   NUM_OF_SUBMENU                          ; Возвращаем количество пунктов в даном подменю 
034A   02??           00448         SUBWF   INDEX_SUBMENU,W                         ; Достигли последнего ? 
034B   1903           00449         BTFSC   STATUS,Z
034C   01??           00450         CLRF    INDEX_SUBMENU                           ; Если да, делаем текущим первый подпункт меню  
                                    
034D   2???           00451         GOTO    SWITCH_SUBMENU                          ; Отрисовываем новый текущий подпункт меню
                      00452 ;-----------------------------------------------------------------      
034E                  00453 EXIT_SUBMENU                                                    ; Была нажата клавиша "Выход"
034E   01??           00454         CLRF    INDEX_SUBMENU                           ; Обнуляем индекс пункта подменю, чтобы при след
                            ующем заходе в любой пункт меню курсор находился на 1 пункте подменю                    
034F   2???           00455         GOTO    SWITCH_MENU                                     ; Выходим в меню
                      00456 ;-----------------------------------------------------------------
0350                  00457 ENTER_SUBMENU                                                   ; Была нажата клавиша "Вход"
0350   2???           00458         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
0351   2???           00459         GOTO    SWITCH_ACTION                           ; Делаем действие текущего подпункта меню
0352                  00460 END_ACTION
                      00461 ;-----------------------------------------------------------------
0352   01??           00462         CLRF    SYMBOL_POINTER                          ; Рисуем подтверждение действия
0353                  00463 STRING_ACTION_COMPLETE
0353   2???           00464         CALL    TABLE_ACTION_COMPLETE   
0354   39FF           00465         ANDLW   0FFH
0355   1903           00466         BTFSC   STATUS,Z
0356   2???           00467         GOTO    OUT_ACTION_COMPLETE
0357   2???           00468         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0358   0A??           00469         INCF    SYMBOL_POINTER  
0359   2???           00470         GOTO    STRING_ACTION_COMPLETE
035A                  00471 OUT_ACTION_COMPLETE
035A   01??           00472         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
035B   2???           00473         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
035C   0B??           00474         DECFSZ  TEMP_3
035D   2???           00475         GOTO    $-2
                      00476 ;-----------------------------------------------------------------
035E   2???           00477         GOTO    SWITCH_SUBMENU                          ; И идем отрисовывать подпункт меню, курсор на т
                            ом же подпункте, что и был
                      00478 ;===================================================================================================
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

035F                  00479 ZASTAVKA
035F   2???           00480         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
0360   01??           00481         CLRF    SYMBOL_POINTER
0361                  00482 FIRST_STRING
0361   2???           00483         CALL    TABLE_ZASTAVKA_FIRST_STRING     
0362   39FF           00484         ANDLW   0FFH
0363   1903           00485         BTFSC   STATUS,Z
0364   2???           00486         GOTO    OUT_FIRST_STRING
0365   2???           00487         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0366   0A??           00488         INCF    SYMBOL_POINTER  
0367   2???           00489         GOTO    FIRST_STRING
0368                  00490 OUT_FIRST_STRING
0368   30C0           00491         MOVLW   SECOND_LINE     
0369   2???           00492         CALL    SEND_LCD_COMMAND
036A   01??           00493         CLRF    SYMBOL_POINTER
036B                  00494 NEXT_STRING
036B   2???           00495         CALL    TABLE_ZASTAVKA_SECOND_STRING
036C   39FF           00496         ANDLW   0FFH
036D   1903           00497         BTFSC   STATUS,Z
036E   2???           00498         GOTO    OUT_NEXT_STRING
036F   2???           00499         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0370   0A??           00500         INCF    SYMBOL_POINTER  
0371   2???           00501         GOTO    NEXT_STRING
0372                  00502 OUT_NEXT_STRING
0372   2???           00503         GOTO    MAIN
                      00504 ;===================================================================================================
0373                  00505 DEBOUNCE_DELAY                                                  ; Подпрограмма антидребезговой задержки
0373   3003           00506         MOVLW   .3                                                      ; Количество проходов подбираетс
                            я экспериментальным путем
0374   00??           00507         MOVWF   TEMP_2
0375   01??           00508         CLRF    TEMP_1
0376                  00509 LOOP_DELAY
0376   0806           00510         MOVFW   PORTB                                           
0377   380F           00511         IORLW   B'00001111'                                     ; Установим незначущие разряды
0378   3E01           00512         ADDLW   .1
0379   1D03           00513         BTFSS   STATUS,Z
037A   2???           00514         GOTO    LOOP_DELAY                                      ; Если хоть одна кнопка нажата, просто з
                            ациклимся
Message[305]: Using default destination of 1 (file).
037B   0B??           00515         DECFSZ  TEMP_1  
037C   2???           00516         GOTO    $-1
Message[305]: Using default destination of 1 (file).
037D   0B??           00517         DECFSZ  TEMP_2  
037E   2???           00518         GOTO    LOOP_DELAY
037F   0008           00519         RETURN
                      00520 ;===================================================================================================
                      00521         END
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

ACTIONS_MENU_FLAGS                B'00000001'
ACTION_COMPLETE_STRING            "Action Complete!"
ADD_PCL                           
C                                 00000000
CHECK_1                           0000028C
CHECK_2                           000002F8
CLR_DISP                          00000001
CLR_DISPLAY_ROUTINE               00000269
CNTL_TRIS_MASK                    000000F5
CORRECT_INDEX_MENU                000002A1
CORRECT_INDEX_MENU_2              000002AE
CORRECT_INDEX_SUBMENU             00000312
CORRECT_INDEX_SUBMENU_2           00000320
CREATE_MENU_NAMES                 
CREATE_SUBMENU_NAMES              
CURSOR_DOWN_MENU                  000002D4
CURSOR_DOWN_SUBMENU               00000348
CURSOR_UP_MENU                    000002CE
CURSOR_UP_SUBMENU                 00000341
DC                                00000001
DD_RAM_ADDR                       00000080
DD_RAM_UL                         00000080
DEBOUNCE_DELAY                    00000373
DELAY_4MS                         00000000
DISP_OFF                          00000008
DISP_ON                           0000000C
DISP_ON_B                         0000000F
DISP_ON_C                         0000000E
DOWN                              PORTB,5
DRAW_CURSOR                       
DRAW_CURSOR_ROUTINE               0000026D
E                                 00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
END_ACTION                        00000352
END_MENU_ACTION                   000002EB
ENTER                             PORTB,6
ENTER_MENU                        000002DF
ENTER_SUBMENU                     00000350
ENTRY_DEC                         00000004
ENTRY_DEC_S                       00000005
ENTRY_INC                         00000006
ENTRY_INC_S                       00000007
EXIT                              PORTB,7
EXIT_DELAY                        .20
EXIT_MENU                         000002DA
EXIT_SUBMENU                      0000034E
F                                 00000001
FIRST_STRING                      00000361
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

FLAGS                             00000000
FSR                               00000004
GIE                               00000007
GOTO_MENU_ACTION                  
GOTO_PUNKT_MENU                   
GOTO_PUNKT_SUBMENU                
GOTO_PUNKT_SUBMENU_ACTION         
INDEX_MENU                        00000000
INDEX_SUBMENU                     00000001
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
KNOWN_ZERO                        00000000
LAST_SYMBOL_FIRST_LINE            0000008F
LAST_SYMBOL_SECOND_LINE           000000CF
LCD_CNTL                          00000005
LCD_CNTL_TRIS                     00000085
LCD_DATA                          00000006
LCD_DATA_TRIS                     00000086
LOOP_1                            000002E4
LOOP_DELAY                        00000376
LOOP_MENU                         000002BF
LOOP_SUBMENU                      00000332
MAIN                              00000000
MENU_1                            000000F5
MENU_1_ACTION                     00000245
MENU_1_SUBMENU_1_ACTION           00000258
MENU_1_SUBMENU_2_ACTION           00000259
MENU_1_SUBMENU_3_ACTION           0000025A
MENU_1_TABLE                      00000071
MENU_1_TABLE_ACTION               000000BA
MENU_2                            00000106
MENU_2_ACTION                     00000253
MENU_2_SUBMENU_1                  0000015B
MENU_2_SUBMENU_1_ACTION           0000025B
MENU_2_SUBMENU_2_ACTION           0000025C
MENU_2_SUBMENU_3_ACTION           0000025D
MENU_2_TABLE                      00000079
MENU_2_TABLE_ACTION               000000C2
MENU_3                            00000117
MENU_3_ACTION                     00000254
MENU_3_SUBMENU_1                  0000016F
MENU_3_SUBMENU_1_ACTION           0000025E
MENU_3_SUBMENU_2                  00000183
MENU_3_SUBMENU_2_ACTION           0000025F
MENU_3_SUBMENU_3_ACTION           00000260
MENU_3_TABLE                      00000082
MENU_3_TABLE_ACTION               000000CB
MENU_4                            00000128
MENU_4_ACTION                     00000255
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

MENU_4_SUBMENU_1                  00000197
MENU_4_SUBMENU_1_ACTION           00000261
MENU_4_SUBMENU_2                  000001AB
MENU_4_SUBMENU_2_ACTION           00000262
MENU_4_SUBMENU_3                  000001BF
MENU_4_SUBMENU_3_ACTION           00000263
MENU_4_TABLE                      0000008C
MENU_4_TABLE_ACTION               000000D5
MENU_5                            00000139
MENU_5_ACTION                     00000256
MENU_5_SUBMENU_1                  000001D3
MENU_5_SUBMENU_1_ACTION           00000264
MENU_5_SUBMENU_2                  000001E7
MENU_5_SUBMENU_2_ACTION           00000265
MENU_5_SUBMENU_3                  000001FB
MENU_5_SUBMENU_3_ACTION           00000266
MENU_5_SUBMENU_4                  0000020F
MENU_5_SUBMENU_4_ACTION           00000267
MENU_5_TABLE                      00000097
MENU_5_TABLE_ACTION               000000E0
MENU_6                            0000014A
MENU_6_ACTION                     00000257
MENU_6_SUBMENU_1                  00000223
MENU_6_SUBMENU_1_ACTION           00000268
MENU_6_TABLE                      000000A3
MENU_6_TABLE_ACTION               000000EC
MENU_ACTION                       00000237
MENU_COUNTER                      00000004
MENU_HEANDLER                     00000284
MENU_NAME_1                       "1.Menu_1"
MENU_NAME_2                       "2.Menu_2"
MENU_NAME_3                       "3.Menu_3"
MENU_NAME_4                       "4.Menu_4"
MENU_NAME_5                       "5.Menu_5"
MENU_NAME_6                       "6.Menu_6"
MENU_SUBMENU_NAME_1_1             "1.1.SubMenu"
MENU_SUBMENU_NAME_1_2             "1.2.SubMenu"
MENU_SUBMENU_NAME_1_3             "1.3.SubMenu"
MENU_SUBMENU_NAME_2_1             "2.1.SubMenu"
MENU_SUBMENU_NAME_2_2             "2.2.SubMenu"
MENU_SUBMENU_NAME_2_3             "2.3.SubMenu"
MENU_SUBMENU_NAME_3_1             "3.1.SubMenu"
MENU_SUBMENU_NAME_3_2             "3.2.SubMenu"
MENU_SUBMENU_NAME_3_3             "3.3.SubMenu"
MENU_SUBMENU_NAME_4_1             "4.1.SubMenu"
MENU_SUBMENU_NAME_4_2             "4.2.SubMenu"
MENU_SUBMENU_NAME_4_3             "4.3.SubMenu"
MENU_SUBMENU_NAME_5_1             "5.1.SubMenu"
MENU_SUBMENU_NAME_5_2             "5.2.SubMenu"
MENU_SUBMENU_NAME_5_3             "5.3.SubMenu"
MENU_SUBMENU_NAME_5_4             "5.4.SubMenu"
MENU_SUBMENU_NAME_6_1             "6.1.SubMenu"
MOD_PCL                           
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

NEXT_STRING                       0000036B
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
NUM_OF_MAIN_MENU_PUNKTS           .6
NUM_OF_SUBMENU                    00000002
NUM_OF_SUBMENU_PUNKTS_1           .0
NUM_OF_SUBMENU_PUNKTS_2           .1
NUM_OF_SUBMENU_PUNKTS_3           .2
NUM_OF_SUBMENU_PUNKTS_4           .3
NUM_OF_SUBMENU_PUNKTS_5           .4
NUM_OF_SUBMENU_PUNKTS_6           .1
NUM_OF_SUBMENU_TABLE              00000047
OFFSET                            00000000
ONLY_WRITE                        00000001
OPTION_REG                        00000081
OUT_ACTION_COMPLETE               0000035A
OUT_ACTION_COMPLETE_              0000024E
OUT_FIRST_STRING                  00000368
OUT_NEXT_STRING                   00000372
PCL                               00000002
PCLATH                            0000000A
POP                               
PORTA                             00000005
PORTB                             00000006
PRESSING_DOWN                     000002A6
PRESSING_DOWN_2                   00000318
PRESS_DOWN                        FLAGS,1
PRESS_ENTER                       FLAGS,2
PRESS_EXIT                        FLAGS,3
PRESS_UP                          FLAGS,0
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PUSH                              
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RETLW_NUM_OF_SUBMENU_PUNKTS       
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

ROTATE_ACTION_MENU_FLAGS          000002E9
RP0                               00000005
RP1                               00000006
RS                                00000003
SECOND_LINE                       000000C0
SECOND_STRING_ROUTINE             00000271
SEND_LCD_COMMAND                  00000000
SEND_LCD_SYMBOL                   00000000
SKIP_CHECK_1                      00000292
SKIP_CHECK_2                      000002FF
SKIP_CORRECT_INDEX_MENU_2         000002B3
SKIP_CORRECT_INDEX_MENU_3         000002B6
SKIP_CORRECT_INDEX_SUBMENU_2      00000326
SKIP_CORRECT_INDEX_SUBMENU_3      00000329
STATUS                            00000003
STRING_ACTION_COMPLETE            00000353
STRING_ACTION_COMPLETE_           00000247
STRING_MENU                       00000275
STRING_SUBMENU                    0000027D
SWITCH_ACTION                     000000AC
SWITCH_MENU                       00000285
SWITCH_MENU_ROUTINE               00000274
SWITCH_MENU_TABLE                 00000055
SWITCH_SUBMENU                    000002F1
SWITCH_SUBMENU_ROUTINE            0000027C
SWITCH_SUBMENU_TABLE              00000063
SYMBOL_POINTER                    00000003
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TABLE_ACTION_COMPLETE             00000000
TABLE_ZASTAVKA_FIRST_STRING       00000019
TABLE_ZASTAVKA_SECOND_STRING      00000030
TEMP_1                            00000005
TEMP_2                            00000006
TEMP_3                            00000007
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
MPASM  5.51                 MICROMENU_LIB.ASM   12-16-2018  15:27:02         PAGE 53


SYMBOL TABLE
  LABEL                             VALUE 

TRISB6                            00000006
TRISB7                            00000007
UP                                PORTB,4
USE_4_BIT_MODE                    00000001
USE_HIGH_NIBLE                    00000000
USE_MENU_ACTION                   1
USE_MOVING_CURSOR                 1
USE_ONE_PORT                      00000000
USE_RBIE                          1
USE_SHORT_MOD_PCL                 1
USE_STATIC_CURSOR                 0
USE_TOP_LAST_CURSOR               1
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
ZASTAVKA                          0000035F
ZASTAVKA_FIRST_STRING             "  MicroMenuLib"
ZASTAVKA_SECOND_STRING            "  ver 1.0 beta"
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_MICROMENU_0251                   00000251
_MICROMENU_035D                   0000035D
_MICROMENU_037C                   0000037C
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001

Errors   :     0
Warnings :   129 reported,     0 suppressed
Messages :    43 reported,     0 suppressed

