MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         INCLUDE MICROMENU_LIB.H
                      00001 ; Микроменю на базе двухстрочного индикатора HD44780 и четырехпозиционного джойстика (крестовины кнопок)
                      00002 
Warning[205]: Found directive in column 1. (INCLUDE)
                      00003 INCLUDE HARDWARE_PROFILE.INC
                      00001         #INCLUDE P16F84.INC
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F84 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00206         LIST
                      00002 ;       list p=16f84
Warning[205]: Found directive in column 1. (INCLUDE)
                      00004 INCLUDE MACRO.H 
                      00001 #DEFINE USE_SHORT_MOD_PCL       1       ; Использовать "укороченную" версию макроса модификации PCL, поз
                            воляет экономить 1 слово памяти на каждом вызове макроса ценой 1 лишней ячейки ОЗУ
                      00002 
                      00003 PUSH    MACRO
                      00004                 MOVWF   W_TEMP
                      00005                 SWAPF   STATUS,W
                      00006                 MOVWF   STATUS_TEMP
                      00007                 ENDM
                      00008 
                      00009 POP             MACRO
                      00010                 SWAPF   STATUS_TEMP,W
                      00011                 MOVWF   STATUS
                      00012                 SWAPF   W_TEMP,F
                      00013                 SWAPF   W_TEMP,W
                      00014                 ENDM
                      00015 
                      00016 CLR_RAM_MACRO   MACRO
                      00017                                 MOVLW   4FH             ; end of RAM
                      00018                                 MOVWF   FSR
                      00019                         CLR_RAM 
                      00020                                 CLRF    INDF
                      00021                                 DECF    FSR
                      00022                                 MOVFW   FSR
                      00023                                 SUBLW   0CH-1   ; start RAM
                      00024                                 BNZ             CLR_RAM
                      00025                                 ENDM
                      00026 
                      00027 MOD_PCL MACRO   TARGET                  ; Макрос, позволяет размещать таблицы на границах страниц
                      00028                 LOCAL   TABLE
                      00029                 MOVFW   TARGET
                      00030                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
                      00031                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                      00032         IF      USE_SHORT_MOD_PCL
                      00033                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
                      00034                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00035         ELSE
                      00036                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                      00037                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                      00038                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                      00039         ENDIF
                      00040                 MOVWF   PCLATH                  ; Установить старшую часть адреса
                      00041                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
                      00042                 MOVWF   PCL                             ; Установить младшую часть адреса
                      00043         TABLE
                      00044                 ENDM
                      00045 
                      00046 ADD_PCL MACRO   TARGET,ADDRESS  ; Макрос, позволяет удобно указывать страницу для следующего за ним кода
                      00047                                 MOVFW   TARGET  
                      00048                                 CLRF    PCLATH
                      00049                         IF      (ADDRESS==0X100)
                      00050                                 BSF             PCLATH,0
                      00051                         ENDIF
                      00052                         IF      (ADDRESS==0X200)
                      00053                                 BSF             PCLATH,1
                      00054                         ENDIF
                      00055                         IF      (ADDRESS==0X300)
                      00056                                 BSF             PCLATH,0                                
                      00057                                 BSF             PCLATH,1
                      00058                         ENDIF
                      00059                         IF      (ADDRESS==0X400)
                      00060                                 BSF             PCLATH,2                                
                      00061                         ENDIF
                      00062                                 ADDWF   PCL
                      00063                                 ENDM
                      00005 
                      00006 #DEFINE USE_STATIC_CURSOR               1                               ; Всегда рисовать курсор в конце
                             1-й строки
                      00007 #DEFINE USE_MOVING_CURSOR               0                               ; Использовать перемещаемый курс
                            ор (повышает удобство использования меню и размер прошивки)
                      00008 #DEFINE USE_TOP_LAST_CURSOR             0                               ; Использовать отображение "перв
                            ый пункт всегда сверху" и "последний пункт всегда снизу" (повышает удобство использования меню и
                      00009 #DEFINE SAVE_CURSOR_POSITION    0                               ; Сохранять позицию курсора при входе в 
                            подменю, и восстанавливать ее при выходе в главное меню
                      00010 #DEFINE USE_MENU_ACTION                 1                               ; Использовать возможность запус
                            ка действий при входе в пункт меню
                      00011 #DEFINE USE_RBIE                                0                               ; Использовать прерывани
                            е по изминению состояния PORTB для обработки кнопок (позволяет использовать сон)
                      00012 
Warning[205]: Found directive in column 1. (IF)
                      00013 IF      USE_MENU_ACTION 
                      00014 #DEFINE ACTIONS_MENU_FLAGS              B'00000001'             ; Выставленный бит - есть действие при в
                            ходе в этот пункт меню (не забыть заполнить обработчик действия)
Warning[205]: Found directive in column 1. (ENDIF)
                      00015 ENDIF
                      00016 
                      00017 #DEFINE UP                                              PORTB,4
                      00018 #DEFINE DOWN                                    PORTB,5
                      00019 #DEFINE ENTER                                   PORTB,6
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00020 #DEFINE EXIT                                    PORTB,7
                      00021 
                      00022 #DEFINE PRESS_UP                                BUTTONS,0
                      00023 #DEFINE PRESS_DOWN                              BUTTONS,1
                      00024 #DEFINE PRESS_EXIT                              BUTTONS,2
                      00025 #DEFINE PRESS_ENTER                             BUTTONS,3       
                      00026 
                      00027 ;#define        ZUMER                                   PORTA,0
                      00028 
                      00029 #DEFINE EXIT_DELAY                              .20                             ; Количество опросов кно
                            пок, до выхода в предыдущий уровень (* 0,8 сек)
                      00030 
                      00031 #DEFINE ZASTAVKA_FIRST_STRING   "  MicroMenuLib"
                      00032 #DEFINE ZASTAVKA_SECOND_STRING  "  ver 1.0 beta"
                      00033 
                      00034 #DEFINE NUM_OF_MAIN_MENU_PUNKTS .5                              ; Количество пунктов меню, до 10 
                      00035 
                      00036 #DEFINE MENU_NAME_1                             "1.Menu_1"
                      00037 #DEFINE MENU_NAME_2                             "2.Menu_2"
                      00038 #DEFINE MENU_NAME_3                             "3.Menu_3"
                      00039 #DEFINE MENU_NAME_4                             "4.Menu_4"
                      00040 #DEFINE MENU_NAME_5                             "5.Menu_5"
                      00041 #DEFINE MENU_NAME_6                             "6.Menu_6"      
                      00042 
                      00043 #DEFINE NUM_OF_SUBMENU_PUNKTS_1 .0                              ; Количество подпунктов каждого пункта м
                            еню, до 8
                      00044 
                      00045 #DEFINE MENU_SUBMENU_NAME_1_1   "1.1.Subm"
                      00046 #DEFINE MENU_SUBMENU_NAME_1_2   "1.2.Subm"
                      00047 #DEFINE MENU_SUBMENU_NAME_1_3   "1.3.Subm"
                      00048 #DEFINE MENU_SUBMENU_NAME_1_4   "1.4.Subm"
                      00049 
                      00050 #DEFINE NUM_OF_SUBMENU_PUNKTS_2 .1
                      00051 
                      00052 #DEFINE MENU_SUBMENU_NAME_2_1   "2.1.Subm"
                      00053 #DEFINE MENU_SUBMENU_NAME_2_2   "2.2.Subm"
                      00054 #DEFINE MENU_SUBMENU_NAME_2_3   "2.3.Subm"
                      00055 #DEFINE MENU_SUBMENU_NAME_2_4   "2.4.Subm"
                      00056                                 
                      00057 #DEFINE NUM_OF_SUBMENU_PUNKTS_3 .2
                      00058 
                      00059 #DEFINE MENU_SUBMENU_NAME_3_1   "3.1.Subm"
                      00060 #DEFINE MENU_SUBMENU_NAME_3_2   "3.2.Subm"
                      00061 #DEFINE MENU_SUBMENU_NAME_3_3   "3.3.Subm"
                      00062 #DEFINE MENU_SUBMENU_NAME_3_4   "3.4.Subm"
                      00063 
                      00064 #DEFINE NUM_OF_SUBMENU_PUNKTS_4 .3
                      00065 
                      00066 #DEFINE MENU_SUBMENU_NAME_4_1   "4.1.Subm"
                      00067 #DEFINE MENU_SUBMENU_NAME_4_2   "4.2.Subm"
                      00068 #DEFINE MENU_SUBMENU_NAME_4_3   "4.3.Subm"
                      00069 #DEFINE MENU_SUBMENU_NAME_4_4   "4.4.Subm"
                      00070 
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00071 #DEFINE NUM_OF_SUBMENU_PUNKTS_5 .4
                      00072 
                      00073 #DEFINE MENU_SUBMENU_NAME_5_1   "5.1.Subm"
                      00074 #DEFINE MENU_SUBMENU_NAME_5_2   "5.2.Subm"
                      00075 #DEFINE MENU_SUBMENU_NAME_5_3   "5.3.Subm"
                      00076 #DEFINE MENU_SUBMENU_NAME_5_4   "5.4.Subm"
                      00077 ;=======================================================================================================
                            =========
                      00078 CREATE_MENU_NAMES       MACRO                           ; Макрос, создает имена всех пунктов меню
                      00079                         LOCAL   A=1
                      00080                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00081                                 MENU_#V(A)
                      00082                                         MOD_PCL SYMBOL_POINTER
                      00083                                         DT              MENU_NAME_#V(A),0
                      00084                                         A+=1
                      00085                                 ENDW
                      00086                         ENDM
                      00087 ;=======================================================================================================
                            =========
                      00088 RETLW_NUM_OF_SUBMENU_PUNKTS     MACRO           ; Макрос, возвращает количество пунктов нужного подменю
                      00089                                 MOD_PCL INDEX_MENU
                      00090                         LOCAL   A=1
                      00091                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00092                                         RETLW   NUM_OF_SUBMENU_PUNKTS_#V(A)
                      00093                                         A+=1
                      00094                                 ENDW
                      00095                         ENDM
                      00096 ;=======================================================================================================
                            =========
                      00097 GOTO_PUNKT_MENU MACRO                                   ; Макрос, создает переходы на все пункты меню
                      00098                                 MOD_PCL INDEX_MENU
                      00099                         LOCAL   A=1
                      00100                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00101                                         GOTO    MENU_#V(A)
                      00102                                         A+=1
                      00103                                 ENDW
                      00104                         ENDM
                      00105 ;=======================================================================================================
                            =========
                      00106 GOTO_PUNKT_SUBMENU      MACRO                           ; Макрос, создает переходы на имена всех подпунк
                            тов меню
                      00107                                         MOD_PCL INDEX_MENU                              
                      00108                                         LOCAL   C=1
                      00109                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00110                                                 GOTO    MENU_#V(C)_TABLE
                      00111                                                 C+=1
                      00112                                         ENDW
                      00113                                         LOCAL   D=1
                      00114                                         LOCAL   A
                      00115                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00116                                                 A=1     
                      00117                                                 MENU_#V(D)_TABLE
                      00118                                                 MOD_PCL INDEX_SUBMENU
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00119                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00120                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                      00121                                                         A+=1
                      00122                                                 ENDW
                      00123                                                 D+=1
                      00124                                         ENDW    
                      00125                                         ENDM
                      00126 ;=======================================================================================================
                            =========
                      00127 GOTO_PUNKT_SUBMENU_ACTION       MACRO           ; Макрос, создает переходы на действия всех подпунктов м
                            еню
                      00128                                                         MOD_PCL INDEX_MENU                              
                      00129                                                         LOCAL   C=1
                      00130                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
                      00131                                                                 GOTO    MENU_#V(C)_TABLE_ACTION
                      00132                                                                 C+=1
                      00133                                                         ENDW
                      00134                                                         LOCAL   D=1
                      00135                                                         LOCAL   A
                      00136                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00137                                                                 A=1     
                      00138                                                                 MENU_#V(D)_TABLE_ACTION
                      00139                                                                 MOD_PCL INDEX_SUBMENU
                      00140                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00141                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
                      00142                                                                         A+=1
                      00143                                                                 ENDW
                      00144                                                                 D+=1
                      00145                                                         ENDW
                      00146                                                         ENDM
                      00147 ;=======================================================================================================
                            =========
                      00148 CREATE_SUBMENU_NAMES_   MACRO                           ; Не работающий макрос создания имен всех подпун
                            ктов меню :(
                      00149                                                 LOCAL   D=1
                      00150                                                 LOCAL   A       
                      00151                                                 WHILE   D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00152                                                         A=1
                      00153                                                         WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1         
                                                                    
                      00154                                                                 MENU_#V(D)_SUBMENU_#V(A)
                      00155                                                                 MOD_PCL SYMBOL_POINTER
                      00156                                                                 DT      MENU_SUBMENU_NAME_#V(D)_#V(A),0
                      00157                                                                 A+=1
                      00158                                                         ENDW
                      00159                                                         D+=1
                      00160                                                 ENDW
                      00161                                                 ENDM
                      00162 ;=======================================================================================================
                            =========
                      00163 CREATE_SUBMENU_NAMES    MACRO                           ; Макрос, создает имена всех подпунктов меню
                      00164                                 LOCAL   D=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00165 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00166 ; Подпункты 1 пункта меню
                      00167 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00168                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00169                                 LOCAL   A=1     
                      00170                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00171                                         MENU_#V(D)_SUBMENU_#V(A)
                      00172                                                 MOD_PCL SYMBOL_POINTER
                      00173                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                      00174                                         A+=1
                      00175                                 ENDW
                      00176                                         D+=1
                      00177                                 ENDIF
                      00178 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00179 ; Подпункты 2 пункта меню
                      00180 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00181                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00182                                 LOCAL   A=1     
                      00183                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00184                                         MENU_#V(D)_SUBMENU_#V(A)
                      00185                                                 MOD_PCL SYMBOL_POINTER
                      00186                                                 DT              MENU_SUBMENU_NAME_2_#V(A),0
                      00187                                         A+=1
                      00188                                 ENDW
                      00189                                         D+=1
                      00190                                 ENDIF
                      00191 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00192 ; Подпункты 3 пункта меню
                      00193 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00194                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00195                                 LOCAL   A=1     
                      00196                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00197                                         MENU_#V(D)_SUBMENU_#V(A)
                      00198                                                 MOD_PCL SYMBOL_POINTER
                      00199                                                 DT              MENU_SUBMENU_NAME_3_#V(A),0
                      00200                                         A+=1
                      00201                                 ENDW
                      00202                                         D+=1
                      00203                                 ENDIF
                      00204 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00205 ; Подпункты 4 пункта меню
                      00206 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00207                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00208                                 LOCAL   A=1     
                      00209                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00210                                         MENU_#V(D)_SUBMENU_#V(A)
                      00211                                                 MOD_PCL SYMBOL_POINTER
                      00212                                                 DT              MENU_SUBMENU_NAME_4_#V(A),0
                      00213                                         A+=1
                      00214                                 ENDW
                      00215                                         D+=1
                      00216                                 ENDIF
                      00217 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00218 ; Подпункты 5 пункта меню
                      00219 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00220                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00221                                 LOCAL   A=1     
                      00222                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00223                                         MENU_#V(D)_SUBMENU_#V(A)
                      00224                                                 MOD_PCL SYMBOL_POINTER
                      00225                                                 DT              MENU_SUBMENU_NAME_5_#V(A),0
                      00226                                         A+=1
                      00227                                 ENDW
                      00228                                         D+=1
                      00229                                 ENDIF
                      00230 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00231 ; Подпункты 6 пункта меню
                      00232 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00233                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00234                                 LOCAL   A=1     
                      00235                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00236                                         MENU_#V(D)_SUBMENU_#V(A)
                      00237                                                 MOD_PCL SYMBOL_POINTER
                      00238                                                 DT              MENU_SUBMENU_NAME_6_#V(A),0
                      00239                                         A+=1
                      00240                                 ENDW
                      00241                                         D+=1
                      00242                                 ENDIF
                      00243 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00244 ; Подпункты 7 пункта меню
                      00245 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00246                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00247                                 LOCAL   A=1     
                      00248                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00249                                         MENU_#V(D)_SUBMENU_#V(A)
                      00250                                                 MOD_PCL SYMBOL_POINTER
                      00251                                                 DT              MENU_SUBMENU_NAME_7_#V(A),0
                      00252                                         A+=1
                      00253                                 ENDW
                      00254                                         D+=1
                      00255                                 ENDIF
                      00256 ;-------------------------------------------------------------------------------------------------------
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ----
                      00257 ; Подпункты 8 пункта меню
                      00258 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00259                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                      00260                                 LOCAL   A=1     
                      00261                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_#V(D)+1
                      00262                                         MENU_#V(D)_SUBMENU_#V(A)
                      00263                                                 MOD_PCL SYMBOL_POINTER
                      00264                                                 DT              MENU_SUBMENU_NAME_8_#V(A),0
                      00265                                         A+=1
                      00266                                 ENDW
                      00267                                         D+=1
                      00268                                 ENDIF
                      00269 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00270                         ENDM
                      00271 ;=======================================================================================================
                            =========
Warning[205]: Found directive in column 1. (IF)
                      00272 IF      USE_MENU_ACTION 
                      00273 GOTO_MENU_ACTION        MACRO           ; Макрос, создает переходы на действия всех пунктов меню (если в
                            ключена соответствующая опция)
                      00274                                         MOD_PCL INDEX_MENU                      
                      00275                                         LOCAL   A=1
                      00276                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
                      00277                                         GOTO    MENU_#V(A)_ACTION
                      00278                                         A+=1
                      00279                                 ENDW
                      00280                                         ENDM
Warning[205]: Found directive in column 1. (ENDIF)
                      00281 ENDIF
                      00282 ;=======================================================================================================
                            =========
                      00283 MICROMENU_INIT  MACRO
                      00284                                 CALL    LCD_INIT                                        ; Инициалзация с
                            амого дисплея   
                      00285                                 CLRF    BUTTONS                                         ; Очистим флаги 
                            нажатых кнопок
                      00286                                 IF      USE_RBIE
                      00287                                 BCF             INTCON,RBIF                     
                      00288                                 MOVLW   (1<<RBIE)|(1<<GIE)
                      00289                                 IORWF   INTCON
                      00290                                 ENDIF
                      00291                                 ENDM
                      00292 ;=======================================================================================================
                            =========
Warning[205]: Found directive in column 1. (IF)
                      00293 IF      USE_RBIE
                      00294 BUTTON_HEANDLER MACRO                                                           ; Обработчик нажатия кно
                            пок
                      00295                                 BCF             INTCON,RBIF                                     ; Сброси
                            м флаг вызваного прерывания
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00296                                 MOVFW   PORTB                                           
                      00297                                 IORLW   B'00001111'                                     ; Установим незн
                            ачущие разряды
                      00298                                 ADDLW   .1
                      00299                                 BZ              END_INTERRUPT_HEANDLER          ; Если ни одна кнопка не
                             нажата, пропустим обработку нажатия
                      00300                                 BTFSS   UP
                      00301                                 BSF             PRESS_UP                
                      00302                                 BTFSS   DOWN
                      00303                                 BSF             PRESS_DOWN
                      00304                                 BTFSS   ENTER
                      00305                                 BSF             PRESS_ENTER
                      00306                                 BTFSS   EXIT
                      00307                                 BSF             PRESS_EXIT
                      00308                                 BCF             INTCON,RBIE                                     ; Запрет
                            им все дальнейшие прерывания от кнопок, до обработки этого нажатия
                      00309                                 ENDM
                      00310 ENDIF
                      00311 ;=======================================================================================================
                            =========
                      00312 CHECK_BUTTONS_MACRO     MACRO
                      00313                                         IF      USE_RBIE
                      00314                                         SLEEP
                      00315                                         NOP
                      00316                                         MOVFW   BUTTONS                                         
                      00317                                         ANDLW   B'00001111'                                     ; Занули
                            м незначущие разряды
                      00318                                         BNZ             MENU_HEANDLER                           ; Если х
                            оть одна кнопка нажата, входим в обработчик меню
                      00319                                 
                      00320                                         ELSE
                      00321                                         MOVFW   PORTB                                           
                      00322                                         IORLW   B'00001111'                                     ; Устано
                            вим незначущие разряды
                      00323                                         ADDLW   .1
                      00324                                         BNZ             MENU_HEANDLER                           ; Если х
                            оть одна кнопка нажата, входим в обработчик меню
                      00325                                         ENDIF
                      00326                                         ENDM
                      00327 ;=======================================================================================================
                            =========
                      00002         INCLUDE HD44780_LIB.H
Warning[205]: Found directive in column 1. (INCLUDE)
                      00001 INCLUDE HARDWARE_PROFILE.INC
                      00003         #INCLUDE P16F84.INC
                      00207         LIST
                      00208 
                      00209 ;==========================================================================
                      00210 ;  MPASM PIC16F84 processor include
                      00211 ; 
                      00212 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00213 ;==========================================================================
                      00214 
Message[310]: Superseding current maximum RAM and RAM map.
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00412         LIST
                      00004 ;       list p=16f84
                      00002 
  00000001            00003 Y                               EQU             1                               ; YES
  00000000            00004 N                               EQU             0                               ; NO
                      00005 
  00000001            00006 USE_4_BIT_MODE  EQU             Y                               ; YES/NO
  00000000            00007 USE_HIGH_NIBLE  EQU             N                               ; YES/NO
  00000000            00008 USE_ONE_PORT    EQU             N                               ; YES/NO
  00000001            00009 ONLY_WRITE              EQU             Y                               ; YES/NO
                      00010 
  00000006            00011 LCD_DATA                EQU             PORTB                   ; Описываем порт линий данных
  00000086            00012 LCD_DATA_TRIS   EQU             TRISB
                      00013 
                      00014         IF      (USE_4_BIT_MODE && USE_ONE_PORT); ; Если используем один порт для данных и линий управле
                            ниЯ
                      00015 
                      00016 LCD_CNTL                EQU             LCD_DATA                ; то так и опишем
                      00017 LCD_CNTL_TRIS   EQU             LCD_DATA_TRIS
                      00018 
                      00019         ELSE
                      00020 
  00000005            00021 LCD_CNTL                EQU             PORTA                   ; Иначе зададим любой другой
  00000085            00022 LCD_CNTL_TRIS   EQU             TRISA
                      00023         ENDIF
                      00024         
                      00025         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && ONLY_WRITE)
                      00026 E                               EQU             2
                      00027 RS                              EQU             3
                      00028 CNTL_TRIS_MASK  EQU             B'11110011'             ; Маска настройки линий управлениЯ
                      00029         ENDIF
                      00030 
                      00031         IF      (USE_4_BIT_MODE && USE_ONE_PORT && USE_HIGH_NIBLE && !ONLY_WRITE)
                      00032 E                               EQU             1
                      00033 RW                              EQU             2
                      00034 RS                              EQU             3
                      00035 CNTL_TRIS_MASK  EQU             B'11110001'             ; Маска настройки линий управлениЯ
                      00036         ENDIF   
                      00037 
                      00038         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && ONLY_WRITE)
                      00039 E                               EQU             4
                      00040 RS                              EQU             5
                      00041 CNTL_TRIS_MASK  EQU             B'11001111'             ; Маска настройки линий управлениЯ
                      00042         ENDIF   
                      00043 
                      00044         IF      (USE_4_BIT_MODE && USE_ONE_PORT && !USE_HIGH_NIBLE && !ONLY_WRITE)
                      00045 E                               EQU             4
                      00046 RW                              EQU             5
                      00047 RS                              EQU             6
                      00048 CNTL_TRIS_MASK  EQU             B'10001111'             ; Маска настройки линий управлениЯ
                      00049 
                      00050         ELSE    ; Иначе присваиваем контрольным линиям любой другой порт и вибираем линии их по своему у
                            смотрению
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00051         
  00000001            00052 E                               EQU             1
  00000003            00053 RS                              EQU             3
  000000F5            00054 CNTL_TRIS_MASK  EQU             B'11110101'             ; Маска настройки линий управления
                      00055         ENDIF
                      00056 
  0000000C            00057 DISP_ON                 EQU             B'00001100'             ; Display on
  0000000E            00058 DISP_ON_C               EQU             B'00001110'             ; Display on, Cursor on
  0000000F            00059 DISP_ON_B               EQU             B'00001111'             ; Display on, Cursor on, Blink cursor
  00000008            00060 DISP_OFF                EQU             B'00001000'             ; Display off
  00000001            00061 CLR_DISP                EQU             B'00000001'             ; Clear the Display
  00000006            00062 ENTRY_INC               EQU             B'00000110'             ; автоинкремент адреса, нет сдвига 
  00000007            00063 ENTRY_INC_S             EQU             B'00000111'             ; автоинкремент адреса, есть сдвиг
  00000004            00064 ENTRY_DEC               EQU             B'00000100'             ; автоинкремент адреса, нет сдвига 
  00000005            00065 ENTRY_DEC_S             EQU             B'00000101'             ;
  00000080            00066 DD_RAM_ADDR             EQU             B'10000000'             ; Least Significant 7-bit are for addres
                            s
  00000080            00067 DD_RAM_UL               EQU             B'10000000'             ; Upper Left coner of the Display
  00000080            00068 FIRST_LINE              EQU             B'10000000'             ; Move cursor to first line
  000000C0            00069 SECOND_LINE             EQU             B'11000000'             ; Move cursor to second line
  0000008F            00070 LAST_SYMBOL_FIRST_LINE  EQU     B'10001111'     ; Установим курсор на последний символ 1-й строки
  000000CF            00071 LAST_SYMBOL_SECOND_LINE EQU     B'11001111'     ; Установим курсор на последний символ 2-й строки
                      00072 
                      00073 PRINT_LCD_STRING_MACRO  MACRO   LABEL
                      00074                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
                      00075                                                 CLRF    SYMBOL_POINTER
                      00076                                         PRINT_LCD_STRING
                      00077                                                 CALL    LABEL
                      00078                                                 ANDLW   0FFH
                      00079                                                 BTFSC   STATUS,Z
                      00080                                                 GOTO    END_LCD_STRING          
                      00081                                                 CALL    SEND_LCD_SYMBOL
                      00082                                                 INCF    SYMBOL_POINTER  
                      00083                                                 GOTO    PRINT_LCD_STRING
                      00084                                         END_LCD_STRING  
                      00085                                                 ENDM
                      00086 ;=======================================================================================================
                            =========
                      00087 DRAW_CURSOR     MACRO   SYMBOL
                      00088                         MOVLW   SYMBOL
                      00089                         CALL    DRAW_CURSOR_ROUTINE
                      00090                         ENDM
                      00091 ;=======================================================================================================
                            =========
                      00092 SECOND_LINE_MACRO       MACRO
                      00093                                         MOVLW   SECOND_LINE     
                      00094                                         CALL    SEND_LCD_COMMAND
                      00095                                         ENDM
                      00096 ;=======================================================================================================
                            =========
                      00097 FIRST_LINE_MACRO        MACRO
                      00098                                         MOVLW   FIRST_LINE      
                      00099                                         CALL    SEND_LCD_COMMAND
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00100                                         ENDM
                      00101 ;=======================================================================================================
                            =========
                      00003 
                      00004 MICROMENU_LIB_UDATA     UDATA_SHR
0000                  00005 INDEX_MENU              RES     1
0001                  00006 INDEX_SUBMENU   RES     1
0002                  00007 NUM_OF_SUBMENU  RES     1                                       ; Количество пунктов в текущем меню
0003                  00008 SYMBOL_POINTER  RES     1
0004                  00009 MENU_COUNTER    RES     1
0005                  00010 BUTTONS                 RES     1
0006                  00011 TEMP_1                  RES     1
0007                  00012 TEMP_2                  RES     1
0008                  00013 TEMP_3                  RES     1
                      00014 
                      00015         IF SAVE_CURSOR_POSITION
                      00016 SAVE_POSITION   RES     1
                      00017         ENDIF
                      00018 
                      00019         IF      USE_SHORT_MOD_PCL
  0000                00020         EXTERN  KNOWN_ZERO
                      00021         ENDIF
                      00022 
  0000                00023         GLOBAL  BUTTONS
  0000                00024         EXTERN  OFFSET
  0000                00025         GLOBAL  MENU_HEANDLER,ZASTAVKA,ENTER_MENU
  0000                00026         EXTERN  SEND_LCD_SYMBOL,SEND_LCD_COMMAND,DELAY_4MS,CLR_DISPLAY_ROUTINE,MAIN
                      00027 ;===================================================================================================
                      00028 MICROMENU               CODE                                    ; Сегмент кода библиотеки меню
                      00029 ;===================================================================================================
0000                  00030 TABLE_ACTION_COMPLETE 
                      00031         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0000   08??               M                 MOVFW   SYMBOL_POINTER
0001   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0002   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0003   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0004   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0005   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0006   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0007   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0008                      M         TABLE
0008   3441 3463 3474 00032         DT              "Action Complete!",0
       3469 346F 346E 
       3420 3443 346F 
       346D 3470 346C 
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3465 3474 3465 
       3421 3400 
                      00033 ;===================================================================================================
0019                  00034 MENU_HEANDLER                                                   ; Обработчик меню
                      00035 ;===================================================================================================
0019   01??           00036         CLRF    INDEX_MENU                                      ; Была нажатая какая-то кнопка, очистим 
                            индекс пункта меню                                      
                      00037 
                      00038         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00039         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00040         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00041         ENDIF
                      00042 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
001A                  00043 DRAW_MENU                                                               ; Отрисовка пунктов меню        
                                                                            
                      00044         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
                      00045         MOVFW   INDEX_MENU
                      00046         BNZ             CHECK_1                                         ; Если первый пункт меню        
                                    
                      00047         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
                      00048         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00049         GOTO    SKIP_CHECK_1
                      00050 CHECK_1
                      00051         SUBLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Сравниваем с количеством пунктов меню
                      00052         BNZ             SKIP_CHECK_1                            ; Если последний пункт меню     
                      00053         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
                      00054         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00055 SKIP_CHECK_1
                      00056         ENDIF
                      00057 
001A   2???           00058         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой пункт
                            ов меню, чтобы уменьшить моргание
                      00059 
                      00060         IF      USE_MOVING_CURSOR
                      00061         BTFSS   PRESS_UP                                        ; Если была нажата кнопка вверх
                      00062         GOTO    PRESSING_DOWN                   
                      00063         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню
                      00064         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
                      00065         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00066         INCF    INDEX_MENU                                      ; Берем следующий пункт меню
                      00067         MOVFW   INDEX_MENU
                      00068         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
                      00069         BZ              CORRECT_INDEX_MENU                              
                      00070         CALL    DRAW_MENU_ROUTINE                       ; Рисуем СЛЕДУЮЩИЙ пункт меню под текущим
                      00071         DECF    INDEX_MENU                                      ; Вернем текущий индекс меню
                      00072         GOTO    SKIP_CORRECT_INDEX_MENU_3
                      00073 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00074         CLRF    INDEX_MENU
                      00075         CALL    DRAW_MENU_ROUTINE
                      00076         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
                      00077         MOVWF   INDEX_MENU
                      00078         GOTO    SKIP_CORRECT_INDEX_MENU_3
                      00079 PRESSING_DOWN                                                   ; Если была нажата кнопка вниз          
                                                                    
                      00080         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
                      00081         BTFSC   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
                      00082         GOTO    CORRECT_INDEX_MENU_2
                      00083         CALL    DRAW_MENU_ROUTINE                       ; Рисуем предыдущий пункт меню
                      00084         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00085         INCF    INDEX_MENU                                      ; Вернем текущий индекс меню            
                                            
                      00086         GOTO    SKIP_CORRECT_INDEX_MENU_2
                      00087 CORRECT_INDEX_MENU_2
                      00088         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
                      00089         MOVWF   INDEX_MENU
                      00090         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ПРЕДЫДУЩИЙ пункт меню над текущим
                      00091         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00092         CLRF    INDEX_MENU
                      00093 SKIP_CORRECT_INDEX_MENU_2
                      00094         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню под предыдущим
                      00095         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE
                      00096 SKIP_CORRECT_INDEX_MENU_3
                      00097 
                      00098         ELSE
001B   2???           00099         CALL    DRAW_MENU_ROUTINE                       ; Рисуем ТЕКУЩИЙ пункт меню
001C   2???           00100         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
Message[305]: Using default destination of 1 (file).
001D   0A??           00101         INCF    INDEX_MENU                                      ; Берем следующий пункт меню
001E   08??           00102         MOVFW   INDEX_MENU
001F   3C05           00103         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Сравниваем с количеством пунктов меню
0020   1903 2???      00104         BZ              CORRECT_INDEX_MENU              
0022   2???           00105         CALL    DRAW_MENU_ROUTINE                       ; Рисуем СЛЕДУЮЩИЙ пункт меню под текущим 
Message[305]: Using default destination of 1 (file).
0023   03??           00106         DECF    INDEX_MENU                                      ; Вернем текущий индекс меню    
0024   2???           00107         GOTO    SKIP_CORRECT_INDEX_MENU
0025                  00108 CORRECT_INDEX_MENU                                              ; Достигли последнего пункта меню, следу
                            ющим отображаем 1 пункт
0025   01??           00109         CLRF    INDEX_MENU
0026   2???           00110         CALL    DRAW_MENU_ROUTINE
0027   3004           00111         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1
0028   00??           00112         MOVWF   INDEX_MENU                                      ; Вернем текущий индекс меню    
0029                  00113 SKIP_CORRECT_INDEX_MENU
                      00114         ENDIF
                      00115 
0029   2???           00116         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в меню, при нажатии кнопок "Вверх", "Вниз", выходе из подпункта меню
002A   3014           00117         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
002B   00??           00118         MOVWF   MENU_COUNTER
002C   01??           00119         CLRF    TEMP_1
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

002D   01??           00120         CLRF    TEMP_2
002E                  00121 LOOP_MENU                                                               ; Вычисляем нажатую клавишу
                      00122         IF      USE_RBIE
                      00123         BTFSC   PRESS_UP
                      00124         GOTO    CURSOR_UP_MENU                          
                      00125         BTFSC   PRESS_DOWN
                      00126         GOTO    CURSOR_DOWN_MENU
                      00127         BTFSC   PRESS_ENTER
                      00128         GOTO    ENTER_MENU
                      00129         BTFSC   PRESS_EXIT
                      00130         GOTO    EXIT_MENU
                      00131 
                      00132         ELSE
002E   1E06           00133         BTFSS   UP
002F   2???           00134         GOTO    CURSOR_UP_MENU                          
0030   1E86           00135         BTFSS   DOWN
0031   2???           00136         GOTO    CURSOR_DOWN_MENU
0032   1F06           00137         BTFSS   ENTER
0033   2???           00138         GOTO    ENTER_MENU
0034   1F86           00139         BTFSS   EXIT
0035   2???           00140         GOTO    EXIT_MENU
                      00141         ENDIF
                      00142 ;-----------------------------------------------------------------                                      
                                                                    
Message[305]: Using default destination of 1 (file).
0036   0B??           00143         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата             
                                                            
0037   2???           00144         GOTO    LOOP_MENU                                       ; Цикл ожидания нажатия в главном меню  
Message[305]: Using default destination of 1 (file).
0038   0B??           00145         DECFSZ  TEMP_2  
0039   2???           00146         GOTO    LOOP_MENU
Message[305]: Using default destination of 1 (file).
003A   0B??           00147         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
003B   2???           00148         GOTO    LOOP_MENU
003C   2???           00149         GOTO    ZASTAVKA                                        ; Вышел таймаут нахождения в меню, выход
                            им в заставку   
                      00150 ;-----------------------------------------------------------------
003D                  00151 CURSOR_UP_MENU                                                  ; Была нажата клавиша "Вверх"
                      00152         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00153         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00154         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00155         ENDIF
                      00156 
Message[305]: Using default destination of 1 (file).
003D   03??           00157         DECF    INDEX_MENU                                      ; Берем предыдущий пункт меню
003E   1F80           00158         BTFSS   INDEX_MENU,.7                           ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
003F   2???           00159         GOTO    DRAW_MENU
0040   3004           00160         MOVLW   NUM_OF_MAIN_MENU_PUNKTS-1       ; Стало "<0", сделаем текущим последний пункт меню. Учит
                            ываем, что индекс пункта меню на 1 меньше его порядкового номера
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0041   00??           00161         MOVWF   INDEX_MENU
0042   2???           00162         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00163 ;-----------------------------------------------------------------
0043                  00164 CURSOR_DOWN_MENU                                                ; Была нажата клавиша "Вниз"
                      00165         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00166         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00167         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00168         ENDIF
                      00169 
Message[305]: Using default destination of 1 (file).
0043   0A??           00170         INCF    INDEX_MENU                                      ; Берем следущий пункт меню
0044   08??           00171         MOVFW   INDEX_MENU
0045   3C05           00172         SUBLW   NUM_OF_MAIN_MENU_PUNKTS         ; Достигли последнего ?
0046   1903           00173         BTFSC   STATUS,Z
0047   01??           00174         CLRF    INDEX_MENU                                      ; Если да, делаем текущим первый пункт м
                            еню     
0048   2???           00175         GOTO    DRAW_MENU                                       ; Отрисовываем новый текущий пункт меню
                      00176 ;-----------------------------------------------------------------
0049                  00177 EXIT_MENU                                                               ; Была нажата клавиша "Выход"
0049   2???           00178         CALL    DEBOUNCE_DELAY  
004A   2???           00179         GOTO    ZASTAVKA                                        ; Выходим в заставку
                      00180 ;===================================================================================================
004B                  00181 ENTER_MENU                                                              ; Была нажата клавиша "Вход", ос
                            уществлям вход в меню и отрисовку подпунктов
                      00182 ;===================================================================================================
                      00183         IF      USE_MENU_ACTION         
004B   0A??           00184         INCF    INDEX_MENU,W                            ; Берем текущий пункт меню (учитываем, что нумер
                            ация начинается с 0)
004C   00??           00185         MOVWF   TEMP_1                                          ; Заносим в счетчик
004D   3001           00186         MOVLW   ACTIONS_MENU_FLAGS                      ; Берем флаги действий пунктов меню
004E   00??           00187         MOVWF   TEMP_2                                          ; И заносим в переменную
004F                  00188 LOOP_1
Message[305]: Using default destination of 1 (file).
004F   0B??           00189         DECFSZ  TEMP_1
0050   2???           00190         GOTO    ROTATE_ACTION_MENU_FLAGS
0051   1803 2???      00191         BC              MENU_ACTION                                     ; Флаг действия текущего пункта 
                            меню выдавлен в бит переноса, анализируем его
0053   2???           00192         GOTO    END_MENU_ACTION
0054                  00193 ROTATE_ACTION_MENU_FLAGS
Message[305]: Using default destination of 1 (file).
0054   0C??           00194         RRF             TEMP_2                                          ; Перебор флагов действий всех п
                            унктов меню
0055   2???           00195         GOTO    LOOP_1  
0056                  00196 END_MENU_ACTION
                      00197         ENDIF
                      00198 
0056   2???           00199         CALL    NUM_OF_SUBMENU_TABLE            ; Получаем количество подпунктов в этом пункте меню
0057   00??           00200         MOVWF   NUM_OF_SUBMENU                          ; 1 раз занесем в перемунную, чтобы каждый раз н
                            е вызывать эту процедуру        
0058   3C00           00201         SUBLW   .0                                                      ; Сравним с 0
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00202 ;       movf    num_of_submenu,f                        ; А можно сравнить с 0 и так: копируем переменну
                            ю саму в себя, и если она = 0, установится флаг Z
0059   1903 2???      00203         BZ              DRAW_MENU                                       ; Если 0, сразу на выход без про
                            рисовки подпунктов
005B   01??           00204         CLRF    INDEX_SUBMENU                           ; Очистим индекс пункта подменю 
                      00205 
                      00206         IF      USE_MOVING_CURSOR & SAVE_CURSOR_POSITION
                      00207         MOVFW   BUTTONS
                      00208         MOVWF   SAVE_POSITION                           ; Сохраним позицию курсора
                      00209         ENDIF
                      00210 
                      00211         IF      USE_MOVING_CURSOR & !USE_TOP_LAST_CURSOR
                      00212         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00213         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00214         ENDIF
                      00215 ;===================================================================================================
005C                  00216 DRAW_SUBMENU                                                    ; Рисуем подпункты меню
                      00217 ;===================================================================================================
                      00218         IF      USE_MOVING_CURSOR & USE_TOP_LAST_CURSOR
                      00219         MOVFW   INDEX_SUBMENU
                      00220         BNZ             CHECK_2         
                      00221         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
                      00222         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00223         GOTO    SKIP_CHECK_2
                      00224 CHECK_2
                      00225         DECF    NUM_OF_SUBMENU,W                        ; Получаем количество подпунктов в этом меню, уч
                            итываем, что индекс подпункта начинается с 0
                      00226         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
                      00227         BNZ             SKIP_CHECK_2
                      00228         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
                      00229         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00230 SKIP_CHECK_2
                      00231         ENDIF
                      00232 
005C   2???           00233         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей перед самой перерисовкой подпу
                            нктов меню, чтобы уменьшить моргание
                      00234 
                      00235         IF      USE_MOVING_CURSOR
                      00236         BTFSS   PRESS_UP
                      00237         GOTO    PRESSING_DOWN_2                 
                      00238         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий подпункт меню  
                      00239         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
                      00240         SUBLW   .1                                                      ; Сравним с 1
                      00241         BZ              SKIP_CORRECT_INDEX_SUBMENU_3; Если 1, пропускаем прорисовку 2-й строки
                      00242         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисум курсор в конце 1-й строчки
                      00243         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00244         INCF    INDEX_SUBMENU                           ; Берем следующий пункт
                      00245         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
                      00246         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00247         BZ              CORRECT_INDEX_SUBMENU
                      00248         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
                      00249         DECF    INDEX_SUBMENU                           ; Не забудем вернуть назад текущий пункт меню   
                      00250         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
                      00251 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
                      00252         CLRF    INDEX_SUBMENU
                      00253         CALL    DRAW_SUBMENU_ROUTINE
                      00254         DECF    NUM_OF_SUBMENU,W
                      00255         MOVWF   INDEX_SUBMENU
                      00256         GOTO    SKIP_CORRECT_INDEX_SUBMENU_3
                      00257 PRESSING_DOWN_2
                      00258         DECF    INDEX_SUBMENU                           ; Берем предыдущий пункт меню
                      00259         BTFSC   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов меню ограничено 64
                      00260         GOTO    CORRECT_INDEX_SUBMENU_2
                      00261         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
                      00262         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00263         INCF    INDEX_SUBMENU                           ; Вернем текущий пункт                          
                                    
                      00264         GOTO    SKIP_CORRECT_INDEX_SUBMENU_2
                      00265 CORRECT_INDEX_SUBMENU_2
                      00266         DECF    NUM_OF_SUBMENU,W
                      00267         MOVWF   INDEX_SUBMENU
                      00268         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем предыдущий пункт меню
                      00269         CALL    SECOND_STRING_ROUTINE           ; Указатель на 2 строку
                      00270         CLRF    INDEX_SUBMENU
                      00271 SKIP_CORRECT_INDEX_SUBMENU_2
                      00272         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем текущий пункт меню под предыдущим 
                      00273         DRAW_CURSOR     LAST_SYMBOL_SECOND_LINE ; Нарисум курсор в конце 2-й строчки
                      00274 SKIP_CORRECT_INDEX_SUBMENU_3
                      00275 
                      00276         ELSE
005D   2???           00277         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем ТЕКУЩИЙ подпункт меню  
005E   08??           00278         MOVFW   NUM_OF_SUBMENU                          ; Получаем количество подпунктов в этом меню
005F   3C01           00279         SUBLW   .1
0060   1903 2???      00280         BZ              SKIP_CORRECT_INDEX_SUBMENU      ; Если 1, пропускаем прорисовку 2-й строки
0062   2???           00281         CALL    SECOND_STRING_ROUTINE           ; Иначе указатель на 2 строку
Message[305]: Using default destination of 1 (file).
0063   0A??           00282         INCF    INDEX_SUBMENU                           ; Индекс СЛЕДУЮЩЕГО пункта
0064   08??           00283         MOVFW   NUM_OF_SUBMENU                  
0065   02??           00284         SUBWF   INDEX_SUBMENU,W                         ; Сравниваем с количеством подпунктов меню
0066   1903 2???      00285         BZ              CORRECT_INDEX_SUBMENU
0068   2???           00286         CALL    DRAW_SUBMENU_ROUTINE            ; Рисуем подпункт меню под текущим 
Message[305]: Using default destination of 1 (file).
0069   03??           00287         DECF    INDEX_SUBMENU                           ; Вернем назад индекс подпункта
006A   2???           00288         GOTO    SKIP_CORRECT_INDEX_SUBMENU      
006B                  00289 CORRECT_INDEX_SUBMENU                                   ; Достигли последнего подпункта меню, следующим 
                            отображаем 1 подпункт
006B   01??           00290         CLRF    INDEX_SUBMENU   
006C   2???           00291         CALL    DRAW_SUBMENU_ROUTINE
006D   03??           00292         DECF    NUM_OF_SUBMENU,W                        ; Если меньше <0
006E   00??           00293         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

006F                  00294 SKIP_CORRECT_INDEX_SUBMENU
                      00295         ENDIF
                      00296 
006F   2???           00297         CALL    DEBOUNCE_DELAY                          ; Процедура антидребезга, вызывается при первом 
                            входе в подпункт меню, при нажатии кнопок "Вверх", "Вниз", выходе из действия подпункта меню
0070   3014           00298         MOVLW   EXIT_DELAY                                      ; Заносим счетчик проходов опроса клавиш
0071   00??           00299         MOVWF   MENU_COUNTER
0072   01??           00300         CLRF    TEMP_1
0073   01??           00301         CLRF    TEMP_2
0074                  00302 LOOP_SUBMENU                                                    ; Мы зашли в пункт меню, ждем нажатия сл
                            едующей кнопки
                      00303         IF      USE_RBIE
                      00304         BTFSC   PRESS_UP
                      00305         GOTO    CURSOR_UP_SUBMENU                               
                      00306         BTFSC   PRESS_DOWN
                      00307         GOTO    CURSOR_DOWN_SUBMENU
                      00308         BTFSC   PRESS_ENTER
                      00309         GOTO    ENTER_SUBMENU
                      00310         BTFSC   PRESS_EXIT
                      00311         GOTO    EXIT_SUBMENU
                      00312 
                      00313         ELSE
0074   1E06           00314         BTFSS   UP
0075   2???           00315         GOTO    CURSOR_UP_SUBMENU                               
0076   1E86           00316         BTFSS   DOWN
0077   2???           00317         GOTO    CURSOR_DOWN_SUBMENU
0078   1F06           00318         BTFSS   ENTER
0079   2???           00319         GOTO    ENTER_SUBMENU
007A   1F86           00320         BTFSS   EXIT
007B   2???           00321         GOTO    EXIT_SUBMENU
                      00322         ENDIF
                      00323 ;-----------------------------------------------------------------
Message[305]: Using default destination of 1 (file).
007C   0B??           00324         DECFSZ  TEMP_1                                          ; Ни одна клавиша не нажата     
007D   2???           00325         GOTO    LOOP_SUBMENU                            ; Цикл ожидания нажатия в пункте меню
Message[305]: Using default destination of 1 (file).
007E   0B??           00326         DECFSZ  TEMP_2  
007F   2???           00327         GOTO    LOOP_SUBMENU
Message[305]: Using default destination of 1 (file).
0080   0B??           00328         DECFSZ  MENU_COUNTER                            ; Декремент счетчика проходов опроса клавиш     
                                    
0081   2???           00329         GOTO    LOOP_SUBMENU
0082   2???           00330         GOTO    DRAW_MENU                                       ; Вышел таймаут нахождения в подменю, вы
                            ходим в меню
                      00331 ;-----------------------------------------------------------------
0083                  00332 CURSOR_UP_SUBMENU                                               ; Была нажата клавиша "Вверх"
                      00333         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00334         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00335         BSF             PRESS_UP                                        ; И установим признак нажатия то
                            лько для кнопки "ВВЕРХ"
                      00336         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00337 
Message[305]: Using default destination of 1 (file).
0083   03??           00338         DECF    INDEX_SUBMENU                           ; Уменьшаем индекс подменю
0084   1F80           00339         BTFSS   INDEX_SUBMENU,.7                        ; Проверяем на "<0"     простой проверкой 7 бита
                            , максимальное количество пунктов подменю ограничено 64
0085   2???           00340         GOTO    DRAW_SUBMENU            
0086   03??           00341         DECF    NUM_OF_SUBMENU,W                        ; Если меньше <0
0087   00??           00342         MOVWF   INDEX_SUBMENU                           ; Сделаем текущим последний пункт подменю
0088   2???           00343         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню      
                      00344 ;-----------------------------------------------------------------
0089                  00345 CURSOR_DOWN_SUBMENU                                             ; Была нажата клавиша "Вниз"
                      00346         IF      USE_MOVING_CURSOR & !USE_RBIE   ; При использовании прерываний этот флаг и так выставляе
                            тся в обработчике
                      00347         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок          
                                                    
                      00348         BSF             PRESS_DOWN                                      ; И установим признак нажатия то
                            лько для кнопки "ВНИЗ"
                      00349         ENDIF
                      00350 
Message[305]: Using default destination of 1 (file).
0089   0A??           00351         INCF    INDEX_SUBMENU                           ; Увеличиваем индекс подменю
008A   08??           00352         MOVFW   NUM_OF_SUBMENU                          ; Берем количество пунктов в даном подменю      
008B   02??           00353         SUBWF   INDEX_SUBMENU,W                         ; Достигли последнего ? 
008C   1903           00354         BTFSC   STATUS,Z
008D   01??           00355         CLRF    INDEX_SUBMENU                           ; Если да, делаем текущим первый подпункт меню  
                                    
008E   2???           00356         GOTO    DRAW_SUBMENU                            ; Отрисовываем новый текущий подпункт меню
                      00357 ;-----------------------------------------------------------------      
008F                  00358 EXIT_SUBMENU                                                    ; Была нажата клавиша "Выход"
                      00359         IF USE_MOVING_CURSOR & SAVE_CURSOR_POSITION
                      00360         MOVFW   SAVE_POSITION
                      00361         MOVWF   BUTTONS                                         ; Восстановим позицию курсора
                      00362         ENDIF
                      00363 
008F   01??           00364         CLRF    INDEX_SUBMENU                           ; Обнуляем индекс пункта подменю, чтобы при след
                            ующем заходе в любой пункт меню курсор находился на 1 пункте подменю
0090   2???           00365         GOTO    DRAW_MENU                                       ; Выходим в меню
                      00366 ;===================================================================================================
0091                  00367 ENTER_SUBMENU                                                   ; Была нажата клавиша "Вход", осуществля
                            м вход в подпункт меню и выполняем его действие
                      00368 ;===================================================================================================
0091   2???           00369         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
0092   2???           00370         GOTO    SWITCH_ACTION                           ; Делаем действие текущего подпункта меню
0093                  00371 END_ACTION
                      00372 ;-----------------------------------------------------------------
                      00373         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE   ; Рисуем подтверждение действия
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
0093   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
0094                      M                                         PRINT_LCD_STRING
0094   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
0095   39FF               M                                                 ANDLW   0FFH
0096   1903               M                                                 BTFSC   STATUS,Z
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0097   2???               M                                                 GOTO    END_LCD_STRING          
0098   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
0099   0A??               M                                                 INCF    SYMBOL_POINTER  
009A   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
009B                      M                                         END_LCD_STRING  
009B   01??           00374         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
009C   2???           00375         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
009D   0B??           00376         DECFSZ  TEMP_3
009E   2???           00377         GOTO    $-2
                      00378 ;-----------------------------------------------------------------
009F   2???           00379         GOTO    DRAW_SUBMENU                            ; И идем отрисовывать подпункт меню, курсор на т
                            ом же подпункте, что и был
                      00380 ;===================================================================================================
00A0                  00381 DEBOUNCE_DELAY                                                  ; Подпрограмма антидребезговой задержки
00A0   3003           00382         MOVLW   .3                                                      ; Количество проходов подбираетс
                            я экспериментальным путем
00A1   00??           00383         MOVWF   TEMP_2
00A2   01??           00384         CLRF    TEMP_1
00A3                  00385 LOOP_DELAY
00A3   0806           00386         MOVFW   PORTB                                           
00A4   380F           00387         IORLW   B'00001111'                                     ; Установим незначущие разряды
00A5   3E01           00388         ADDLW   .1
00A6   1D03 2???      00389         BNZ             DEBOUNCE_DELAY                          ; Если хоть одна кнопка нажата, начинаем
                             отсчет антидребезговой задержки заново
Message[305]: Using default destination of 1 (file).
00A8   0B??           00390         DECFSZ  TEMP_1  
00A9   2???           00391         GOTO    $-1
Message[305]: Using default destination of 1 (file).
00AA   0B??           00392         DECFSZ  TEMP_2  
00AB   2???           00393         GOTO    LOOP_DELAY
                      00394 
                      00395         IF      USE_RBIE
                      00396         CLRF    BUTTONS                                         ; Очистим флаги нажатых кнопок
                      00397         BCF             INTCON,RBIF                                     ; Сбросим флаг возможно вызваног
                            о прерывания от кнопок
                      00398         BSF             INTCON,RBIE                                     ; И разрешим прерывания от кнопо
                            к
                      00399         ENDIF
                      00400 
00AC   0008           00401         RETURN
                      00402 ;===================================================================================================
00AD                  00403 DRAW_MENU_ROUTINE                                               ; Подпрограмма отрисовки одного пункта м
                            еню
00AD   01??           00404         CLRF    SYMBOL_POINTER
00AE                  00405 LOOP_DRAW_MENU
00AE   2???           00406         CALL    MENU_TABLE
00AF   39FF           00407         ANDLW   0FFH
00B0   1903           00408         BTFSC   STATUS,Z
00B1   0008           00409         RETURN 
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B2   2???           00410         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00B3   0A??           00411         INCF    SYMBOL_POINTER  
00B4   2???           00412         GOTO    LOOP_DRAW_MENU
                      00413 ;-------------------------------------------------------------------------------------------------------
                            ---------------------
00B5                  00414 DRAW_SUBMENU_ROUTINE                                    ; Подпрограмма отрисовки одного подпункта меню
00B5   01??           00415         CLRF    SYMBOL_POINTER
00B6                  00416 LOOP_DRAW_SUBMENU
00B6   2???           00417         CALL    SUBMENU_TABLE
00B7   39FF           00418         ANDLW   0FFH
00B8   1903           00419         BTFSC   STATUS,Z
00B9   0008           00420         RETURN 
00BA   2???           00421         CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00BB   0A??           00422         INCF    SYMBOL_POINTER  
00BC   2???           00423         GOTO    LOOP_DRAW_SUBMENU
                      00424 ;===================================================================================================
00BD                  00425 ZASTAVKA
00BD   2???           00426         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00427         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_FIRST_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
00BE   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
00BF                      M                                         PRINT_LCD_STRING
00BF   2???               M                                                 CALL    TABLE_ZASTAVKA_FIRST_STRING
00C0   39FF               M                                                 ANDLW   0FFH
00C1   1903               M                                                 BTFSC   STATUS,Z
00C2   2???               M                                                 GOTO    END_LCD_STRING          
00C3   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00C4   0A??               M                                                 INCF    SYMBOL_POINTER  
00C5   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
00C6                      M                                         END_LCD_STRING  
                      00428         SECOND_LINE_MACRO
00C6   30C0               M                                         MOVLW   SECOND_LINE     
00C7   2???               M                                         CALL    SEND_LCD_COMMAND
                      00429         PRINT_LCD_STRING_MACRO  TABLE_ZASTAVKA_SECOND_STRING
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
00C8   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
00C9                      M                                         PRINT_LCD_STRING
00C9   2???               M                                                 CALL    TABLE_ZASTAVKA_SECOND_STRING
00CA   39FF               M                                                 ANDLW   0FFH
00CB   1903               M                                                 BTFSC   STATUS,Z
00CC   2???               M                                                 GOTO    END_LCD_STRING          
00CD   2???               M                                                 CALL    SEND_LCD_SYMBOL
Message[305]: Using default destination of 1 (file).
00CE   0A??               M                                                 INCF    SYMBOL_POINTER  
00CF   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
00D0                      M                                         END_LCD_STRING  
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D0   2???           00430         GOTO    MAIN
                      00431 ;===================================================================================================
00D1                  00432 SECOND_STRING_ROUTINE                                   ; Подпрограмма перевода указателя на 2-ю строку 
                      00433         IF      USE_STATIC_CURSOR
                      00434         DRAW_CURSOR     LAST_SYMBOL_FIRST_LINE  ; Нарисуем курсор на последнем символе 1-й строки
00D1   308F               M                         MOVLW   LAST_SYMBOL_FIRST_LINE
00D2   2???               M                         CALL    DRAW_CURSOR_ROUTINE
                      00435         ENDIF
                      00436         SECOND_LINE_MACRO                                       ; Переводим указатель на 2-ю строку     
00D3   30C0               M                                         MOVLW   SECOND_LINE     
00D4   2???               M                                         CALL    SEND_LCD_COMMAND
00D5   0008           00437         RETURN                                                          ; И приступаем к отрисовке следу
                            ющего пункта меню
                      00438 ;===================================================================================================
00D6                  00439 DRAW_CURSOR_ROUTINE                                             ; Процедура рисования курсора. В w лежит
                             адрес
00D6   2???           00440         CALL    SEND_LCD_COMMAND
00D7   303C           00441         MOVLW   '<'                                                     ; Нарисуем там курсор
00D8   2???           00442         CALL    SEND_LCD_SYMBOL
00D9   0008           00443         RETURN
                      00444 ;===================================================================================================
00DA                  00445 TABLE_ZASTAVKA_FIRST_STRING
                      00446         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
00DA   08??               M                 MOVFW   SYMBOL_POINTER
00DB   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00DC   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00DD   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
00DE   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00DF   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00E0   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00E1   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
00E2                      M         TABLE
00E2   3420 3420 344D 00447         DT              ZASTAVKA_FIRST_STRING,0
       3469 3463 3472 
       346F 344D 3465 
       346E 3475 344C 
       3469 3462 3400 
00F1                  00448 TABLE_ZASTAVKA_SECOND_STRING 
                      00449         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
00F1   08??               M                 MOVFW   SYMBOL_POINTER
00F2   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
00F3   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
00F4   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F5   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
00F6   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
00F7   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
00F8   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
00F9                      M         TABLE
00F9   3420 3420 3476 00450         DT              ZASTAVKA_SECOND_STRING,0
       3465 3472 3420 
       3431 342E 3430 
       3420 3462 3465 
       3474 3461 3400 
                      00451 ;===================================================================================================
0108                  00452 NUM_OF_SUBMENU_TABLE                                    
                      00453         RETLW_NUM_OF_SUBMENU_PUNKTS                     ; Макрос, возвращает количество подпунктов текущ
                            его пункта меню
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0108   08??               M                 MOVFW   INDEX_MENU
0109   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
010A   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
010B   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
010C   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
010D   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
010E   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
010F   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0110                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
0110   3400               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
0111   3401               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
0112   3402               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
0113   3403               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
0114   3404               M                                         RETLW   NUM_OF_SUBMENU_PUNKTS_5
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00454 ;===================================================================================================
0115                  00455 MENU_TABLE
                      00456         GOTO_PUNKT_MENU                                         ; Макрос, создает переходы на все пункты
                             меню                                                   
                          M                                 MOD_PCL INDEX_MENU
  0000                    M                 LOCAL   TABLE
0115   08??               M                 MOVFW   INDEX_MENU
0116   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0117   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0118   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0119   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
011A   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
011B   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
011C   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
011D                      M         TABLE
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
011D   2???               M                                         GOTO    MENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
011E   2???               M                                         GOTO    MENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
011F   2???               M                                         GOTO    MENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
0120   2???               M                                         GOTO    MENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
0121   2???               M                                         GOTO    MENU_5
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00457 ;---------------------------------------------------------------------------------------------------
0122                  00458 SUBMENU_TABLE
                      00459         GOTO_PUNKT_SUBMENU                                      ; Макрос, создает переходы на все подпун
                            кты меню
                          M                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
0122   08??               M                 MOVFW   INDEX_MENU
0123   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0124   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0125   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0126   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0127   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0128   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0129   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
012A                      M         TABLE
  0001                    M                                         LOCAL   C=1
                          M                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
012A   2???               M                                                 GOTO    MENU_1_TABLE
Warning[207]: Found label after column 1. (C)
  00000002                M                                                 C+=1
012B   2???               M                                                 GOTO    MENU_2_TABLE
Warning[207]: Found label after column 1. (C)
  00000003                M                                                 C+=1
012C   2???               M                                                 GOTO    MENU_3_TABLE
Warning[207]: Found label after column 1. (C)
  00000004                M                                                 C+=1
012D   2???               M                                                 GOTO    MENU_4_TABLE
Warning[207]: Found label after column 1. (C)
  00000005                M                                                 C+=1
012E   2???               M                                                 GOTO    MENU_5_TABLE
Warning[207]: Found label after column 1. (C)
  00000006                M                                                 C+=1
                          M                                         ENDW
  0001                    M                                         LOCAL   D=1
  0000                    M                                         LOCAL   A
                          M                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE)
012F                      M                                                 MENU_1_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
012F   08??               M                 MOVFW   INDEX_SUBMENU
0130   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0131   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0132   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0133   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0134   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0135   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0136   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (TABLE)
0137                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                          M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE)
0137                      M                                                 MENU_2_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0137   08??               M                 MOVFW   INDEX_SUBMENU
0138   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0139   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
013A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
013B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
013C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
013D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
013E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
013F                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
013F   2???               M                                                         GOTO    MENU_2_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE)
0140                      M                                                 MENU_3_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0140   08??               M                 MOVFW   INDEX_SUBMENU
0141   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0142   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0143   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0144   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         ENDIF
0145   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0146   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0147   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0148                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
0148   2???               M                                                         GOTO    MENU_3_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
0149   2???               M                                                         GOTO    MENU_3_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE)
014A                      M                                                 MENU_4_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
014A   08??               M                 MOVFW   INDEX_SUBMENU
014B   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
014C   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
014D   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
014E   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
014F   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0150   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0151   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0152                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
0152   2???               M                                                         GOTO    MENU_4_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
0153   2???               M                                                         GOTO    MENU_4_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
0154   2???               M                                                         GOTO    MENU_4_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                 A=1     
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (MENU_5_TABLE)
0155                      M                                                 MENU_5_TABLE
                          M                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0155   08??               M                 MOVFW   INDEX_SUBMENU
0156   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0157   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0158   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0159   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
015A   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
015B   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
015C   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
015D                      M         TABLE
                          M                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
015D   2???               M                                                         GOTO    MENU_5_SUBMENU_1
Warning[207]: Found label after column 1. (A)
  00000002                M                                                         A+=1
015E   2???               M                                                         GOTO    MENU_5_SUBMENU_2
Warning[207]: Found label after column 1. (A)
  00000003                M                                                         A+=1
015F   2???               M                                                         GOTO    MENU_5_SUBMENU_3
Warning[207]: Found label after column 1. (A)
  00000004                M                                                         A+=1
0160   2???               M                                                         GOTO    MENU_5_SUBMENU_4
Warning[207]: Found label after column 1. (A)
  00000005                M                                                         A+=1
                          M                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                 D+=1
                          M                                         ENDW    
                      00460 ;---------------------------------------------------------------------------------------------------
0161                  00461 SWITCH_ACTION                                                   ; Выполним действие, на котором находитс
                            я курсор 
                      00462         GOTO_PUNKT_SUBMENU_ACTION                       ; Макрос, создает переходы на действия всех подп
                            унктов меню
                          M                                                         MOD_PCL INDEX_MENU                              
  0000                    M                 LOCAL   TABLE
0161   08??               M                 MOVFW   INDEX_MENU
0162   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0163   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0164   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0165   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0166   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0167   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0168   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0169                      M         TABLE
  0001                    M                                                         LOCAL   C=1
                          M                                                         WHILE   C<NUM_OF_MAIN_MENU_PUNKTS+1
0169   2???               M                                                                 GOTO    MENU_1_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000002                M                                                                 C+=1
016A   2???               M                                                                 GOTO    MENU_2_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000003                M                                                                 C+=1
016B   2???               M                                                                 GOTO    MENU_3_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000004                M                                                                 C+=1
016C   2???               M                                                                 GOTO    MENU_4_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000005                M                                                                 C+=1
016D   2???               M                                                                 GOTO    MENU_5_TABLE_ACTION
Warning[207]: Found label after column 1. (C)
  00000006                M                                                                 C+=1
                          M                                                         ENDW
  0001                    M                                                         LOCAL   D=1
  0000                    M                                                         LOCAL   A
                          M                                                         WHILE           D<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_1_TABLE_ACTION)
016E                      M                                                                 MENU_1_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
016E   08??               M                 MOVFW   INDEX_SUBMENU
016F   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0170   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0171   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0172   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0173   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0174   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0175   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0176                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                                                         GOTO    MENU_#V(D)_SUBMENU_#V(A)
                            _ACTION
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_2_TABLE_ACTION)
0176                      M                                                                 MENU_2_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0176   08??               M                 MOVFW   INDEX_SUBMENU
0177   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0178   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0179   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
017A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
017B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
017C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
017D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
017E                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
017E   2???               M                                                                         GOTO    MENU_2_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_3_TABLE_ACTION)
017F                      M                                                                 MENU_3_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
017F   08??               M                 MOVFW   INDEX_SUBMENU
0180   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0181   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0182   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0183   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0184   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0185   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0186   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (TABLE)
0187                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
0187   2???               M                                                                         GOTO    MENU_3_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
0188   2???               M                                                                         GOTO    MENU_3_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_4_TABLE_ACTION)
0189                      M                                                                 MENU_4_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
0189   08??               M                 MOVFW   INDEX_SUBMENU
018A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
018B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
018C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
018D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
018E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
018F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0190   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0191                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
0191   2???               M                                                                         GOTO    MENU_4_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
0192   2???               M                                                                         GOTO    MENU_4_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
0193   2???               M                                                                         GOTO    MENU_4_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                                                 D+=1
Warning[207]: Found label after column 1. (A)
  00000001                M                                                                 A=1     
Warning[207]: Found label after column 1. (MENU_5_TABLE_ACTION)
0194                      M                                                                 MENU_5_TABLE_ACTION
                          M                                                                 MOD_PCL INDEX_SUBMENU
  0000                    M                 LOCAL   TABLE
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0194   08??               M                 MOVFW   INDEX_SUBMENU
0195   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0196   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0197   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0198   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0199   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
019A   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
019B   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
019C                      M         TABLE
                          M                                                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
019C   2???               M                                                                         GOTO    MENU_5_SUBMENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                                                         A+=1
019D   2???               M                                                                         GOTO    MENU_5_SUBMENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                                                         A+=1
019E   2???               M                                                                         GOTO    MENU_5_SUBMENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                                                         A+=1
019F   2???               M                                                                         GOTO    MENU_5_SUBMENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                                                         A+=1
                          M                                                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                                                 D+=1
                          M                                                         ENDW
                      00463 ;===================================================================================================
                      00464         CREATE_MENU_NAMES                                       ; Макрос, создает имена всех пунктов мен
                            ю
  0001                    M                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
Warning[207]: Found label after column 1. (MENU_1)
01A0                      M                                 MENU_1
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01A0   08??               M                 MOVFW   SYMBOL_POINTER
01A1   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01A2   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01A3   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01A4   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A5   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01A6   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01A7   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01A8                      M         TABLE
01A8   3431 342E 344D     M                                         DT              MENU_NAME_1,0
       3465 346E 3475 
       345F 3431 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_2)
01B1                      M                                 MENU_2
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01B1   08??               M                 MOVFW   SYMBOL_POINTER
01B2   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01B3   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01B4   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01B5   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01B6   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01B7   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01B8   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01B9                      M         TABLE
01B9   3432 342E 344D     M                                         DT              MENU_NAME_2,0
       3465 346E 3475 
       345F 3432 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_3)
01C2                      M                                 MENU_3
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01C2   08??               M                 MOVFW   SYMBOL_POINTER
01C3   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01C4   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01C5   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01C6   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01C7   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01C8   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01C9   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (TABLE)
01CA                      M         TABLE
01CA   3433 342E 344D     M                                         DT              MENU_NAME_3,0
       3465 346E 3475 
       345F 3433 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4)
01D3                      M                                 MENU_4
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01D3   08??               M                 MOVFW   SYMBOL_POINTER
01D4   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01D5   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01D6   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01D7   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01D8   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01D9   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01DA   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01DB                      M         TABLE
01DB   3434 342E 344D     M                                         DT              MENU_NAME_4,0
       3465 346E 3475 
       345F 3434 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5)
01E4                      M                                 MENU_5
                          M                                         MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01E4   08??               M                 MOVFW   SYMBOL_POINTER
01E5   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01E6   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01E7   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01E8   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01E9   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01EA   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01EB   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01EC                      M         TABLE
01EC   3435 342E 344D     M                                         DT              MENU_NAME_5,0
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3465 346E 3475 
       345F 3435 3400 
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00465 ;===================================================================================================
                      00466         CREATE_SUBMENU_NAMES                            ; Макрос, создает имена всех подпунктов меню
  0001                    M                                 LOCAL   D=1
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 1 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_1+1
                          M                                         MENU_#V(D)_SUBMENU_#V(A)
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_1_#V(A),0
                          M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000002                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 2 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_2+1
Warning[207]: Found label after column 1. (MENU_2_SUBMENU_1)
01F5                      M                                         MENU_2_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
01F5   08??               M                 MOVFW   SYMBOL_POINTER
01F6   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
01F7   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
01F8   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
01F9   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
01FA   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
01FB   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
01FC   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
01FD                      M         TABLE
01FD   3432 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_2_1,0
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000003                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 3 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_3+1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_1)
0206                      M                                         MENU_3_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0206   08??               M                 MOVFW   SYMBOL_POINTER
0207   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0208   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0209   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
020A   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
020B   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
020C   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
020D   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
020E                      M         TABLE
020E   3433 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_3_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_3_SUBMENU_2)
0217                      M                                         MENU_3_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0217   08??               M                 MOVFW   SYMBOL_POINTER
0218   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0219   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
021A   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
021B   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
021C   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
021D   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
021E   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
021F                      M         TABLE
021F   3433 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_3_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000004                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 4 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_4+1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_1)
0228                      M                                         MENU_4_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
0228   08??               M                 MOVFW   SYMBOL_POINTER
0229   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
022A   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
022B   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
022C   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
022D   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
022E   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
022F   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0230                      M         TABLE
0230   3434 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_4_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_2)
0239                      M                                         MENU_4_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                    M                 LOCAL   TABLE
0239   08??               M                 MOVFW   SYMBOL_POINTER
023A   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
023B   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
023C   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
023D   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
023E   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
023F   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0240   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0241                      M         TABLE
0241   3434 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_4_2,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_4_SUBMENU_3)
024A                      M                                         MENU_4_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
024A   08??               M                 MOVFW   SYMBOL_POINTER
024B   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
024C   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
024D   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
024E   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
024F   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0250   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0251   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0252                      M         TABLE
0252   3434 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_4_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000005                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ; Подпункты 5 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
  0001                    M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_5+1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_1)
025B                      M                                         MENU_5_SUBMENU_1
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
025B   08??               M                 MOVFW   SYMBOL_POINTER
025C   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
025D   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
025E   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
025F   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0260   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0261   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0262   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0263                      M         TABLE
0263   3435 342E 3431     M                                                 DT              MENU_SUBMENU_NAME_5_1,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_2)
026C                      M                                         MENU_5_SUBMENU_2
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
026C   08??               M                 MOVFW   SYMBOL_POINTER
026D   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
026E   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
026F   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0270   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0271   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0272   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0273   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0274                      M         TABLE
0274   3435 342E 3432     M                                                 DT              MENU_SUBMENU_NAME_5_2,0
       342E 3453 3475 
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_3)
027D                      M                                         MENU_5_SUBMENU_3
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
027D   08??               M                 MOVFW   SYMBOL_POINTER
027E   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
027F   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0280   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0281   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0282   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0283   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0284   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0285                      M         TABLE
0285   3435 342E 3433     M                                                 DT              MENU_SUBMENU_NAME_5_3,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
Warning[207]: Found label after column 1. (MENU_5_SUBMENU_4)
028E                      M                                         MENU_5_SUBMENU_4
                          M                                                 MOD_PCL SYMBOL_POINTER
  0000                    M                 LOCAL   TABLE
028E   08??               M                 MOVFW   SYMBOL_POINTER
028F   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
0290   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
0291   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
0292   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
0293   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
0294   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
0295   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
0296                      M         TABLE
0296   3435 342E 3434     M                                                 DT              MENU_SUBMENU_NAME_5_4,0
       342E 3453 3475 
       3462 346D 3400 
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M                                 ENDW
Warning[207]: Found label after column 1. (D)
  00000006                M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 6 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_6_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 7 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_7_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M ; Подпункты 8 пункта меню
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                          M                                 IF              D<NUM_OF_MAIN_MENU_PUNKTS+1
                          M                                 LOCAL   A=1     
                          M                                 WHILE   A<NUM_OF_SUBMENU_PUNKTS_6+1
                          M                                         MENU_6_SUBMENU_5
                          M                                                 MOD_PCL SYMBOL_POINTER
                          M                                                 DT              MENU_SUBMENU_NAME_8_5,0
                          M                                         A+=1
                          M                                 ENDW
                          M                                         D+=1
                          M                                 ENDIF
                          M ;-------------------------------------------------------------------------------------------------------
                            ----
                      00467 ;===================================================================================================
                      00468         INCLUDE MENU_ACTIONS.ASM
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (IF)
                      00001 IF      USE_MENU_ACTION
029F                  00002 MENU_ACTION
                      00003         GOTO_MENU_ACTION
                          M                                         MOD_PCL INDEX_MENU                      
  0000                    M                 LOCAL   TABLE
029F   08??               M                 MOVFW   INDEX_MENU
02A0   3E??               M                 ADDLW   LOW TABLE               ; Добавить 8 младших бит адреса таблицы к смещению
02A1   00??               M                 MOVWF   OFFSET                  ; Сохранить младшие 8 бит требуемого адреса
                          M         IF      USE_SHORT_MOD_PCL
02A2   0D??               M                 RLF             KNOWN_ZERO,W    ; так сохраняют бит переполнения от сложения 
02A3   3E??               M                 ADDLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M         ELSE
                          M                 MOVLW   HIGH TABLE              ; Загрузить 5 старших бит адреса
                          M                 BTFSC   STATUS,C                ; Перешли границу страницы памяти программ?
                          M                 ADDLW   1                               ; Если да, увеличить на 1 старшие 5 бит
                          M         ENDIF
02A4   008A               M                 MOVWF   PCLATH                  ; Установить старшую часть адреса
02A5   08??               M                 MOVFW   OFFSET                  ; Загрузить рассчитанное значание младшей части адреса
02A6   0082               M                 MOVWF   PCL                             ; Установить младшую часть адреса
Warning[207]: Found label after column 1. (TABLE)
02A7                      M         TABLE
  0001                    M                                         LOCAL   A=1
                          M                                 WHILE   A<NUM_OF_MAIN_MENU_PUNKTS+1
02A7   2???               M                                         GOTO    MENU_1_ACTION
Warning[207]: Found label after column 1. (A)
  00000002                M                                         A+=1
02A8   2???               M                                         GOTO    MENU_2_ACTION
Warning[207]: Found label after column 1. (A)
  00000003                M                                         A+=1
02A9   2???               M                                         GOTO    MENU_3_ACTION
Warning[207]: Found label after column 1. (A)
  00000004                M                                         A+=1
02AA   2???               M                                         GOTO    MENU_4_ACTION
Warning[207]: Found label after column 1. (A)
  00000005                M                                         A+=1
02AB   2???               M                                         GOTO    MENU_5_ACTION
Warning[207]: Found label after column 1. (A)
  00000006                M                                         A+=1
                          M                                 ENDW
                      00004 ;===================================================================================================
02AC                  00005 MENU_1_ACTION                                                   ; Выполняем действие 1 пункта меню
02AC   2???           00006         CALL    CLR_DISPLAY_ROUTINE                     ; Очистим дисплей
                      00007         PRINT_LCD_STRING_MACRO  TABLE_ACTION_COMPLETE
  0000                    M                                                 LOCAL   PRINT_LCD_STRING,END_LCD_STRING 
02AD   01??               M                                                 CLRF    SYMBOL_POINTER
Warning[207]: Found label after column 1. (PRINT_LCD_STRING)
02AE                      M                                         PRINT_LCD_STRING
02AE   2???               M                                                 CALL    TABLE_ACTION_COMPLETE
02AF   39FF               M                                                 ANDLW   0FFH
02B0   1903               M                                                 BTFSC   STATUS,Z
02B1   2???               M                                                 GOTO    END_LCD_STRING          
02B2   2???               M                                                 CALL    SEND_LCD_SYMBOL
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
02B3   0A??               M                                                 INCF    SYMBOL_POINTER  
02B4   2???               M                                                 GOTO    PRINT_LCD_STRING
Warning[207]: Found label after column 1. (END_LCD_STRING)
02B5                      M                                         END_LCD_STRING  
02B5   01??           00008         CLRF    TEMP_3                                          ; Задержка, чтобы успеть прочесть уведом
                            ление о выполнении действи
02B6   2???           00009         CALL    DEBOUNCE_DELAY
Message[305]: Using default destination of 1 (file).
02B7   0B??           00010         DECFSZ  TEMP_3
02B8   2???           00011         GOTO    $-2
02B9   2???           00012         GOTO    END_MENU_ACTION
02BA                  00013 MENU_2_ACTION                                                   ; Выполняем действие 2 пункта меню
                      00014 ;       nop
02BA   2???           00015         GOTO    END_MENU_ACTION
02BB                  00016 MENU_3_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00017 ;       nop
02BB   2???           00018         GOTO    END_MENU_ACTION
02BC                  00019 MENU_4_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00020 ;       nop
02BC   2???           00021         GOTO    END_MENU_ACTION
02BD                  00022 MENU_5_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00023 ;       nop
02BD   2???           00024         GOTO    END_MENU_ACTION
02BE                  00025 MENU_6_ACTION                                                   ; Выполняем действие 3 пункта меню
                      00026 ;       nop
02BE   2???           00027         GOTO    END_MENU_ACTION
02BF                  00028 MENU_7_ACTION                                                   ; Выполняем действие 4 пункта меню
                      00029 ;       nop
02BF   2???           00030         GOTO    END_MENU_ACTION
02C0                  00031 MENU_8_ACTION                                                   ; Выполняем действие 5 пункта меню
                      00032 ;       nop
02C0   2???           00033         GOTO    END_MENU_ACTION
Warning[205]: Found directive in column 1. (ENDIF)
                      00034 ENDIF
                      00035 ;===================================================================================================
02C1                  00036 MENU_1_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 1 пункта
                      00037 ;       nop
02C1   2???           00038         GOTO    END_ACTION
02C2                  00039 MENU_1_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 1 пункта
                      00040 ;       nop
02C2   2???           00041         GOTO    END_ACTION
02C3                  00042 MENU_1_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 1 пункта
                      00043 ;       nop
02C3   2???           00044         GOTO    END_ACTION
                      00045 ;---------------------------------------------------------------------------------------------------
02C4                  00046 MENU_2_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 2 пункта
                      00047 ;       nop
02C4   2???           00048         GOTO    END_ACTION
02C5                  00049 MENU_2_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 2 пункта
                      00050 ;       nop
02C5   2???           00051         GOTO    END_ACTION
02C6                  00052 MENU_2_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 2 пункта
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00053 ;       nop
02C6   2???           00054         GOTO    END_ACTION
                      00055 ;---------------------------------------------------------------------------------------------------
02C7                  00056 MENU_3_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 3 пункта
                      00057 ;       nop
02C7   2???           00058         GOTO    END_ACTION
02C8                  00059 MENU_3_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 3 пункта
                      00060 ;       nop
02C8   2???           00061         GOTO    END_ACTION
02C9                  00062 MENU_3_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 3 пункта
                      00063 ;       nop
02C9   2???           00064         GOTO    END_ACTION
                      00065 ;---------------------------------------------------------------------------------------------------
02CA                  00066 MENU_4_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 4 пункта
                      00067 ;       nop
02CA   2???           00068         GOTO    END_ACTION
02CB                  00069 MENU_4_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 4 пункта
                      00070 ;       nop
02CB   2???           00071         GOTO    END_ACTION
02CC                  00072 MENU_4_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 4 пункта
                      00073 ;       nop
02CC   2???           00074         GOTO    END_ACTION                                                              
                      00075 ;---------------------------------------------------------------------------------------------------
02CD                  00076 MENU_5_SUBMENU_1_ACTION                                 ; Выполняем действие 1 подпункта 5 пункта
                      00077 ;       nop
02CD   2???           00078         GOTO    END_ACTION
02CE                  00079 MENU_5_SUBMENU_2_ACTION                                 ; Выполняем действие 2 подпункта 5 пункта
                      00080 ;       nop
02CE   2???           00081         GOTO    END_ACTION
02CF                  00082 MENU_5_SUBMENU_3_ACTION                                 ; Выполняем действие 3 подпункта 5 пункта
                      00083 ;       nop
02CF   2???           00084         GOTO    END_ACTION
02D0                  00085 MENU_5_SUBMENU_4_ACTION                                 ; Выполняем действие 4 подпункта 5 пункта
                      00086 ;       nop
02D0   2???           00087         GOTO    END_ACTION
                      00088 ;---------------------------------------------------------------------------------------------------
                      00469 ;===================================================================================================
                      00470         END
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 46


SYMBOL TABLE
  LABEL                             VALUE 

ACTIONS_MENU_FLAGS                B'00000001'
ADD_PCL                           
BUTTONS                           00000005
C                                 00000000
CHECK_BUTTONS_MACRO               
CLR_DISP                          00000001
CLR_DISPLAY_ROUTINE               00000000
CLR_RAM_MACRO                     
CNTL_TRIS_MASK                    000000F5
CORRECT_INDEX_MENU                00000025
CORRECT_INDEX_SUBMENU             0000006B
CREATE_MENU_NAMES                 
CREATE_SUBMENU_NAMES              
CREATE_SUBMENU_NAMES_             
CURSOR_DOWN_MENU                  00000043
CURSOR_DOWN_SUBMENU               00000089
CURSOR_UP_MENU                    0000003D
CURSOR_UP_SUBMENU                 00000083
DC                                00000001
DD_RAM_ADDR                       00000080
DD_RAM_UL                         00000080
DEBOUNCE_DELAY                    000000A0
DELAY_4MS                         00000000
DISP_OFF                          00000008
DISP_ON                           0000000C
DISP_ON_B                         0000000F
DISP_ON_C                         0000000E
DOWN                              PORTB,5
DRAW_CURSOR                       
DRAW_CURSOR_ROUTINE               000000D6
DRAW_MENU                         0000001A
DRAW_MENU_ROUTINE                 000000AD
DRAW_SUBMENU                      0000005C
DRAW_SUBMENU_ROUTINE              000000B5
E                                 00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
END_ACTION                        00000093
END_MENU_ACTION                   00000056
ENTER                             PORTB,6
ENTER_MENU                        0000004B
ENTER_SUBMENU                     00000091
ENTRY_DEC                         00000004
ENTRY_DEC_S                       00000005
ENTRY_INC                         00000006
ENTRY_INC_S                       00000007
EXIT                              PORTB,7
EXIT_DELAY                        .20
EXIT_MENU                         00000049
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 47


SYMBOL TABLE
  LABEL                             VALUE 

EXIT_SUBMENU                      0000008F
F                                 00000001
FIRST_LINE                        00000080
FIRST_LINE_MACRO                  
FSR                               00000004
GIE                               00000007
GOTO_MENU_ACTION                  
GOTO_PUNKT_MENU                   
GOTO_PUNKT_SUBMENU                
GOTO_PUNKT_SUBMENU_ACTION         
INDEX_MENU                        00000000
INDEX_SUBMENU                     00000001
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
KNOWN_ZERO                        00000000
LAST_SYMBOL_FIRST_LINE            0000008F
LAST_SYMBOL_SECOND_LINE           000000CF
LCD_CNTL                          00000005
LCD_CNTL_TRIS                     00000085
LCD_DATA                          00000006
LCD_DATA_TRIS                     00000086
LOOP_1                            0000004F
LOOP_DELAY                        000000A3
LOOP_DRAW_MENU                    000000AE
LOOP_DRAW_SUBMENU                 000000B6
LOOP_MENU                         0000002E
LOOP_SUBMENU                      00000074
MAIN                              00000000
MENU_1                            000001A0
MENU_1_ACTION                     000002AC
MENU_1_SUBMENU_1_ACTION           000002C1
MENU_1_SUBMENU_2_ACTION           000002C2
MENU_1_SUBMENU_3_ACTION           000002C3
MENU_1_TABLE                      0000012F
MENU_1_TABLE_ACTION               0000016E
MENU_2                            000001B1
MENU_2_ACTION                     000002BA
MENU_2_SUBMENU_1                  000001F5
MENU_2_SUBMENU_1_ACTION           000002C4
MENU_2_SUBMENU_2_ACTION           000002C5
MENU_2_SUBMENU_3_ACTION           000002C6
MENU_2_TABLE                      00000137
MENU_2_TABLE_ACTION               00000176
MENU_3                            000001C2
MENU_3_ACTION                     000002BB
MENU_3_SUBMENU_1                  00000206
MENU_3_SUBMENU_1_ACTION           000002C7
MENU_3_SUBMENU_2                  00000217
MENU_3_SUBMENU_2_ACTION           000002C8
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

MENU_3_SUBMENU_3_ACTION           000002C9
MENU_3_TABLE                      00000140
MENU_3_TABLE_ACTION               0000017F
MENU_4                            000001D3
MENU_4_ACTION                     000002BC
MENU_4_SUBMENU_1                  00000228
MENU_4_SUBMENU_1_ACTION           000002CA
MENU_4_SUBMENU_2                  00000239
MENU_4_SUBMENU_2_ACTION           000002CB
MENU_4_SUBMENU_3                  0000024A
MENU_4_SUBMENU_3_ACTION           000002CC
MENU_4_TABLE                      0000014A
MENU_4_TABLE_ACTION               00000189
MENU_5                            000001E4
MENU_5_ACTION                     000002BD
MENU_5_SUBMENU_1                  0000025B
MENU_5_SUBMENU_1_ACTION           000002CD
MENU_5_SUBMENU_2                  0000026C
MENU_5_SUBMENU_2_ACTION           000002CE
MENU_5_SUBMENU_3                  0000027D
MENU_5_SUBMENU_3_ACTION           000002CF
MENU_5_SUBMENU_4                  0000028E
MENU_5_SUBMENU_4_ACTION           000002D0
MENU_5_TABLE                      00000155
MENU_5_TABLE_ACTION               00000194
MENU_6_ACTION                     000002BE
MENU_7_ACTION                     000002BF
MENU_8_ACTION                     000002C0
MENU_ACTION                       0000029F
MENU_COUNTER                      00000004
MENU_HEANDLER                     00000019
MENU_NAME_1                       "1.Menu_1"
MENU_NAME_2                       "2.Menu_2"
MENU_NAME_3                       "3.Menu_3"
MENU_NAME_4                       "4.Menu_4"
MENU_NAME_5                       "5.Menu_5"
MENU_NAME_6                       "6.Menu_6"
MENU_SUBMENU_NAME_1_1             "1.1.Subm"
MENU_SUBMENU_NAME_1_2             "1.2.Subm"
MENU_SUBMENU_NAME_1_3             "1.3.Subm"
MENU_SUBMENU_NAME_1_4             "1.4.Subm"
MENU_SUBMENU_NAME_2_1             "2.1.Subm"
MENU_SUBMENU_NAME_2_2             "2.2.Subm"
MENU_SUBMENU_NAME_2_3             "2.3.Subm"
MENU_SUBMENU_NAME_2_4             "2.4.Subm"
MENU_SUBMENU_NAME_3_1             "3.1.Subm"
MENU_SUBMENU_NAME_3_2             "3.2.Subm"
MENU_SUBMENU_NAME_3_3             "3.3.Subm"
MENU_SUBMENU_NAME_3_4             "3.4.Subm"
MENU_SUBMENU_NAME_4_1             "4.1.Subm"
MENU_SUBMENU_NAME_4_2             "4.2.Subm"
MENU_SUBMENU_NAME_4_3             "4.3.Subm"
MENU_SUBMENU_NAME_4_4             "4.4.Subm"
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

MENU_SUBMENU_NAME_5_1             "5.1.Subm"
MENU_SUBMENU_NAME_5_2             "5.2.Subm"
MENU_SUBMENU_NAME_5_3             "5.3.Subm"
MENU_SUBMENU_NAME_5_4             "5.4.Subm"
MENU_TABLE                        00000115
MICROMENU_INIT                    
MOD_PCL                           
N                                 00000000
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
NUM_OF_MAIN_MENU_PUNKTS           .5
NUM_OF_SUBMENU                    00000002
NUM_OF_SUBMENU_PUNKTS_1           .0
NUM_OF_SUBMENU_PUNKTS_2           .1
NUM_OF_SUBMENU_PUNKTS_3           .2
NUM_OF_SUBMENU_PUNKTS_4           .3
NUM_OF_SUBMENU_PUNKTS_5           .4
NUM_OF_SUBMENU_TABLE              00000108
OFFSET                            00000000
ONLY_WRITE                        00000001
OPTION_REG                        00000081
PCL                               00000002
PCLATH                            0000000A
POP                               
PORTA                             00000005
PORTB                             00000006
PRESS_DOWN                        BUTTONS,1
PRESS_ENTER                       BUTTONS,3
PRESS_EXIT                        BUTTONS,2
PRESS_UP                          BUTTONS,0
PRINT_LCD_STRING_MACRO            
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PUSH                              
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RD                                00000000
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

RETLW_NUM_OF_SUBMENU_PUNKTS       
ROTATE_ACTION_MENU_FLAGS          00000054
RP0                               00000005
RP1                               00000006
RS                                00000003
SAVE_CURSOR_POSITION              0
SECOND_LINE                       000000C0
SECOND_LINE_MACRO                 
SECOND_STRING_ROUTINE             000000D1
SEND_LCD_COMMAND                  00000000
SEND_LCD_SYMBOL                   00000000
SKIP_CORRECT_INDEX_MENU           00000029
SKIP_CORRECT_INDEX_SUBMENU        0000006F
STATUS                            00000003
SUBMENU_TABLE                     00000122
SWITCH_ACTION                     00000161
SYMBOL_POINTER                    00000003
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TABLE_ACTION_COMPLETE             00000000
TABLE_ZASTAVKA_FIRST_STRING       000000DA
TABLE_ZASTAVKA_SECOND_STRING      000000F1
TEMP_1                            00000006
TEMP_2                            00000007
TEMP_3                            00000008
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
UP                                PORTB,4
USE_4_BIT_MODE                    00000001
USE_HIGH_NIBLE                    00000000
USE_MENU_ACTION                   1
USE_MOVING_CURSOR                 0
USE_ONE_PORT                      00000000
USE_RBIE                          0
USE_SHORT_MOD_PCL                 1
MPASM  5.51                 MICROMENU_LIB.ASM   12-23-2018  23:07:25         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

USE_STATIC_CURSOR                 1
USE_TOP_LAST_CURSOR               0
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Y                                 00000001
Z                                 00000002
ZASTAVKA                          000000BD
ZASTAVKA_FIRST_STRING             "  MicroMenuLib"
ZASTAVKA_SECOND_STRING            "  ver 1.0 beta"
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_MICROMENU_009E                   0000009E
_MICROMENU_00A9                   000000A9
_MICROMENU_02B8                   000002B8
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001

Errors   :     0
Warnings :   161 reported,     0 suppressed
Messages :    27 reported,     0 suppressed

